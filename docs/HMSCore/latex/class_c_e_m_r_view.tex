\doxysection{CEMRView Class Tham chiếu}
\hypertarget{class_c_e_m_r_view}{}\label{class_c_e_m_r_view}\index{CEMRView@{CEMRView}}


View chính quản lý bệnh án điện tử với nhiều tab.  




{\ttfamily \#include $<$EMRView.\+h$>$}

Sơ đồ kế thừa cho CEMRView\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{class_c_e_m_r_view}
\end{center}
\end{figure}
\doxysubsubsection*{Các hàm thành viên Public}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_c_e_m_r_view_ae78c8cd4d6412a8a858fbc00a744e343}{CEMRView}} (long n\+Patient\+No=0, long n\+Document\+No=0, long n\+Out\+Patient\+ID=0, bool b\+Is\+Out\+Patient=false)
\begin{DoxyCompactList}\small\item\em Constructor với tham số \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_c_e_m_r_view_a15c73b1f1c3c61be434462380816d22f}{\texorpdfstring{$\sim$}{\string~}\+CEMRView}} ()
\begin{DoxyCompactList}\small\item\em Destructor. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_c_e_m_r_view_af1adb827a30cb9592217fb3b79866a30}{On\+Create\+Components}} ()
\begin{DoxyCompactList}\small\item\em Tạo các thành phần giao diện. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_c_e_m_r_view_a86fe874f74d66a6ed46ae1a41c63db63}{On\+Initialize\+Components}} ()
\begin{DoxyCompactList}\small\item\em Khởi tạo các thành phần. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_c_e_m_r_view_a458192777c49974c58fcec8d86caeb6c}{On\+Set\+Window\+Events}} ()
\begin{DoxyCompactList}\small\item\em Thiết lập các sự kiện cho cửa sổ \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_c_e_m_r_view_abcd039197e1a1305cb229d73ba5f9fe3}{On\+Do\+Data\+Exchange}} (CData\+Exchange \texorpdfstring{$\ast$}{*}p\+DX)
\begin{DoxyCompactList}\small\item\em Trao đổi dữ liệu giữa các điều khiển và biến thành viên. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_c_e_m_r_view_a48b74d57e7bae8c14fa05b07df87a179}{Update\+Json}} (BOOL b\+Save\+And\+Validate)
\begin{DoxyCompactList}\small\item\em Cập nhật dữ liệu JSON. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_c_e_m_r_view_affaf41e3a5c15bf32f6935ebabc023cb}{Get\+Data\+To\+Screen}} ()
\begin{DoxyCompactList}\small\item\em Lấy dữ liệu từ biến thành viên và hiển thị lên màn hình. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_c_e_m_r_view_ae972a65a822d76749d5182750ce89360}{Get\+Screen\+To\+Data}} ()
\begin{DoxyCompactList}\small\item\em Lấy dữ liệu từ màn hình và lưu vào biến thành viên. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_c_e_m_r_view_ad1e75c53303dfee36388e137f2e7fe4d}{Set\+Default\+Values}} ()
\begin{DoxyCompactList}\small\item\em Đặt các giá trị mặc định cho các điều khiển. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{class_c_e_m_r_view_aeddc0e208c7a50abb69ed8776526a553}{Set\+Mode}} (int n\+Mode)
\begin{DoxyCompactList}\small\item\em Đặt chế độ làm việc cho view. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{class_c_e_m_r_view_a4427546d835453805db93789479f6a68}{On\+Add\+EMRView}} ()
\begin{DoxyCompactList}\small\item\em Xử lý thêm EMR mới. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{class_c_e_m_r_view_aa6906c2cb3b0fa9489f4795bad720bdd}{On\+Edit\+EMRView}} ()
\begin{DoxyCompactList}\small\item\em Xử lý chỉnh sửa EMR. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{class_c_e_m_r_view_a23327e13c923071dbd0db92544ae1b4d}{On\+Delete\+EMRView}} ()
\begin{DoxyCompactList}\small\item\em Xử lý xóa EMR. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{class_c_e_m_r_view_a58b74a34b6e8060932c76204cb4ae45d}{On\+Save\+EMRView}} ()
\begin{DoxyCompactList}\small\item\em Xử lý lưu EMR. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{class_c_e_m_r_view_a8b4abe93caf8f9d68b3f67235c704a19}{On\+Cancel\+EMRView}} ()
\begin{DoxyCompactList}\small\item\em Xử lý hủy bỏ thao tác. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{class_c_e_m_r_view_a1efdf0521dfe6fa5226b2d2e65e31172}{On\+EMRView\+List\+Load\+Data}} ()
\begin{DoxyCompactList}\small\item\em Load dữ liệu danh sách EMR. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_c_e_m_r_view_a899c0a0eca168b475bc4c70223c64f77}{On\+View\+Tab\+Select\+Change}} (int n\+Old\+Item, int n\+New\+Item)
\begin{DoxyCompactList}\small\item\em Xử lý sự kiện thay đổi tab. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_c_e_m_r_view_a0df621b000bb884bad90230d33be630b}{On\+Resize\+Layout}} ()
\begin{DoxyCompactList}\small\item\em Tính toán lại layout khi resize. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_c_e_m_r_view_af954bdcdfe641827c6cafd82713a5bd8}{Load\+Document}} (long n\+Patient\+No, long n\+Document\+No, long n\+Out\+Patient\+ID, bool b\+Is\+Out\+Patient)
\begin{DoxyCompactList}\small\item\em Load document vào view. \end{DoxyCompactList}\item 
afx\+\_\+msg void \mbox{\hyperlink{class_c_e_m_r_view_a27938275b6df01e0a8c5a6cc5d4feae7}{On\+Size}} (UINT n\+Type, int cx, int cy)
\begin{DoxyCompactList}\small\item\em Khai báo message map cho MFC. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Các thuộc tính Public}
\begin{DoxyCompactItemize}
\item 
CGui\+Tab\+Ctrl \mbox{\hyperlink{class_c_e_m_r_view_a345a05cbe126d30e4f996e55ed7b9ea3}{m\+\_\+wnd\+View\+Tab}}
\begin{DoxyCompactList}\small\item\em Tab control chứa các view con. \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_c_e_m_r_patient_profile}{CEMRPatient\+Profile}} \mbox{\hyperlink{class_c_e_m_r_view_ae63d75a7320c34da6584e33f6f7b8618}{m\+\_\+wnd\+Patient\+Profile}}
\begin{DoxyCompactList}\small\item\em View hiển thị profile bệnh nhân EMR. \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_c_h_m_s_patient_information}{CHMSPatient\+Information}} \mbox{\hyperlink{class_c_e_m_r_view_a2f4c03bb3135fa8455f68417e899a14a}{m\+\_\+wnd\+Patient\+Info}}
\begin{DoxyCompactList}\small\item\em View hiển thị thông tin bệnh nhân. \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_c_h_m_s_signature_view}{CHMSSignature\+View}} \mbox{\hyperlink{class_c_e_m_r_view_a8c5a5913f2fad0d66aefd734ccbd025c}{m\+\_\+wnd\+BADT}}
\begin{DoxyCompactList}\small\item\em View hiển thị chữ ký số bệnh án điện tử \end{DoxyCompactList}\item 
long \mbox{\hyperlink{class_c_e_m_r_view_ac6e9dbc6875c02399c6180472adb9e8b}{m\+\_\+n\+Document\+No}}
\begin{DoxyCompactList}\small\item\em Số hồ sơ bệnh nhân. \end{DoxyCompactList}\item 
long \mbox{\hyperlink{class_c_e_m_r_view_a37db96bc1bfe21fc8629e11c73a8f55a}{m\+\_\+n\+Patient\+No}}
\begin{DoxyCompactList}\small\item\em Số bệnh nhân. \end{DoxyCompactList}\item 
long \mbox{\hyperlink{class_c_e_m_r_view_a940c2b5d74bec6ac9446ed1de6fe8a3d}{m\+\_\+n\+Out\+Patient\+ID}}
\begin{DoxyCompactList}\small\item\em ID bệnh nhân ngoại trú \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{class_c_e_m_r_view_afaaae1e10de813556c1227ab831071e5}{m\+\_\+b\+Is\+Out\+Patient}}
\begin{DoxyCompactList}\small\item\em Cờ xác định là bệnh nhân ngoại trú (true) hay nội trú (false). \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Mô tả chi tiết}
View chính quản lý bệnh án điện tử với nhiều tab. 

Class này kế thừa từ CGui\+View, cung cấp view chính\+:
\begin{DoxyItemize}
\item Quản lý nhiều tab\+: Patient Profile, Patient Information, Signature View
\item Tích hợp \doxylink{class_c_e_m_r_patient_profile}{CEMRPatient\+Profile}, \doxylink{class_c_h_m_s_patient_information}{CHMSPatient\+Information}, \doxylink{class_c_h_m_s_signature_view}{CHMSSignature\+View}
\item Load document theo patient number hoặc document number
\item Hỗ trợ cả nội trú và ngoại trú
\item Chuyển đổi giữa các tab view 
\end{DoxyItemize}

\label{doc-constructors}
\Hypertarget{class_c_e_m_r_view_doc-constructors}
\doxysubsection{Thông tin về Constructor và Destructor}
\Hypertarget{class_c_e_m_r_view_ae78c8cd4d6412a8a858fbc00a744e343}\index{CEMRView@{CEMRView}!CEMRView@{CEMRView}}
\index{CEMRView@{CEMRView}!CEMRView@{CEMRView}}
\doxysubsubsection{\texorpdfstring{CEMRView()}{CEMRView()}}
{\footnotesize\ttfamily \label{class_c_e_m_r_view_ae78c8cd4d6412a8a858fbc00a744e343} 
CEMRView\+::\+CEMRView (\begin{DoxyParamCaption}\item[{long}]{n\+Patient\+No}{ = {\ttfamily 0}, }\item[{long}]{n\+Document\+No}{ = {\ttfamily 0}, }\item[{long}]{n\+Out\+Patient\+ID}{ = {\ttfamily 0}, }\item[{bool}]{b\+Is\+Out\+Patient}{ = {\ttfamily false}}\end{DoxyParamCaption})}



Constructor với tham số 


\begin{DoxyParams}{Các tham số}
{\em n\+Patient\+No} & Số bệnh nhân (mặc định 0) \\
\hline
{\em n\+Document\+No} & Số hồ sơ (mặc định 0) \\
\hline
{\em n\+Out\+Patient\+ID} & ID bệnh nhân ngoại trú (mặc định 0) \\
\hline
{\em b\+Is\+Out\+Patient} & true nếu là ngoại trú, false nếu nội trú (mặc định false)\\
\hline
\end{DoxyParams}
Khởi tạo view EMR với thông tin bệnh nhân được chỉ định. \Hypertarget{class_c_e_m_r_view_a15c73b1f1c3c61be434462380816d22f}\index{CEMRView@{CEMRView}!````~CEMRView@{\texorpdfstring{$\sim$}{\string~}CEMRView}}
\index{````~CEMRView@{\texorpdfstring{$\sim$}{\string~}CEMRView}!CEMRView@{CEMRView}}
\doxysubsubsection{\texorpdfstring{\texorpdfstring{$\sim$}{\string~}CEMRView()}{\string~CEMRView()}}
{\footnotesize\ttfamily \label{class_c_e_m_r_view_a15c73b1f1c3c61be434462380816d22f} 
CEMRView\+::\texorpdfstring{$\sim$}{\string~}\+CEMRView (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Destructor. 

Giải phóng tài nguyên và dọn dẹp các thành viên. 

\label{doc-func-members}
\Hypertarget{class_c_e_m_r_view_doc-func-members}
\doxysubsection{Thông tin về hàm thành viên}
\Hypertarget{class_c_e_m_r_view_affaf41e3a5c15bf32f6935ebabc023cb}\index{CEMRView@{CEMRView}!GetDataToScreen@{GetDataToScreen}}
\index{GetDataToScreen@{GetDataToScreen}!CEMRView@{CEMRView}}
\doxysubsubsection{\texorpdfstring{GetDataToScreen()}{GetDataToScreen()}}
{\footnotesize\ttfamily \label{class_c_e_m_r_view_affaf41e3a5c15bf32f6935ebabc023cb} 
void CEMRView\+::\+Get\+Data\+To\+Screen (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Lấy dữ liệu từ biến thành viên và hiển thị lên màn hình. 

Đồng bộ dữ liệu từ biến thành viên lên các view con tương ứng. \Hypertarget{class_c_e_m_r_view_ae972a65a822d76749d5182750ce89360}\index{CEMRView@{CEMRView}!GetScreenToData@{GetScreenToData}}
\index{GetScreenToData@{GetScreenToData}!CEMRView@{CEMRView}}
\doxysubsubsection{\texorpdfstring{GetScreenToData()}{GetScreenToData()}}
{\footnotesize\ttfamily \label{class_c_e_m_r_view_ae972a65a822d76749d5182750ce89360} 
void CEMRView\+::\+Get\+Screen\+To\+Data (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Lấy dữ liệu từ màn hình và lưu vào biến thành viên. 

Đồng bộ dữ liệu từ các view con về biến thành viên. \Hypertarget{class_c_e_m_r_view_af954bdcdfe641827c6cafd82713a5bd8}\index{CEMRView@{CEMRView}!LoadDocument@{LoadDocument}}
\index{LoadDocument@{LoadDocument}!CEMRView@{CEMRView}}
\doxysubsubsection{\texorpdfstring{LoadDocument()}{LoadDocument()}}
{\footnotesize\ttfamily \label{class_c_e_m_r_view_af954bdcdfe641827c6cafd82713a5bd8} 
void CEMRView\+::\+Load\+Document (\begin{DoxyParamCaption}\item[{long}]{n\+Patient\+No}{, }\item[{long}]{n\+Document\+No}{, }\item[{long}]{n\+Out\+Patient\+ID}{, }\item[{bool}]{b\+Is\+Out\+Patient}{}\end{DoxyParamCaption})}



Load document vào view. 


\begin{DoxyParams}{Các tham số}
{\em n\+Patient\+No} & Số bệnh nhân \\
\hline
{\em n\+Document\+No} & Số hồ sơ \\
\hline
{\em n\+Out\+Patient\+ID} & ID bệnh nhân ngoại trú \\
\hline
{\em b\+Is\+Out\+Patient} & true nếu là ngoại trú, false nếu nội trú\\
\hline
\end{DoxyParams}
Load thông tin document từ database và hiển thị trong các view con tương ứng. \Hypertarget{class_c_e_m_r_view_a4427546d835453805db93789479f6a68}\index{CEMRView@{CEMRView}!OnAddEMRView@{OnAddEMRView}}
\index{OnAddEMRView@{OnAddEMRView}!CEMRView@{CEMRView}}
\doxysubsubsection{\texorpdfstring{OnAddEMRView()}{OnAddEMRView()}}
{\footnotesize\ttfamily \label{class_c_e_m_r_view_a4427546d835453805db93789479f6a68} 
int CEMRView\+::\+On\+Add\+EMRView (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Xử lý thêm EMR mới. 

\begin{DoxyReturn}{Giá trị trả về}
0 nếu thành công, giá trị khác 0 nếu thất bại
\end{DoxyReturn}
Tạo EMR mới cho bệnh nhân. \Hypertarget{class_c_e_m_r_view_a8b4abe93caf8f9d68b3f67235c704a19}\index{CEMRView@{CEMRView}!OnCancelEMRView@{OnCancelEMRView}}
\index{OnCancelEMRView@{OnCancelEMRView}!CEMRView@{CEMRView}}
\doxysubsubsection{\texorpdfstring{OnCancelEMRView()}{OnCancelEMRView()}}
{\footnotesize\ttfamily \label{class_c_e_m_r_view_a8b4abe93caf8f9d68b3f67235c704a19} 
int CEMRView\+::\+On\+Cancel\+EMRView (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Xử lý hủy bỏ thao tác. 

\begin{DoxyReturn}{Giá trị trả về}
0 nếu thành công, giá trị khác 0 nếu thất bại
\end{DoxyReturn}
Hủy bỏ các thay đổi và khôi phục trạng thái ban đầu. \Hypertarget{class_c_e_m_r_view_af1adb827a30cb9592217fb3b79866a30}\index{CEMRView@{CEMRView}!OnCreateComponents@{OnCreateComponents}}
\index{OnCreateComponents@{OnCreateComponents}!CEMRView@{CEMRView}}
\doxysubsubsection{\texorpdfstring{OnCreateComponents()}{OnCreateComponents()}}
{\footnotesize\ttfamily \label{class_c_e_m_r_view_af1adb827a30cb9592217fb3b79866a30} 
void CEMRView\+::\+On\+Create\+Components (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Tạo các thành phần giao diện. 

Tạo tab control và các view con (Patient Profile, Patient Information, Signature View). \Hypertarget{class_c_e_m_r_view_a23327e13c923071dbd0db92544ae1b4d}\index{CEMRView@{CEMRView}!OnDeleteEMRView@{OnDeleteEMRView}}
\index{OnDeleteEMRView@{OnDeleteEMRView}!CEMRView@{CEMRView}}
\doxysubsubsection{\texorpdfstring{OnDeleteEMRView()}{OnDeleteEMRView()}}
{\footnotesize\ttfamily \label{class_c_e_m_r_view_a23327e13c923071dbd0db92544ae1b4d} 
int CEMRView\+::\+On\+Delete\+EMRView (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Xử lý xóa EMR. 

\begin{DoxyReturn}{Giá trị trả về}
0 nếu thành công, giá trị khác 0 nếu thất bại
\end{DoxyReturn}
Xóa EMR sau khi xác nhận từ người dùng. \Hypertarget{class_c_e_m_r_view_abcd039197e1a1305cb229d73ba5f9fe3}\index{CEMRView@{CEMRView}!OnDoDataExchange@{OnDoDataExchange}}
\index{OnDoDataExchange@{OnDoDataExchange}!CEMRView@{CEMRView}}
\doxysubsubsection{\texorpdfstring{OnDoDataExchange()}{OnDoDataExchange()}}
{\footnotesize\ttfamily \label{class_c_e_m_r_view_abcd039197e1a1305cb229d73ba5f9fe3} 
void CEMRView\+::\+On\+Do\+Data\+Exchange (\begin{DoxyParamCaption}\item[{CData\+Exchange \texorpdfstring{$\ast$}{*}}]{p\+DX}{}\end{DoxyParamCaption})}



Trao đổi dữ liệu giữa các điều khiển và biến thành viên. 


\begin{DoxyParams}{Các tham số}
{\em p\+DX} & Con trỏ đến đối tượng CData\+Exchange\\
\hline
\end{DoxyParams}
Thực hiện DDX để đồng bộ dữ liệu giữa UI và biến thành viên. \Hypertarget{class_c_e_m_r_view_aa6906c2cb3b0fa9489f4795bad720bdd}\index{CEMRView@{CEMRView}!OnEditEMRView@{OnEditEMRView}}
\index{OnEditEMRView@{OnEditEMRView}!CEMRView@{CEMRView}}
\doxysubsubsection{\texorpdfstring{OnEditEMRView()}{OnEditEMRView()}}
{\footnotesize\ttfamily \label{class_c_e_m_r_view_aa6906c2cb3b0fa9489f4795bad720bdd} 
int CEMRView\+::\+On\+Edit\+EMRView (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Xử lý chỉnh sửa EMR. 

\begin{DoxyReturn}{Giá trị trả về}
0 nếu thành công, giá trị khác 0 nếu thất bại
\end{DoxyReturn}
Chuyển view sang chế độ chỉnh sửa. \Hypertarget{class_c_e_m_r_view_a1efdf0521dfe6fa5226b2d2e65e31172}\index{CEMRView@{CEMRView}!OnEMRViewListLoadData@{OnEMRViewListLoadData}}
\index{OnEMRViewListLoadData@{OnEMRViewListLoadData}!CEMRView@{CEMRView}}
\doxysubsubsection{\texorpdfstring{OnEMRViewListLoadData()}{OnEMRViewListLoadData()}}
{\footnotesize\ttfamily \label{class_c_e_m_r_view_a1efdf0521dfe6fa5226b2d2e65e31172} 
int CEMRView\+::\+On\+EMRView\+List\+Load\+Data (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Load dữ liệu danh sách EMR. 

\begin{DoxyReturn}{Giá trị trả về}
Số lượng bản ghi đã load
\end{DoxyReturn}
Load danh sách EMR từ database (nếu có). \Hypertarget{class_c_e_m_r_view_a86fe874f74d66a6ed46ae1a41c63db63}\index{CEMRView@{CEMRView}!OnInitializeComponents@{OnInitializeComponents}}
\index{OnInitializeComponents@{OnInitializeComponents}!CEMRView@{CEMRView}}
\doxysubsubsection{\texorpdfstring{OnInitializeComponents()}{OnInitializeComponents()}}
{\footnotesize\ttfamily \label{class_c_e_m_r_view_a86fe874f74d66a6ed46ae1a41c63db63} 
void CEMRView\+::\+On\+Initialize\+Components (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Khởi tạo các thành phần. 

Thiết lập các thuộc tính ban đầu cho tab control và các view con. \Hypertarget{class_c_e_m_r_view_a0df621b000bb884bad90230d33be630b}\index{CEMRView@{CEMRView}!OnResizeLayout@{OnResizeLayout}}
\index{OnResizeLayout@{OnResizeLayout}!CEMRView@{CEMRView}}
\doxysubsubsection{\texorpdfstring{OnResizeLayout()}{OnResizeLayout()}}
{\footnotesize\ttfamily \label{class_c_e_m_r_view_a0df621b000bb884bad90230d33be630b} 
void CEMRView\+::\+On\+Resize\+Layout (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Tính toán lại layout khi resize. 

Tính toán lại kích thước và vị trí của tab control và các view con khi cửa sổ thay đổi kích thước. \Hypertarget{class_c_e_m_r_view_a58b74a34b6e8060932c76204cb4ae45d}\index{CEMRView@{CEMRView}!OnSaveEMRView@{OnSaveEMRView}}
\index{OnSaveEMRView@{OnSaveEMRView}!CEMRView@{CEMRView}}
\doxysubsubsection{\texorpdfstring{OnSaveEMRView()}{OnSaveEMRView()}}
{\footnotesize\ttfamily \label{class_c_e_m_r_view_a58b74a34b6e8060932c76204cb4ae45d} 
int CEMRView\+::\+On\+Save\+EMRView (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Xử lý lưu EMR. 

\begin{DoxyReturn}{Giá trị trả về}
0 nếu thành công, giá trị khác 0 nếu thất bại
\end{DoxyReturn}
Lưu thông tin EMR từ các view con vào database. \Hypertarget{class_c_e_m_r_view_a458192777c49974c58fcec8d86caeb6c}\index{CEMRView@{CEMRView}!OnSetWindowEvents@{OnSetWindowEvents}}
\index{OnSetWindowEvents@{OnSetWindowEvents}!CEMRView@{CEMRView}}
\doxysubsubsection{\texorpdfstring{OnSetWindowEvents()}{OnSetWindowEvents()}}
{\footnotesize\ttfamily \label{class_c_e_m_r_view_a458192777c49974c58fcec8d86caeb6c} 
void CEMRView\+::\+On\+Set\+Window\+Events (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Thiết lập các sự kiện cho cửa sổ 

Đăng ký các event handler cho tab control (tab change event). \Hypertarget{class_c_e_m_r_view_a27938275b6df01e0a8c5a6cc5d4feae7}\index{CEMRView@{CEMRView}!OnSize@{OnSize}}
\index{OnSize@{OnSize}!CEMRView@{CEMRView}}
\doxysubsubsection{\texorpdfstring{OnSize()}{OnSize()}}
{\footnotesize\ttfamily \label{class_c_e_m_r_view_a27938275b6df01e0a8c5a6cc5d4feae7} 
afx\+\_\+msg void CEMRView\+::\+On\+Size (\begin{DoxyParamCaption}\item[{UINT}]{n\+Type}{, }\item[{int}]{cx}{, }\item[{int}]{cy}{}\end{DoxyParamCaption})}



Khai báo message map cho MFC. 

Khai báo để MFC có thể ánh xạ các message Windows đến các hàm xử lý tương ứng.

Xử lý khi view thay đổi kích thước 
\begin{DoxyParams}{Các tham số}
{\em n\+Type} & Loại thay đổi kích thước (SIZE\+\_\+\+MINIMIZED, SIZE\+\_\+\+MAXIMIZED, SIZE\+\_\+\+RESTORED) \\
\hline
{\em cx} & Chiều rộng mới \\
\hline
{\em cy} & Chiều cao mới\\
\hline
\end{DoxyParams}
Tính toán lại layout của tab control và các view con khi kích thước thay đổi. \Hypertarget{class_c_e_m_r_view_a899c0a0eca168b475bc4c70223c64f77}\index{CEMRView@{CEMRView}!OnViewTabSelectChange@{OnViewTabSelectChange}}
\index{OnViewTabSelectChange@{OnViewTabSelectChange}!CEMRView@{CEMRView}}
\doxysubsubsection{\texorpdfstring{OnViewTabSelectChange()}{OnViewTabSelectChange()}}
{\footnotesize\ttfamily \label{class_c_e_m_r_view_a899c0a0eca168b475bc4c70223c64f77} 
void CEMRView\+::\+On\+View\+Tab\+Select\+Change (\begin{DoxyParamCaption}\item[{int}]{n\+Old\+Item}{, }\item[{int}]{n\+New\+Item}{}\end{DoxyParamCaption})}



Xử lý sự kiện thay đổi tab. 


\begin{DoxyParams}{Các tham số}
{\em n\+Old\+Item} & Index của tab cũ \\
\hline
{\em n\+New\+Item} & Index của tab mới\\
\hline
\end{DoxyParams}
Hiển thị view tương ứng với tab được chọn và ẩn tab cũ. \Hypertarget{class_c_e_m_r_view_ad1e75c53303dfee36388e137f2e7fe4d}\index{CEMRView@{CEMRView}!SetDefaultValues@{SetDefaultValues}}
\index{SetDefaultValues@{SetDefaultValues}!CEMRView@{CEMRView}}
\doxysubsubsection{\texorpdfstring{SetDefaultValues()}{SetDefaultValues()}}
{\footnotesize\ttfamily \label{class_c_e_m_r_view_ad1e75c53303dfee36388e137f2e7fe4d} 
void CEMRView\+::\+Set\+Default\+Values (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Đặt các giá trị mặc định cho các điều khiển. 

Thiết lập giá trị mặc định cho các view con. \Hypertarget{class_c_e_m_r_view_aeddc0e208c7a50abb69ed8776526a553}\index{CEMRView@{CEMRView}!SetMode@{SetMode}}
\index{SetMode@{SetMode}!CEMRView@{CEMRView}}
\doxysubsubsection{\texorpdfstring{SetMode()}{SetMode()}}
{\footnotesize\ttfamily \label{class_c_e_m_r_view_aeddc0e208c7a50abb69ed8776526a553} 
int CEMRView\+::\+Set\+Mode (\begin{DoxyParamCaption}\item[{int}]{n\+Mode}{}\end{DoxyParamCaption})}



Đặt chế độ làm việc cho view. 


\begin{DoxyParams}{Các tham số}
{\em n\+Mode} & Chế độ làm việc (VIEW\+\_\+\+MODE, ADD\+\_\+\+MODE, EDIT\+\_\+\+MODE) \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Giá trị trả về}
Chế độ làm việc hiện tại
\end{DoxyReturn}
Thiết lập chế độ làm việc cho view và các view con. \Hypertarget{class_c_e_m_r_view_a48b74d57e7bae8c14fa05b07df87a179}\index{CEMRView@{CEMRView}!UpdateJson@{UpdateJson}}
\index{UpdateJson@{UpdateJson}!CEMRView@{CEMRView}}
\doxysubsubsection{\texorpdfstring{UpdateJson()}{UpdateJson()}}
{\footnotesize\ttfamily \label{class_c_e_m_r_view_a48b74d57e7bae8c14fa05b07df87a179} 
void CEMRView\+::\+Update\+Json (\begin{DoxyParamCaption}\item[{BOOL}]{b\+Save\+And\+Validate}{}\end{DoxyParamCaption})}



Cập nhật dữ liệu JSON. 


\begin{DoxyParams}{Các tham số}
{\em b\+Save\+And\+Validate} & TRUE để lưu và validate, FALSE để chỉ validate\\
\hline
\end{DoxyParams}
Cập nhật dữ liệu JSON từ các view con hoặc validate dữ liệu JSON hiện tại. 

\label{doc-variable-members}
\Hypertarget{class_c_e_m_r_view_doc-variable-members}
\doxysubsection{Thông tin về Member Data}
\Hypertarget{class_c_e_m_r_view_afaaae1e10de813556c1227ab831071e5}\index{CEMRView@{CEMRView}!m\_bIsOutPatient@{m\_bIsOutPatient}}
\index{m\_bIsOutPatient@{m\_bIsOutPatient}!CEMRView@{CEMRView}}
\doxysubsubsection{\texorpdfstring{m\_bIsOutPatient}{m\_bIsOutPatient}}
{\footnotesize\ttfamily \label{class_c_e_m_r_view_afaaae1e10de813556c1227ab831071e5} 
bool CEMRView\+::m\+\_\+b\+Is\+Out\+Patient}



Cờ xác định là bệnh nhân ngoại trú (true) hay nội trú (false). 

\Hypertarget{class_c_e_m_r_view_ac6e9dbc6875c02399c6180472adb9e8b}\index{CEMRView@{CEMRView}!m\_nDocumentNo@{m\_nDocumentNo}}
\index{m\_nDocumentNo@{m\_nDocumentNo}!CEMRView@{CEMRView}}
\doxysubsubsection{\texorpdfstring{m\_nDocumentNo}{m\_nDocumentNo}}
{\footnotesize\ttfamily \label{class_c_e_m_r_view_ac6e9dbc6875c02399c6180472adb9e8b} 
long CEMRView\+::m\+\_\+n\+Document\+No}



Số hồ sơ bệnh nhân. 

\Hypertarget{class_c_e_m_r_view_a940c2b5d74bec6ac9446ed1de6fe8a3d}\index{CEMRView@{CEMRView}!m\_nOutPatientID@{m\_nOutPatientID}}
\index{m\_nOutPatientID@{m\_nOutPatientID}!CEMRView@{CEMRView}}
\doxysubsubsection{\texorpdfstring{m\_nOutPatientID}{m\_nOutPatientID}}
{\footnotesize\ttfamily \label{class_c_e_m_r_view_a940c2b5d74bec6ac9446ed1de6fe8a3d} 
long CEMRView\+::m\+\_\+n\+Out\+Patient\+ID}



ID bệnh nhân ngoại trú 

\Hypertarget{class_c_e_m_r_view_a37db96bc1bfe21fc8629e11c73a8f55a}\index{CEMRView@{CEMRView}!m\_nPatientNo@{m\_nPatientNo}}
\index{m\_nPatientNo@{m\_nPatientNo}!CEMRView@{CEMRView}}
\doxysubsubsection{\texorpdfstring{m\_nPatientNo}{m\_nPatientNo}}
{\footnotesize\ttfamily \label{class_c_e_m_r_view_a37db96bc1bfe21fc8629e11c73a8f55a} 
long CEMRView\+::m\+\_\+n\+Patient\+No}



Số bệnh nhân. 

\Hypertarget{class_c_e_m_r_view_a8c5a5913f2fad0d66aefd734ccbd025c}\index{CEMRView@{CEMRView}!m\_wndBADT@{m\_wndBADT}}
\index{m\_wndBADT@{m\_wndBADT}!CEMRView@{CEMRView}}
\doxysubsubsection{\texorpdfstring{m\_wndBADT}{m\_wndBADT}}
{\footnotesize\ttfamily \label{class_c_e_m_r_view_a8c5a5913f2fad0d66aefd734ccbd025c} 
\mbox{\hyperlink{class_c_h_m_s_signature_view}{CHMSSignature\+View}} CEMRView\+::m\+\_\+wnd\+BADT}



View hiển thị chữ ký số bệnh án điện tử 

\Hypertarget{class_c_e_m_r_view_a2f4c03bb3135fa8455f68417e899a14a}\index{CEMRView@{CEMRView}!m\_wndPatientInfo@{m\_wndPatientInfo}}
\index{m\_wndPatientInfo@{m\_wndPatientInfo}!CEMRView@{CEMRView}}
\doxysubsubsection{\texorpdfstring{m\_wndPatientInfo}{m\_wndPatientInfo}}
{\footnotesize\ttfamily \label{class_c_e_m_r_view_a2f4c03bb3135fa8455f68417e899a14a} 
\mbox{\hyperlink{class_c_h_m_s_patient_information}{CHMSPatient\+Information}} CEMRView\+::m\+\_\+wnd\+Patient\+Info}



View hiển thị thông tin bệnh nhân. 

\Hypertarget{class_c_e_m_r_view_ae63d75a7320c34da6584e33f6f7b8618}\index{CEMRView@{CEMRView}!m\_wndPatientProfile@{m\_wndPatientProfile}}
\index{m\_wndPatientProfile@{m\_wndPatientProfile}!CEMRView@{CEMRView}}
\doxysubsubsection{\texorpdfstring{m\_wndPatientProfile}{m\_wndPatientProfile}}
{\footnotesize\ttfamily \label{class_c_e_m_r_view_ae63d75a7320c34da6584e33f6f7b8618} 
\mbox{\hyperlink{class_c_e_m_r_patient_profile}{CEMRPatient\+Profile}} CEMRView\+::m\+\_\+wnd\+Patient\+Profile}



View hiển thị profile bệnh nhân EMR. 

\Hypertarget{class_c_e_m_r_view_a345a05cbe126d30e4f996e55ed7b9ea3}\index{CEMRView@{CEMRView}!m\_wndViewTab@{m\_wndViewTab}}
\index{m\_wndViewTab@{m\_wndViewTab}!CEMRView@{CEMRView}}
\doxysubsubsection{\texorpdfstring{m\_wndViewTab}{m\_wndViewTab}}
{\footnotesize\ttfamily \label{class_c_e_m_r_view_a345a05cbe126d30e4f996e55ed7b9ea3} 
CGui\+Tab\+Ctrl CEMRView\+::m\+\_\+wnd\+View\+Tab}



Tab control chứa các view con. 



Thông tin cho class được biên soạn từ các file sau đây\+:\begin{DoxyCompactItemize}
\item 
Include/\+HMSCore/\mbox{\hyperlink{_e_m_r_view_8h}{EMRView.\+h}}\end{DoxyCompactItemize}
