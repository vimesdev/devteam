<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="vi">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.15.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>HMS EMR - HMSCore Documentation: ATMCardReader Class Tham chiếu</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">HMS EMR - HMSCore Documentation
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Được biên soạn bởi Doxygen 1.15.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Tìm kiếm',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('class_a_t_m_card_reader.html','','class_a_t_m_card_reader-members'); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">ATMCardReader Class Tham chiếu</div></div>
</div><!--header-->
<div class="contents">

<p>Class quản lý đọc thẻ <a class="el" href="class_a_t_m.html">ATM</a> sử dụng PC/SC (Smart Card) API.  
 <a href="#details">Tiếp...</a></p>

<p><code>#include &lt;<a class="el" href="_a_t_m_card_reader_8h_source.html">ATMCardReader.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-pub-methods" class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Các hàm thành viên Public</h2></td></tr>
<tr class="memitem:aa9f42e4efbc18eecf5c1d5ecbd6f340b" id="r_aa9f42e4efbc18eecf5c1d5ecbd6f340b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa9f42e4efbc18eecf5c1d5ecbd6f340b">ATMCardReader</a> (<a class="el" href="class_a_t_m.html">ATM</a> *atm)</td></tr>
<tr class="memdesc:aa9f42e4efbc18eecf5c1d5ecbd6f340b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor của <a class="el" href="class_a_t_m_card_reader.html" title="Class quản lý đọc thẻ ATM sử dụng PC/SC (Smart Card) API.">ATMCardReader</a>.  <br /></td></tr>
<tr class="memitem:aef7bb9e4d98202b0a249ad1b3bad2046" id="r_aef7bb9e4d98202b0a249ad1b3bad2046"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aef7bb9e4d98202b0a249ad1b3bad2046">~ATMCardReader</a> ()</td></tr>
<tr class="memdesc:aef7bb9e4d98202b0a249ad1b3bad2046"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor của <a class="el" href="class_a_t_m_card_reader.html" title="Class quản lý đọc thẻ ATM sử dụng PC/SC (Smart Card) API.">ATMCardReader</a>.  <br /></td></tr>
<tr class="memitem:aceb07b3ee9b003fcef1f03a5f1adc0c5" id="r_aceb07b3ee9b003fcef1f03a5f1adc0c5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aceb07b3ee9b003fcef1f03a5f1adc0c5">SetReaderName</a> (CString szReaderName)</td></tr>
<tr class="memdesc:aceb07b3ee9b003fcef1f03a5f1adc0c5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Thiết lập tên reader sẽ sử dụng.  <br /></td></tr>
<tr class="memitem:a8405099f505cc2e6e7aaa7647911b533" id="r_a8405099f505cc2e6e7aaa7647911b533"><td class="memItemLeft" align="right" valign="top">LONG&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8405099f505cc2e6e7aaa7647911b533">RegisterContext</a> ()</td></tr>
<tr class="memdesc:a8405099f505cc2e6e7aaa7647911b533"><td class="mdescLeft">&#160;</td><td class="mdescRight">Đăng ký smart card context với hệ thống.  <br /></td></tr>
<tr class="memitem:ae9b5d185735f73670d24ebe892d1d07b" id="r_ae9b5d185735f73670d24ebe892d1d07b"><td class="memItemLeft" align="right" valign="top">LONG&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae9b5d185735f73670d24ebe892d1d07b">ReleaseContext</a> ()</td></tr>
<tr class="memdesc:ae9b5d185735f73670d24ebe892d1d07b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Giải phóng smart card context.  <br /></td></tr>
<tr class="memitem:afe99675c9842e93f14c1e8620091daba" id="r_afe99675c9842e93f14c1e8620091daba"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afe99675c9842e93f14c1e8620091daba">GetListReaders</a> ()</td></tr>
<tr class="memdesc:afe99675c9842e93f14c1e8620091daba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lấy danh sách các reader có sẵn trong hệ thống.  <br /></td></tr>
<tr class="memitem:a794d4bfac6a9dc66f4bb17406f5371b1" id="r_a794d4bfac6a9dc66f4bb17406f5371b1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a794d4bfac6a9dc66f4bb17406f5371b1">GetReaderCount</a> ()</td></tr>
<tr class="memdesc:a794d4bfac6a9dc66f4bb17406f5371b1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lấy số lượng reader có sẵn.  <br /></td></tr>
<tr class="memitem:afffd465e19b659ae33f88ce4fd639161" id="r_afffd465e19b659ae33f88ce4fd639161"><td class="memItemLeft" align="right" valign="top">CString&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afffd465e19b659ae33f88ce4fd639161">GetReaderAt</a> (int nIndex)</td></tr>
<tr class="memdesc:afffd465e19b659ae33f88ce4fd639161"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lấy tên reader tại index.  <br /></td></tr>
<tr class="memitem:a93069a4c3bb241e3ebab61e1d9e0a956" id="r_a93069a4c3bb241e3ebab61e1d9e0a956"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a93069a4c3bb241e3ebab61e1d9e0a956">Connect</a> ()</td></tr>
<tr class="memdesc:a93069a4c3bb241e3ebab61e1d9e0a956"><td class="mdescLeft">&#160;</td><td class="mdescRight">Kết nối với thẻ trong reader.  <br /></td></tr>
<tr class="memitem:a86201d7ac61bdfad56a43c514d205f63" id="r_a86201d7ac61bdfad56a43c514d205f63"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a86201d7ac61bdfad56a43c514d205f63">Disconnect</a> ()</td></tr>
<tr class="memdesc:a86201d7ac61bdfad56a43c514d205f63"><td class="mdescLeft">&#160;</td><td class="mdescRight">Ngắt kết nối với thẻ  <br /></td></tr>
<tr class="memitem:a2ce4dc9d23027df7589cb4216940a7b3" id="r_a2ce4dc9d23027df7589cb4216940a7b3"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2ce4dc9d23027df7589cb4216940a7b3">IsConnected</a> ()</td></tr>
<tr class="memdesc:a2ce4dc9d23027df7589cb4216940a7b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Kiểm tra có đang kết nối với thẻ không.  <br /></td></tr>
<tr class="memitem:ab5adb95957858af4952664ef161b75f4" id="r_ab5adb95957858af4952664ef161b75f4"><td class="memItemLeft" align="right" valign="top">LONG&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab5adb95957858af4952664ef161b75f4">Transmit</a> ()</td></tr>
<tr class="memdesc:ab5adb95957858af4952664ef161b75f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gửi lệnh APDU đến thẻ  <br /></td></tr>
<tr class="memitem:a15a0efae396c8454de20683b286aa71f" id="r_a15a0efae396c8454de20683b286aa71f"><td class="memItemLeft" align="right" valign="top">UINT&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a15a0efae396c8454de20683b286aa71f">GetState</a> ()</td></tr>
<tr class="memdesc:a15a0efae396c8454de20683b286aa71f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lấy trạng thái hiện tại của thẻ  <br /></td></tr>
<tr class="memitem:a79d62a00dfa4da5416810ac381cb9020" id="r_a79d62a00dfa4da5416810ac381cb9020"><td class="memItemLeft" align="right" valign="top">UINT&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a79d62a00dfa4da5416810ac381cb9020">GetStatus</a> ()</td></tr>
<tr class="memdesc:a79d62a00dfa4da5416810ac381cb9020"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lấy trạng thái chi tiết của thẻ và reader.  <br /></td></tr>
<tr class="memitem:a8f1c96ef743241d4adc4b645f4ef1cce" id="r_a8f1c96ef743241d4adc4b645f4ef1cce"><td class="memItemLeft" align="right" valign="top">UINT&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8f1c96ef743241d4adc4b645f4ef1cce">GetStatusChange</a> ()</td></tr>
<tr class="memdesc:a8f1c96ef743241d4adc4b645f4ef1cce"><td class="mdescLeft">&#160;</td><td class="mdescRight">Kiểm tra sự thay đổi trạng thái của thẻ  <br /></td></tr>
<tr class="memitem:af345ee341ae0bd68522f31d7213380e2" id="r_af345ee341ae0bd68522f31d7213380e2"><td class="memItemLeft" align="right" valign="top">LONG&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af345ee341ae0bd68522f31d7213380e2">LoadKey</a> ()</td></tr>
<tr class="memdesc:af345ee341ae0bd68522f31d7213380e2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load key vào thẻ để xác thực.  <br /></td></tr>
<tr class="memitem:afd01a63f523e86322934e481a96b4ab1" id="r_afd01a63f523e86322934e481a96b4ab1"><td class="memItemLeft" align="right" valign="top">LONG&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afd01a63f523e86322934e481a96b4ab1">Authenticate</a> ()</td></tr>
<tr class="memdesc:afd01a63f523e86322934e481a96b4ab1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Xác thực với thẻ sử dụng key đã load.  <br /></td></tr>
<tr class="memitem:ab7d17e3f75d3993fc687fe03426cf506" id="r_ab7d17e3f75d3993fc687fe03426cf506"><td class="memItemLeft" align="right" valign="top">CString&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab7d17e3f75d3993fc687fe03426cf506">ReadBlock</a> (CString blockId)</td></tr>
<tr class="memdesc:ab7d17e3f75d3993fc687fe03426cf506"><td class="mdescLeft">&#160;</td><td class="mdescRight">Đọc dữ liệu từ một block cụ thể trên thẻ  <br /></td></tr>
<tr class="memitem:a5e9a8ecff373bbb7745e0bc7a16bb745" id="r_a5e9a8ecff373bbb7745e0bc7a16bb745"><td class="memItemLeft" align="right" valign="top">CString&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5e9a8ecff373bbb7745e0bc7a16bb745">ReadBlockData</a> ()</td></tr>
<tr class="memdesc:a5e9a8ecff373bbb7745e0bc7a16bb745"><td class="mdescLeft">&#160;</td><td class="mdescRight">Đọc dữ liệu từ block hiện tại.  <br /></td></tr>
<tr class="memitem:a47cac40e70ed531153f584195e9456dc" id="r_a47cac40e70ed531153f584195e9456dc"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a47cac40e70ed531153f584195e9456dc">WriteBlock</a> (CString blockId, CString data)</td></tr>
<tr class="memdesc:a47cac40e70ed531153f584195e9456dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Ghi dữ liệu vào một block cụ thể trên thẻ  <br /></td></tr>
<tr class="memitem:aedc787fc6fc482c328004cd6272ae0fd" id="r_aedc787fc6fc482c328004cd6272ae0fd"><td class="memItemLeft" align="right" valign="top">CString&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aedc787fc6fc482c328004cd6272ae0fd">GetCardId</a> ()</td></tr>
<tr class="memdesc:aedc787fc6fc482c328004cd6272ae0fd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lấy ID của thẻ hiện tại.  <br /></td></tr>
<tr class="memitem:a6e0e2e822a3add8ffd02dc8f061d65f1" id="r_a6e0e2e822a3add8ffd02dc8f061d65f1"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6e0e2e822a3add8ffd02dc8f061d65f1">IsEnableTimer</a> ()</td></tr>
<tr class="memdesc:a6e0e2e822a3add8ffd02dc8f061d65f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Kiểm tra timer có được bật không.  <br /></td></tr>
<tr class="memitem:adae9036153909edf74958328a59d15a9" id="r_adae9036153909edf74958328a59d15a9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#adae9036153909edf74958328a59d15a9">OnTimer</a> ()</td></tr>
<tr class="memdesc:adae9036153909edf74958328a59d15a9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Xử lý sự kiện timer.  <br /></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-pub-attribs" class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Các thuộc tính Public</h2></td></tr>
<tr class="memitem:a0651025b9e11ad6e1e2adbd67a763f8a" id="r_a0651025b9e11ad6e1e2adbd67a763f8a"><td class="memItemLeft" align="right" valign="top">SCARD_READERSTATE&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0651025b9e11ad6e1e2adbd67a763f8a">ReaderState1</a></td></tr>
<tr class="memdesc:a0651025b9e11ad6e1e2adbd67a763f8a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Trạng thái reader.  <br /></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-pri-methods" class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Các hàm thành viên Private</h2></td></tr>
<tr class="memitem:a6fabc93dd200f66862ff4dc76f91c43a" id="r_a6fabc93dd200f66862ff4dc76f91c43a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6fabc93dd200f66862ff4dc76f91c43a">ATR_UID</a> (int card_type)</td></tr>
<tr class="memdesc:a6fabc93dd200f66862ff4dc76f91c43a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Xử lý ATR và UID theo loại thẻ  <br /></td></tr>
<tr class="memitem:aa23b82ef9d441c8925c2573c6e331739" id="r_aa23b82ef9d441c8925c2573c6e331739"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa23b82ef9d441c8925c2573c6e331739">card_Type_Identification</a> ()</td></tr>
<tr class="memdesc:aa23b82ef9d441c8925c2573c6e331739"><td class="mdescLeft">&#160;</td><td class="mdescRight">Xác định loại thẻ  <br /></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-pri-attribs" class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Các thuộc tính Private</h2></td></tr>
<tr class="memitem:ab9b5756e2534aec68d16677f946aa85d" id="r_ab9b5756e2534aec68d16677f946aa85d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_a_t_m.html">ATM</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab9b5756e2534aec68d16677f946aa85d">m_atm</a></td></tr>
<tr class="memdesc:ab9b5756e2534aec68d16677f946aa85d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Con trỏ đến đối tượng <a class="el" href="class_a_t_m.html">ATM</a>.  <br /></td></tr>
<tr class="memitem:a350cdea616a842690a6f15a8d5c07ec3" id="r_a350cdea616a842690a6f15a8d5c07ec3"><td class="memItemLeft" align="right" valign="top">DWORD&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a350cdea616a842690a6f15a8d5c07ec3">m_handle</a></td></tr>
<tr class="memdesc:a350cdea616a842690a6f15a8d5c07ec3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle của card.  <br /></td></tr>
<tr class="memitem:a3f75df54963a8dd7b4437f9830392d91" id="r_a3f75df54963a8dd7b4437f9830392d91"><td class="memItemLeft" align="right" valign="top">DWORD&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3f75df54963a8dd7b4437f9830392d91">m_hContext</a></td></tr>
<tr class="memdesc:a3f75df54963a8dd7b4437f9830392d91"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle của smart card context.  <br /></td></tr>
<tr class="memitem:a1a5bb28829a57da20fce011ba6d8cee7" id="r_a1a5bb28829a57da20fce011ba6d8cee7"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1a5bb28829a57da20fce011ba6d8cee7">m_connected</a></td></tr>
<tr class="memdesc:a1a5bb28829a57da20fce011ba6d8cee7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cờ xác định đã kết nối với thẻ chưa.  <br /></td></tr>
<tr class="memitem:adc89f73ca35d44c136948bf239f251f9" id="r_adc89f73ca35d44c136948bf239f251f9"><td class="memItemLeft" align="right" valign="top">CString&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#adc89f73ca35d44c136948bf239f251f9">m_cardId</a></td></tr>
<tr class="memdesc:adc89f73ca35d44c136948bf239f251f9"><td class="mdescLeft">&#160;</td><td class="mdescRight">ID của thẻ  <br /></td></tr>
<tr class="memitem:a82dbe6ec6a35a6458e8821b41ccc32cc" id="r_a82dbe6ec6a35a6458e8821b41ccc32cc"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a82dbe6ec6a35a6458e8821b41ccc32cc">m_establishContext</a></td></tr>
<tr class="memdesc:a82dbe6ec6a35a6458e8821b41ccc32cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cờ xác định đã thiết lập context chưa.  <br /></td></tr>
<tr class="memitem:a9ad273745ec0d4bf2008553fa75f16b8" id="r_a9ad273745ec0d4bf2008553fa75f16b8"><td class="memItemLeft" align="right" valign="top">CString&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9ad273745ec0d4bf2008553fa75f16b8">m_readerName</a></td></tr>
<tr class="memdesc:a9ad273745ec0d4bf2008553fa75f16b8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tên của reader đang sử dụng.  <br /></td></tr>
<tr class="memitem:a91d5ba4e58f66ddab4545400787d504e" id="r_a91d5ba4e58f66ddab4545400787d504e"><td class="memItemLeft" align="right" valign="top">CStringArray&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a91d5ba4e58f66ddab4545400787d504e">m_readerList</a></td></tr>
<tr class="memdesc:a91d5ba4e58f66ddab4545400787d504e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Danh sách các reader có sẵn.  <br /></td></tr>
<tr class="memitem:a163ab33be96cee3f9321e89349f7d099" id="r_a163ab33be96cee3f9321e89349f7d099"><td class="memItemLeft" align="right" valign="top">CStringArray&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a163ab33be96cee3f9321e89349f7d099">m_blockList</a></td></tr>
<tr class="memdesc:a163ab33be96cee3f9321e89349f7d099"><td class="mdescLeft">&#160;</td><td class="mdescRight">Danh sách các block đã đọc.  <br /></td></tr>
<tr class="memitem:af0a1e6eeaab2eb288cccc6d10e11b88a" id="r_af0a1e6eeaab2eb288cccc6d10e11b88a"><td class="memItemLeft" align="right" valign="top">CString&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af0a1e6eeaab2eb288cccc6d10e11b88a">m_statusDesc</a></td></tr>
<tr class="memdesc:af0a1e6eeaab2eb288cccc6d10e11b88a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mô tả trạng thái.  <br /></td></tr>
<tr class="memitem:a8ca91d0b005957e955195d31c1c9abba" id="r_a8ca91d0b005957e955195d31c1c9abba"><td class="memItemLeft" align="right" valign="top">CString&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8ca91d0b005957e955195d31c1c9abba">m_cardStatus</a></td></tr>
<tr class="memdesc:a8ca91d0b005957e955195d31c1c9abba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Trạng thái thẻ  <br /></td></tr>
<tr class="memitem:ae068c62c0c775923ce9cabec93a37e5b" id="r_ae068c62c0c775923ce9cabec93a37e5b"><td class="memItemLeft" align="right" valign="top">CString&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae068c62c0c775923ce9cabec93a37e5b">m_atrLabel</a></td></tr>
<tr class="memdesc:ae068c62c0c775923ce9cabec93a37e5b"><td class="mdescLeft">&#160;</td><td class="mdescRight">ATR (Answer To Reset) label.  <br /></td></tr>
<tr class="memitem:a17e74a7d6a01f1c80f26cb8bd18a349a" id="r_a17e74a7d6a01f1c80f26cb8bd18a349a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a17e74a7d6a01f1c80f26cb8bd18a349a">m_releaseFlag</a></td></tr>
<tr class="memdesc:a17e74a7d6a01f1c80f26cb8bd18a349a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flag để release context.  <br /></td></tr>
<tr class="memitem:a6e397e77baa5de46701217b79f694f54" id="r_a6e397e77baa5de46701217b79f694f54"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6e397e77baa5de46701217b79f694f54">m_cardType</a></td></tr>
<tr class="memdesc:a6e397e77baa5de46701217b79f694f54"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loại thẻ (lưu trữ loại thẻ đã xác định).  <br /></td></tr>
<tr class="memitem:ac686a35a9a27e0a03b57c77db891edd7" id="r_ac686a35a9a27e0a03b57c77db891edd7"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac686a35a9a27e0a03b57c77db891edd7">m_timer</a></td></tr>
<tr class="memdesc:ac686a35a9a27e0a03b57c77db891edd7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cờ bật/tắt timer.  <br /></td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Mô tả chi tiết</h2>
<div class="textblock"><p>Class quản lý đọc thẻ <a class="el" href="class_a_t_m.html">ATM</a> sử dụng PC/SC (Smart Card) API. </p>
<p>Class này cung cấp các chức năng để:</p><ul>
<li>Kết nối và quản lý smart card reader</li>
<li>Đọc và ghi dữ liệu từ thẻ <a class="el" href="class_a_t_m.html">ATM</a></li>
<li>Xác thực thẻ và load key</li>
<li>Quản lý trạng thái thẻ và reader</li>
<li>Hỗ trợ timer để theo dõi trạng thái thẻ </li>
</ul>
</div><a name="doc-constructors" id="doc-constructors"></a><h2 id="header-doc-constructors" class="groupheader">Thông tin về Constructor và Destructor</h2>
<a id="aa9f42e4efbc18eecf5c1d5ecbd6f340b" name="aa9f42e4efbc18eecf5c1d5ecbd6f340b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa9f42e4efbc18eecf5c1d5ecbd6f340b">&#9670;&#160;</a></span>ATMCardReader()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ATMCardReader::ATMCardReader </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_a_t_m.html">ATM</a> *</td>          <td class="paramname"><span class="paramname"><em>atm</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor của <a class="el" href="class_a_t_m_card_reader.html" title="Class quản lý đọc thẻ ATM sử dụng PC/SC (Smart Card) API.">ATMCardReader</a>. </p>
<dl class="params"><dt>Các tham số</dt><dd>
  <table class="params">
    <tr><td class="paramname">atm</td><td>Con trỏ đến đối tượng <a class="el" href="class_a_t_m.html">ATM</a>, không được NULL</td></tr>
  </table>
  </dd>
</dl>
<p>Khởi tạo <a class="el" href="class_a_t_m_card_reader.html" title="Class quản lý đọc thẻ ATM sử dụng PC/SC (Smart Card) API.">ATMCardReader</a> với đối tượng <a class="el" href="class_a_t_m.html">ATM</a> được chỉ định. Các thành viên được khởi tạo với giá trị mặc định. </p>

</div>
</div>
<a id="aef7bb9e4d98202b0a249ad1b3bad2046" name="aef7bb9e4d98202b0a249ad1b3bad2046"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef7bb9e4d98202b0a249ad1b3bad2046">&#9670;&#160;</a></span>~ATMCardReader()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ATMCardReader::~ATMCardReader </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destructor của <a class="el" href="class_a_t_m_card_reader.html" title="Class quản lý đọc thẻ ATM sử dụng PC/SC (Smart Card) API.">ATMCardReader</a>. </p>
<p>Giải phóng tất cả tài nguyên, ngắt kết nối thẻ và release context nếu cần. </p>

</div>
</div>
<a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Thông tin về hàm thành viên</h2>
<a id="a6fabc93dd200f66862ff4dc76f91c43a" name="a6fabc93dd200f66862ff4dc76f91c43a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6fabc93dd200f66862ff4dc76f91c43a">&#9670;&#160;</a></span>ATR_UID()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ATMCardReader::ATR_UID </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>card_type</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Xử lý ATR và UID theo loại thẻ </p>

</div>
</div>
<a id="afd01a63f523e86322934e481a96b4ab1" name="afd01a63f523e86322934e481a96b4ab1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd01a63f523e86322934e481a96b4ab1">&#9670;&#160;</a></span>Authenticate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LONG ATMCardReader::Authenticate </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Xác thực với thẻ sử dụng key đã load. </p>
<dl class="section return"><dt>Giá trị trả về</dt><dd>SCARD_S_SUCCESS nếu xác thực thành công, mã lỗi SCARD nếu thất bại</dd></dl>
<p>Thực hiện xác thực với thẻ sử dụng key đã được load bằng <a class="el" href="#af345ee341ae0bd68522f31d7213380e2" title="Load key vào thẻ để xác thực.">LoadKey()</a>. Sau khi xác thực thành công, có thể đọc/ghi dữ liệu từ các block được bảo vệ. </p>

</div>
</div>
<a id="aa23b82ef9d441c8925c2573c6e331739" name="aa23b82ef9d441c8925c2573c6e331739"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa23b82ef9d441c8925c2573c6e331739">&#9670;&#160;</a></span>card_Type_Identification()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ATMCardReader::card_Type_Identification </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Xác định loại thẻ </p>

</div>
</div>
<a id="a93069a4c3bb241e3ebab61e1d9e0a956" name="a93069a4c3bb241e3ebab61e1d9e0a956"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a93069a4c3bb241e3ebab61e1d9e0a956">&#9670;&#160;</a></span>Connect()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool ATMCardReader::Connect </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Kết nối với thẻ trong reader. </p>
<dl class="section return"><dt>Giá trị trả về</dt><dd>true nếu kết nối thành công, false nếu thất bại</dd></dl>
<p>Kết nối với thẻ đang được đặt trong reader đã được chỉ định. Sau khi kết nối thành công, có thể đọc/ghi dữ liệu từ thẻ. Cần gọi <a class="el" href="#a8405099f505cc2e6e7aaa7647911b533" title="Đăng ký smart card context với hệ thống.">RegisterContext()</a> và <a class="el" href="#aceb07b3ee9b003fcef1f03a5f1adc0c5" title="Thiết lập tên reader sẽ sử dụng.">SetReaderName()</a> trước. </p>

</div>
</div>
<a id="a86201d7ac61bdfad56a43c514d205f63" name="a86201d7ac61bdfad56a43c514d205f63"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a86201d7ac61bdfad56a43c514d205f63">&#9670;&#160;</a></span>Disconnect()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ATMCardReader::Disconnect </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Ngắt kết nối với thẻ </p>
<p>Ngắt kết nối với thẻ hiện tại. Sau khi ngắt kết nối, không thể đọc/ghi dữ liệu nữa. </p>

</div>
</div>
<a id="aedc787fc6fc482c328004cd6272ae0fd" name="aedc787fc6fc482c328004cd6272ae0fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aedc787fc6fc482c328004cd6272ae0fd">&#9670;&#160;</a></span>GetCardId()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">CString ATMCardReader::GetCardId </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Lấy ID của thẻ hiện tại. </p>
<dl class="section return"><dt>Giá trị trả về</dt><dd>ID của thẻ dạng chuỗi hex</dd></dl>
<p>Trả về ID (UID) của thẻ đang được kết nối. ID được đọc từ thẻ khi kết nối. </p>

</div>
</div>
<a id="afe99675c9842e93f14c1e8620091daba" name="afe99675c9842e93f14c1e8620091daba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe99675c9842e93f14c1e8620091daba">&#9670;&#160;</a></span>GetListReaders()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ATMCardReader::GetListReaders </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Lấy danh sách các reader có sẵn trong hệ thống. </p>
<p>Quét hệ thống để tìm tất cả các smart card reader có sẵn và lưu vào m_readerList. Cần gọi <a class="el" href="#a8405099f505cc2e6e7aaa7647911b533" title="Đăng ký smart card context với hệ thống.">RegisterContext()</a> trước khi gọi phương thức này. </p>

</div>
</div>
<a id="afffd465e19b659ae33f88ce4fd639161" name="afffd465e19b659ae33f88ce4fd639161"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afffd465e19b659ae33f88ce4fd639161">&#9670;&#160;</a></span>GetReaderAt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CString ATMCardReader::GetReaderAt </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>nIndex</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Lấy tên reader tại index. </p>
<dl class="params"><dt>Các tham số</dt><dd>
  <table class="params">
    <tr><td class="paramname">nIndex</td><td>Index của reader trong danh sách (0-based) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Giá trị trả về</dt><dd>Tên của reader tại index, chuỗi rỗng nếu index không hợp lệ</dd></dl>
<p>Trả về tên của reader tại vị trí index trong danh sách. </p>

</div>
</div>
<a id="a794d4bfac6a9dc66f4bb17406f5371b1" name="a794d4bfac6a9dc66f4bb17406f5371b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a794d4bfac6a9dc66f4bb17406f5371b1">&#9670;&#160;</a></span>GetReaderCount()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ATMCardReader::GetReaderCount </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Lấy số lượng reader có sẵn. </p>
<dl class="section return"><dt>Giá trị trả về</dt><dd>Số lượng reader trong danh sách</dd></dl>
<p>Trả về số lượng reader đã được tìm thấy sau khi gọi <a class="el" href="#afe99675c9842e93f14c1e8620091daba" title="Lấy danh sách các reader có sẵn trong hệ thống.">GetListReaders()</a>. </p>

</div>
</div>
<a id="a15a0efae396c8454de20683b286aa71f" name="a15a0efae396c8454de20683b286aa71f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a15a0efae396c8454de20683b286aa71f">&#9670;&#160;</a></span>GetState()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UINT ATMCardReader::GetState </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Lấy trạng thái hiện tại của thẻ </p>
<dl class="section return"><dt>Giá trị trả về</dt><dd>Mã trạng thái của thẻ (SCARD_ABSENT, SCARD_PRESENT, SCARD_SWALLOWED, etc.)</dd></dl>
<p>Kiểm tra và trả về trạng thái hiện tại của thẻ trong reader. </p>

</div>
</div>
<a id="a79d62a00dfa4da5416810ac381cb9020" name="a79d62a00dfa4da5416810ac381cb9020"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a79d62a00dfa4da5416810ac381cb9020">&#9670;&#160;</a></span>GetStatus()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UINT ATMCardReader::GetStatus </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Lấy trạng thái chi tiết của thẻ và reader. </p>
<dl class="section return"><dt>Giá trị trả về</dt><dd>Mã trạng thái chi tiết</dd></dl>
<p>Lấy thông tin chi tiết về trạng thái của thẻ và reader, bao gồm ATR. </p>

</div>
</div>
<a id="a8f1c96ef743241d4adc4b645f4ef1cce" name="a8f1c96ef743241d4adc4b645f4ef1cce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f1c96ef743241d4adc4b645f4ef1cce">&#9670;&#160;</a></span>GetStatusChange()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UINT ATMCardReader::GetStatusChange </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Kiểm tra sự thay đổi trạng thái của thẻ </p>
<dl class="section return"><dt>Giá trị trả về</dt><dd>Mã trạng thái mới nếu có thay đổi</dd></dl>
<p>Kiểm tra xem trạng thái thẻ có thay đổi không (ví dụ: thẻ được đưa vào hoặc lấy ra). </p>

</div>
</div>
<a id="a2ce4dc9d23027df7589cb4216940a7b3" name="a2ce4dc9d23027df7589cb4216940a7b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ce4dc9d23027df7589cb4216940a7b3">&#9670;&#160;</a></span>IsConnected()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool ATMCardReader::IsConnected </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Kiểm tra có đang kết nối với thẻ không. </p>
<dl class="section return"><dt>Giá trị trả về</dt><dd>true nếu đang kết nối, false nếu không</dd></dl>
<p>Trả về trạng thái kết nối hiện tại với thẻ. </p>

</div>
</div>
<a id="a6e0e2e822a3add8ffd02dc8f061d65f1" name="a6e0e2e822a3add8ffd02dc8f061d65f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e0e2e822a3add8ffd02dc8f061d65f1">&#9670;&#160;</a></span>IsEnableTimer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool ATMCardReader::IsEnableTimer </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Kiểm tra timer có được bật không. </p>
<dl class="section return"><dt>Giá trị trả về</dt><dd>true nếu timer đang bật, false nếu đang tắt</dd></dl>
<p>Trả về trạng thái của timer dùng để theo dõi trạng thái thẻ. </p>

</div>
</div>
<a id="af345ee341ae0bd68522f31d7213380e2" name="af345ee341ae0bd68522f31d7213380e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af345ee341ae0bd68522f31d7213380e2">&#9670;&#160;</a></span>LoadKey()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LONG ATMCardReader::LoadKey </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Load key vào thẻ để xác thực. </p>
<dl class="section return"><dt>Giá trị trả về</dt><dd>SCARD_S_SUCCESS nếu thành công, mã lỗi SCARD nếu thất bại</dd></dl>
<p>Load key vào thẻ để chuẩn bị cho quá trình xác thực (authentication). Cần kết nối với thẻ trước khi gọi phương thức này. </p>

</div>
</div>
<a id="adae9036153909edf74958328a59d15a9" name="adae9036153909edf74958328a59d15a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adae9036153909edf74958328a59d15a9">&#9670;&#160;</a></span>OnTimer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ATMCardReader::OnTimer </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Xử lý sự kiện timer. </p>
<p>Được gọi định kỳ bởi timer để kiểm tra trạng thái thẻ và cập nhật UI nếu cần. Có thể kiểm tra xem thẻ có còn trong reader không và tự động ngắt kết nối nếu thẻ bị lấy ra. </p>

</div>
</div>
<a id="ab7d17e3f75d3993fc687fe03426cf506" name="ab7d17e3f75d3993fc687fe03426cf506"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab7d17e3f75d3993fc687fe03426cf506">&#9670;&#160;</a></span>ReadBlock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CString ATMCardReader::ReadBlock </td>
          <td>(</td>
          <td class="paramtype">CString</td>          <td class="paramname"><span class="paramname"><em>blockId</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Đọc dữ liệu từ một block cụ thể trên thẻ </p>
<dl class="params"><dt>Các tham số</dt><dd>
  <table class="params">
    <tr><td class="paramname">blockId</td><td>ID của block cần đọc (dạng chuỗi hex, ví dụ: "04") </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Giá trị trả về</dt><dd>Dữ liệu đọc được từ block dạng chuỗi hex, chuỗi rỗng nếu thất bại</dd></dl>
<p>Đọc dữ liệu từ block có ID được chỉ định trên thẻ. Block phải đã được xác thực nếu có bảo vệ. Dữ liệu trả về dạng hex string. </p>

</div>
</div>
<a id="a5e9a8ecff373bbb7745e0bc7a16bb745" name="a5e9a8ecff373bbb7745e0bc7a16bb745"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e9a8ecff373bbb7745e0bc7a16bb745">&#9670;&#160;</a></span>ReadBlockData()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CString ATMCardReader::ReadBlockData </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Đọc dữ liệu từ block hiện tại. </p>
<dl class="section return"><dt>Giá trị trả về</dt><dd>Dữ liệu đọc được từ block dạng chuỗi hex, chuỗi rỗng nếu thất bại</dd></dl>
<p>Đọc dữ liệu từ block đang được chỉ định (có thể được set trước đó). Tương tự <a class="el" href="#ab7d17e3f75d3993fc687fe03426cf506" title="Đọc dữ liệu từ một block cụ thể trên thẻ">ReadBlock()</a> nhưng không cần chỉ định blockId. </p>

</div>
</div>
<a id="a8405099f505cc2e6e7aaa7647911b533" name="a8405099f505cc2e6e7aaa7647911b533"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8405099f505cc2e6e7aaa7647911b533">&#9670;&#160;</a></span>RegisterContext()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LONG ATMCardReader::RegisterContext </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Đăng ký smart card context với hệ thống. </p>
<dl class="section return"><dt>Giá trị trả về</dt><dd>SCARD_S_SUCCESS nếu thành công, mã lỗi SCARD nếu thất bại</dd></dl>
<p>Thiết lập smart card context để có thể sử dụng PC/SC API. Phải gọi phương thức này trước khi sử dụng các chức năng khác. </p>

</div>
</div>
<a id="ae9b5d185735f73670d24ebe892d1d07b" name="ae9b5d185735f73670d24ebe892d1d07b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae9b5d185735f73670d24ebe892d1d07b">&#9670;&#160;</a></span>ReleaseContext()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LONG ATMCardReader::ReleaseContext </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Giải phóng smart card context. </p>
<dl class="section return"><dt>Giá trị trả về</dt><dd>SCARD_S_SUCCESS nếu thành công, mã lỗi SCARD nếu thất bại</dd></dl>
<p>Release smart card context đã được đăng ký. Nên gọi khi không còn sử dụng reader nữa. </p>

</div>
</div>
<a id="aceb07b3ee9b003fcef1f03a5f1adc0c5" name="aceb07b3ee9b003fcef1f03a5f1adc0c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aceb07b3ee9b003fcef1f03a5f1adc0c5">&#9670;&#160;</a></span>SetReaderName()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ATMCardReader::SetReaderName </td>
          <td>(</td>
          <td class="paramtype">CString</td>          <td class="paramname"><span class="paramname"><em>szReaderName</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Thiết lập tên reader sẽ sử dụng. </p>
<dl class="params"><dt>Các tham số</dt><dd>
  <table class="params">
    <tr><td class="paramname">szReaderName</td><td>Tên của reader (ví dụ: "ACS ACR122U PICC Interface 0")</td></tr>
  </table>
  </dd>
</dl>
<p>Thiết lập reader name để sử dụng khi kết nối. Reader name phải có trong danh sách reader có sẵn. </p>

</div>
</div>
<a id="ab5adb95957858af4952664ef161b75f4" name="ab5adb95957858af4952664ef161b75f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5adb95957858af4952664ef161b75f4">&#9670;&#160;</a></span>Transmit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LONG ATMCardReader::Transmit </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gửi lệnh APDU đến thẻ </p>
<dl class="section return"><dt>Giá trị trả về</dt><dd>SCARD_S_SUCCESS nếu thành công, mã lỗi SCARD nếu thất bại</dd></dl>
<p>Gửi lệnh APDU (Application Protocol Data Unit) đến thẻ và nhận phản hồi. Cần kết nối với thẻ trước khi gọi phương thức này. </p>

</div>
</div>
<a id="a47cac40e70ed531153f584195e9456dc" name="a47cac40e70ed531153f584195e9456dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a47cac40e70ed531153f584195e9456dc">&#9670;&#160;</a></span>WriteBlock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool ATMCardReader::WriteBlock </td>
          <td>(</td>
          <td class="paramtype">CString</td>          <td class="paramname"><span class="paramname"><em>blockId</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CString</td>          <td class="paramname"><span class="paramname"><em>data</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Ghi dữ liệu vào một block cụ thể trên thẻ </p>
<dl class="params"><dt>Các tham số</dt><dd>
  <table class="params">
    <tr><td class="paramname">blockId</td><td>ID của block cần ghi (dạng chuỗi hex, ví dụ: "04") </td></tr>
    <tr><td class="paramname">data</td><td>Dữ liệu cần ghi dạng chuỗi hex (16 bytes = 32 ký tự hex) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Giá trị trả về</dt><dd>true nếu ghi thành công, false nếu thất bại</dd></dl>
<p>Ghi dữ liệu vào block có ID được chỉ định trên thẻ. Block phải đã được xác thực nếu có bảo vệ. Dữ liệu phải đúng định dạng hex và đủ 16 bytes. </p>

</div>
</div>
<a name="doc-variable-members" id="doc-variable-members"></a><h2 id="header-doc-variable-members" class="groupheader">Thông tin về Member Data</h2>
<a id="ab9b5756e2534aec68d16677f946aa85d" name="ab9b5756e2534aec68d16677f946aa85d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab9b5756e2534aec68d16677f946aa85d">&#9670;&#160;</a></span>m_atm</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_a_t_m.html">ATM</a>* ATMCardReader::m_atm</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Con trỏ đến đối tượng <a class="el" href="class_a_t_m.html">ATM</a>. </p>

</div>
</div>
<a id="ae068c62c0c775923ce9cabec93a37e5b" name="ae068c62c0c775923ce9cabec93a37e5b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae068c62c0c775923ce9cabec93a37e5b">&#9670;&#160;</a></span>m_atrLabel</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">CString ATMCardReader::m_atrLabel</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>ATR (Answer To Reset) label. </p>

</div>
</div>
<a id="a163ab33be96cee3f9321e89349f7d099" name="a163ab33be96cee3f9321e89349f7d099"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a163ab33be96cee3f9321e89349f7d099">&#9670;&#160;</a></span>m_blockList</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">CStringArray ATMCardReader::m_blockList</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Danh sách các block đã đọc. </p>

</div>
</div>
<a id="adc89f73ca35d44c136948bf239f251f9" name="adc89f73ca35d44c136948bf239f251f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc89f73ca35d44c136948bf239f251f9">&#9670;&#160;</a></span>m_cardId</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">CString ATMCardReader::m_cardId</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>ID của thẻ </p>

</div>
</div>
<a id="a8ca91d0b005957e955195d31c1c9abba" name="a8ca91d0b005957e955195d31c1c9abba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ca91d0b005957e955195d31c1c9abba">&#9670;&#160;</a></span>m_cardStatus</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">CString ATMCardReader::m_cardStatus</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Trạng thái thẻ </p>

</div>
</div>
<a id="a6e397e77baa5de46701217b79f694f54" name="a6e397e77baa5de46701217b79f694f54"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e397e77baa5de46701217b79f694f54">&#9670;&#160;</a></span>m_cardType</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int ATMCardReader::m_cardType</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Loại thẻ (lưu trữ loại thẻ đã xác định). </p>

</div>
</div>
<a id="a1a5bb28829a57da20fce011ba6d8cee7" name="a1a5bb28829a57da20fce011ba6d8cee7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a5bb28829a57da20fce011ba6d8cee7">&#9670;&#160;</a></span>m_connected</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool ATMCardReader::m_connected</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Cờ xác định đã kết nối với thẻ chưa. </p>

</div>
</div>
<a id="a82dbe6ec6a35a6458e8821b41ccc32cc" name="a82dbe6ec6a35a6458e8821b41ccc32cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a82dbe6ec6a35a6458e8821b41ccc32cc">&#9670;&#160;</a></span>m_establishContext</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool ATMCardReader::m_establishContext</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Cờ xác định đã thiết lập context chưa. </p>

</div>
</div>
<a id="a350cdea616a842690a6f15a8d5c07ec3" name="a350cdea616a842690a6f15a8d5c07ec3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a350cdea616a842690a6f15a8d5c07ec3">&#9670;&#160;</a></span>m_handle</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">DWORD ATMCardReader::m_handle</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handle của card. </p>

</div>
</div>
<a id="a3f75df54963a8dd7b4437f9830392d91" name="a3f75df54963a8dd7b4437f9830392d91"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f75df54963a8dd7b4437f9830392d91">&#9670;&#160;</a></span>m_hContext</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">DWORD ATMCardReader::m_hContext</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handle của smart card context. </p>

</div>
</div>
<a id="a91d5ba4e58f66ddab4545400787d504e" name="a91d5ba4e58f66ddab4545400787d504e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a91d5ba4e58f66ddab4545400787d504e">&#9670;&#160;</a></span>m_readerList</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">CStringArray ATMCardReader::m_readerList</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Danh sách các reader có sẵn. </p>

</div>
</div>
<a id="a9ad273745ec0d4bf2008553fa75f16b8" name="a9ad273745ec0d4bf2008553fa75f16b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ad273745ec0d4bf2008553fa75f16b8">&#9670;&#160;</a></span>m_readerName</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">CString ATMCardReader::m_readerName</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Tên của reader đang sử dụng. </p>

</div>
</div>
<a id="a17e74a7d6a01f1c80f26cb8bd18a349a" name="a17e74a7d6a01f1c80f26cb8bd18a349a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a17e74a7d6a01f1c80f26cb8bd18a349a">&#9670;&#160;</a></span>m_releaseFlag</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int ATMCardReader::m_releaseFlag</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Flag để release context. </p>

</div>
</div>
<a id="af0a1e6eeaab2eb288cccc6d10e11b88a" name="af0a1e6eeaab2eb288cccc6d10e11b88a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af0a1e6eeaab2eb288cccc6d10e11b88a">&#9670;&#160;</a></span>m_statusDesc</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">CString ATMCardReader::m_statusDesc</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Mô tả trạng thái. </p>

</div>
</div>
<a id="ac686a35a9a27e0a03b57c77db891edd7" name="ac686a35a9a27e0a03b57c77db891edd7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac686a35a9a27e0a03b57c77db891edd7">&#9670;&#160;</a></span>m_timer</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool ATMCardReader::m_timer</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Cờ bật/tắt timer. </p>

</div>
</div>
<a id="a0651025b9e11ad6e1e2adbd67a763f8a" name="a0651025b9e11ad6e1e2adbd67a763f8a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0651025b9e11ad6e1e2adbd67a763f8a">&#9670;&#160;</a></span>ReaderState1</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SCARD_READERSTATE ATMCardReader::ReaderState1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Trạng thái reader. </p>

</div>
</div>
<hr/>Thông tin cho class được biên soạn từ các file sau đây:<ul>
<li>Include/HMSCore/<a class="el" href="_a_t_m_card_reader_8h_source.html">ATMCardReader.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="class_a_t_m_card_reader.html">ATMCardReader</a></li>
    <li class="footer">Được biên soạn bởi <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.15.0 </li>
  </ul>
</div>
</body>
</html>
