#include "TMPatientHandoverDialog2.h"
#include "..\MainFrm.h"
static long _Oncontrol_2LoadDataFnc(CWnd *pWnd){
	return ((CTMPatientHandoverDialog2*)pWnd)->Oncontrol_2LoadData();
} 
static void _Oncontrol_2DblClickFnc(CWnd *pWnd){
	((CTMPatientHandoverDialog2*)pWnd)->Oncontrol_2DblClick();
} 
static void _Oncontrol_2SelectChangeFnc(CWnd *pWnd, int nOldItem, int nNewItem){
	((CTMPatientHandoverDialog2*)pWnd)->Oncontrol_2SelectChange(nOldItem, nNewItem);
} 
static int _Oncontrol_2DeleteItemFnc(CWnd *pWnd){
	 return ((CTMPatientHandoverDialog2*)pWnd)->Oncontrol_2DeleteItem();
} 
static long _Oncontrol_3LoadDataFnc(CWnd *pWnd){
	return ((CTMPatientHandoverDialog2*)pWnd)->Oncontrol_3LoadData();
} 
static void _Oncontrol_3DblClickFnc(CWnd *pWnd){
	((CTMPatientHandoverDialog2*)pWnd)->Oncontrol_3DblClick();
} 
static void _Oncontrol_3SelectChangeFnc(CWnd *pWnd, int nOldItem, int nNewItem){
	((CTMPatientHandoverDialog2*)pWnd)->Oncontrol_3SelectChange(nOldItem, nNewItem);
} 
static int _Oncontrol_3DeleteItemFnc(CWnd *pWnd){
	 return ((CTMPatientHandoverDialog2*)pWnd)->Oncontrol_3DeleteItem();
} 
/*static void _Oncontrol_5ChangeFnc(CWnd *pWnd){
	((CTMPatientHandoverDialog2 *)pWnd)->Oncontrol_5Change();
} */
/*static void _Oncontrol_5SetfocusFnc(CWnd *pWnd){
	((CTMPatientHandoverDialog2 *)pWnd)->Oncontrol_5Setfocus();} */ 
/*static void _Oncontrol_5KillfocusFnc(CWnd *pWnd){
	((CTMPatientHandoverDialog2 *)pWnd)->Oncontrol_5Killfocus();
} */
static int _Oncontrol_5CheckValueFnc(CWnd *pWnd){
	return ((CTMPatientHandoverDialog2 *)pWnd)->Oncontrol_5CheckValue();
} 
/*static void _Oncontrol_7ChangeFnc(CWnd *pWnd){
	((CTMPatientHandoverDialog2 *)pWnd)->Oncontrol_7Change();
} */
/*static void _Oncontrol_7SetfocusFnc(CWnd *pWnd){
	((CTMPatientHandoverDialog2 *)pWnd)->Oncontrol_7Setfocus();} */ 
/*static void _Oncontrol_7KillfocusFnc(CWnd *pWnd){
	((CTMPatientHandoverDialog2 *)pWnd)->Oncontrol_7Killfocus();
} */
static int _Oncontrol_7CheckValueFnc(CWnd *pWnd){
	return ((CTMPatientHandoverDialog2 *)pWnd)->Oncontrol_7CheckValue();
} 
/*static void _Oncontrol_9ChangeFnc(CWnd *pWnd){
	((CTMPatientHandoverDialog2 *)pWnd)->Oncontrol_9Change();
} */
/*static void _Oncontrol_9SetfocusFnc(CWnd *pWnd){
	((CTMPatientHandoverDialog2 *)pWnd)->Oncontrol_9Setfocus();} */ 
/*static void _Oncontrol_9KillfocusFnc(CWnd *pWnd){
	((CTMPatientHandoverDialog2 *)pWnd)->Oncontrol_9Killfocus();
} */
static int _Oncontrol_9CheckValueFnc(CWnd *pWnd){
	return ((CTMPatientHandoverDialog2 *)pWnd)->Oncontrol_9CheckValue();
} 
/*static void _Oncontrol_11ChangeFnc(CWnd *pWnd){
	((CTMPatientHandoverDialog2 *)pWnd)->Oncontrol_11Change();
} */
/*static void _Oncontrol_11SetfocusFnc(CWnd *pWnd){
	((CTMPatientHandoverDialog2 *)pWnd)->Oncontrol_11Setfocus();} */ 
/*static void _Oncontrol_11KillfocusFnc(CWnd *pWnd){
	((CTMPatientHandoverDialog2 *)pWnd)->Oncontrol_11Killfocus();
} */
static int _Oncontrol_11CheckValueFnc(CWnd *pWnd){
	return ((CTMPatientHandoverDialog2 *)pWnd)->Oncontrol_11CheckValue();
} 
static void _Oncontrol_12SelectFnc(CWnd *pWnd){
	CTMPatientHandoverDialog2 *pVw = (CTMPatientHandoverDialog2 *)pWnd;
	pVw->Oncontrol_12Select();
} 
static void _Oncontrol_13SelectFnc(CWnd *pWnd){
	CTMPatientHandoverDialog2 *pVw = (CTMPatientHandoverDialog2 *)pWnd;
	pVw->Oncontrol_13Select();
} 
static void _Oncontrol_14SelectFnc(CWnd *pWnd){
	CTMPatientHandoverDialog2 *pVw = (CTMPatientHandoverDialog2 *)pWnd;
	pVw->Oncontrol_14Select();
} 
static void _Oncontrol_15SelectFnc(CWnd *pWnd){
	CTMPatientHandoverDialog2 *pVw = (CTMPatientHandoverDialog2 *)pWnd;
	pVw->Oncontrol_15Select();
} 
/*static void _Oncontrol_17ChangeFnc(CWnd *pWnd){
	((CTMPatientHandoverDialog2 *)pWnd)->Oncontrol_17Change();
} */
/*static void _Oncontrol_17SetfocusFnc(CWnd *pWnd){
	((CTMPatientHandoverDialog2 *)pWnd)->Oncontrol_17Setfocus();} */ 
/*static void _Oncontrol_17KillfocusFnc(CWnd *pWnd){
	((CTMPatientHandoverDialog2 *)pWnd)->Oncontrol_17Killfocus();
} */
static int _Oncontrol_17CheckValueFnc(CWnd *pWnd){
	return ((CTMPatientHandoverDialog2 *)pWnd)->Oncontrol_17CheckValue();
} 
static int _OnAddTMPatientHandoverDialog2Fnc(CWnd *pWnd){
	 return ((CTMPatientHandoverDialog2*)pWnd)->OnAddTMPatientHandoverDialog2();
} 
static int _OnEditTMPatientHandoverDialog2Fnc(CWnd *pWnd){
	 return ((CTMPatientHandoverDialog2*)pWnd)->OnEditTMPatientHandoverDialog2();
} 
static int _OnDeleteTMPatientHandoverDialog2Fnc(CWnd *pWnd){
	 return ((CTMPatientHandoverDialog2*)pWnd)->OnDeleteTMPatientHandoverDialog2();
} 
static int _OnSaveTMPatientHandoverDialog2Fnc(CWnd *pWnd){
	 return ((CTMPatientHandoverDialog2*)pWnd)->OnSaveTMPatientHandoverDialog2();
} 
static int _OnCancelTMPatientHandoverDialog2Fnc(CWnd *pWnd){
	 return ((CTMPatientHandoverDialog2*)pWnd)->OnCancelTMPatientHandoverDialog2();
} 
CTMPatientHandoverDialog2::CTMPatientHandoverDialog2(CWnd *pParent):
	CGuiDialog(pParent){

	m_nDlgWidth = 1029;
	m_nDlgHeight = 773;
	SetDefaultValues();
}
CTMPatientHandoverDialog2::~CTMPatientHandoverDialog2(){
}
void CTMPatientHandoverDialog2::OnCreateComponents(){
	m_wndcontrol_0.Create(this, _T("Nhom d/s phieu"), 5, 5, 180, 570);
	m_wndcontrol_1.Create(this, _T("Nhom d/s bn"), 180, 5, 940, 570);
	m_wndcontrol_2.Create(this,10, 60, 175, 570); 
	m_wndcontrol_3.Create(this,185, 30, 935, 200); 
	m_wndLabel_4.Create(this, _T("Chan doan"), 185, 205, 265, 230);
	m_wndcontrol_5.Create(this,185, 235, 560, 385); 
	m_wndLabel_6.Create(this, _T("Dien bien"), 565, 205, 645, 230);
	m_wndcontrol_7.Create(this,565, 235, 940, 385); 
	m_wndLabel_8.Create(this, _T("KQXN"), 185, 390, 265, 415);
	m_wndcontrol_9.Create(this,185, 420, 560, 570); 
	m_wndLabel_10.Create(this, _T("Huong dt"), 565, 390, 645, 415);
	m_wndcontrol_11.Create(this,565, 420, 940, 570); 
	m_wndcontrol_12.Create(this, _T("Cap nhat"), 605, 575, 685, 600);
	m_wndcontrol_13.Create(this, _T("Luu"), 690, 575, 770, 600);
	m_wndcontrol_14.Create(this, _T("Huy"), 775, 575, 855, 600);
	m_wndcontrol_15.Create(this, _T("Dong"), 860, 575, 940, 600);
	m_wndLabel_16.Create(this, _T("Ngay tao"), 10, 30, 90, 55);
	m_wndcontrol_17.Create(this,95, 30, 175, 55); 

}
void CTMPatientHandoverDialog2::OnInitializeComponents(){
	CMainFrame *pMF = (CMainFrame*) AfxGetMainWnd();
	m_wndcontrol_5.SetLimitText(35);
	m_wndcontrol_5.SetCheckValue(true);
	m_wndcontrol_7.SetLimitText(35);
	m_wndcontrol_7.SetCheckValue(true);
	m_wndcontrol_9.SetLimitText(35);
	m_wndcontrol_9.SetCheckValue(true);
	m_wndcontrol_11.SetLimitText(35);
	m_wndcontrol_11.SetCheckValue(true);
	m_wndcontrol_17.SetMax(CDate(pMF->GetSysDate()));
	m_wndcontrol_17.SetCheckValue(true);





}
void CTMPatientHandoverDialog2::OnSetWindowEvents(){
	CMainFrame *pMF = (CMainFrame*) AfxGetMainWnd();
	m_wndcontrol_2.SetEvent(WE_SELCHANGE, _Oncontrol_2SelectChangeFnc);
	m_wndcontrol_2.SetEvent(WE_LOADDATA, _Oncontrol_2LoadDataFnc);
	m_wndcontrol_2.SetEvent(WE_DBLCLICK, _Oncontrol_2DblClickFnc);
	m_wndcontrol_2.AddEvent(1, _T("Delete"), _Oncontrol_2DeleteItemFnc, 0, VK_DELETE, 0);
	m_wndcontrol_3.SetEvent(WE_SELCHANGE, _Oncontrol_3SelectChangeFnc);
	m_wndcontrol_3.SetEvent(WE_LOADDATA, _Oncontrol_3LoadDataFnc);
	m_wndcontrol_3.SetEvent(WE_DBLCLICK, _Oncontrol_3DblClickFnc);
	m_wndcontrol_3.AddEvent(1, _T("Delete"), _Oncontrol_3DeleteItemFnc, 0, VK_DELETE, 0);
	//m_wndcontrol_5.SetEvent(WE_CHANGE, _Oncontrol_5ChangeFnc);
	//m_wndcontrol_5.SetEvent(WE_SETFOCUS, _Oncontrol_5SetfocusFnc);
	//m_wndcontrol_5.SetEvent(WE_KILLFOCUS, _Oncontrol_5KillfocusFnc);
	m_wndcontrol_5.SetEvent(WE_CHECKVALUE, _Oncontrol_5CheckValueFnc);
	//m_wndcontrol_7.SetEvent(WE_CHANGE, _Oncontrol_7ChangeFnc);
	//m_wndcontrol_7.SetEvent(WE_SETFOCUS, _Oncontrol_7SetfocusFnc);
	//m_wndcontrol_7.SetEvent(WE_KILLFOCUS, _Oncontrol_7KillfocusFnc);
	m_wndcontrol_7.SetEvent(WE_CHECKVALUE, _Oncontrol_7CheckValueFnc);
	//m_wndcontrol_9.SetEvent(WE_CHANGE, _Oncontrol_9ChangeFnc);
	//m_wndcontrol_9.SetEvent(WE_SETFOCUS, _Oncontrol_9SetfocusFnc);
	//m_wndcontrol_9.SetEvent(WE_KILLFOCUS, _Oncontrol_9KillfocusFnc);
	m_wndcontrol_9.SetEvent(WE_CHECKVALUE, _Oncontrol_9CheckValueFnc);
	//m_wndcontrol_11.SetEvent(WE_CHANGE, _Oncontrol_11ChangeFnc);
	//m_wndcontrol_11.SetEvent(WE_SETFOCUS, _Oncontrol_11SetfocusFnc);
	//m_wndcontrol_11.SetEvent(WE_KILLFOCUS, _Oncontrol_11KillfocusFnc);
	m_wndcontrol_11.SetEvent(WE_CHECKVALUE, _Oncontrol_11CheckValueFnc);
	m_wndcontrol_12.SetEvent(WE_CLICK, _Oncontrol_12SelectFnc);
	m_wndcontrol_13.SetEvent(WE_CLICK, _Oncontrol_13SelectFnc);
	m_wndcontrol_14.SetEvent(WE_CLICK, _Oncontrol_14SelectFnc);
	m_wndcontrol_15.SetEvent(WE_CLICK, _Oncontrol_15SelectFnc);
	//m_wndcontrol_17.SetEvent(WE_CHANGE, _Oncontrol_17ChangeFnc);
	//m_wndcontrol_17.SetEvent(WE_SETFOCUS, _Oncontrol_17SetfocusFnc);
	//m_wndcontrol_17.SetEvent(WE_KILLFOCUS, _Oncontrol_17KillfocusFnc);
	m_wndcontrol_17.SetEvent(WE_CHECKVALUE, _Oncontrol_17CheckValueFnc);
	SetMode(VM_NONE);

}
void CTMPatientHandoverDialog2::OnDoDataExchange(CDataExchange* pDX){
	DDX_Text(pDX, m_wndcontrol_5.GetDlgCtrlID(), m_szcontrol_5);
	DDX_Text(pDX, m_wndcontrol_7.GetDlgCtrlID(), m_szcontrol_7);
	DDX_Text(pDX, m_wndcontrol_9.GetDlgCtrlID(), m_szcontrol_9);
	DDX_Text(pDX, m_wndcontrol_11.GetDlgCtrlID(), m_szcontrol_11);
	DDX_TextEx(pDX, m_wndcontrol_17.GetDlgCtrlID(), m_szcontrol_17);

}
void CTMPatientHandoverDialog2::UpdateJson(BOOL bSave){
	if(bSave)
	{
			
	m_jData[_T("control_5")] =  m_szcontrol_5;
	m_jData[_T("control_7")] =  m_szcontrol_7;
	m_jData[_T("control_9")] =  m_szcontrol_9;
	m_jData[_T("control_11")] =  m_szcontrol_11;
	m_jData[_T("control_17")] =  m_szcontrol_17;
	}
	else
	{
			
	m_jData[_T("control_5")].GetValue(m_szcontrol_5);
	m_jData[_T("control_7")].GetValue(m_szcontrol_7);
	m_jData[_T("control_9")].GetValue(m_szcontrol_9);
	m_jData[_T("control_11")].GetValue(m_szcontrol_11);
	m_jData[_T("control_17")].GetValue(m_szcontrol_17);
	}

}
void CTMPatientHandoverDialog2::GetDataToScreen(){
	CMainFrame *pMF = (CMainFrame*) AfxGetMainWnd();
	CRecord rs(&pMF->m_db);
	CString szSQL;
	szSQL.Format(_T("SELECT * FROM "));
	rs.ExecSQL(szSQL);

}
void CTMPatientHandoverDialog2::GetScreenToData(){
	CMainFrame *pMF = (CMainFrame*) AfxGetMainWnd();

}
void CTMPatientHandoverDialog2::SetDefaultValues(){

	m_szcontrol_5.Empty();
	m_szcontrol_7.Empty();
	m_szcontrol_9.Empty();
	m_szcontrol_11.Empty();
	m_szcontrol_17.Empty();

}
int CTMPatientHandoverDialog2::SetMode(int nMode){
 		int nOldMode = GetMode();
 		CGuiDialog::SetMode(nMode);
 		CMainFrame *pMF = (CMainFrame *) AfxGetMainWnd();
 		CString szSQL;
 		CRecord rs(&pMF->m_db);
  		switch(nMode){
 		case VM_ADD: 
 			EnableControls(TRUE);
 			EnableButtons(TRUE, 3, 4, -1);
 			SetDefaultValues();
 			break;
 		case VM_EDIT: 
 			EnableControls(TRUE);
 			EnableButtons(TRUE, 3, 4, -1);
 			break;
 		case VM_VIEW: 
 			EnableControls(FALSE);
 			EnableButtons(FALSE, 3, 4, -1);
 			break;
 		case VM_NONE: 
 			EnableControls(FALSE);
 			EnableButtons(TRUE, 0, 6, -1);
 			SetDefaultValues();
 			break;
 		};
 		UpdateData(FALSE);
 		return nOldMode;
}
void CTMPatientHandoverDialog2::Oncontrol_2DblClick(){
	
} 
void CTMPatientHandoverDialog2::Oncontrol_2SelectChange(int nOldItem, int nNewItem){
	CMainFrame *pMF = (CMainFrame*) AfxGetMainWnd();
	
} 
int CTMPatientHandoverDialog2::Oncontrol_2DeleteItem(){
	CMainFrame *pMF = (CMainFrame*) AfxGetMainWnd();
	 return 0;
} 
long CTMPatientHandoverDialog2::Oncontrol_2LoadData(){
/*
	CMainFrame *pMF = (CMainFrame*) AfxGetMainWnd();
	CRecord rs(&pMF->m_db);
	CString szSQL;
	m_wndcontrol_2.BeginLoad(); 
	int nCount = 0;
	nCount = rs.ExecSQL(szSQL);
	while(!rs.IsEOF()){ 
		m_wndcontrol_2.AddItems(
		rs.MoveNext();
	}
	m_wndcontrol_2.EndLoad(); 
	return nCount;
*/
	return 0;
}
void CTMPatientHandoverDialog2::Oncontrol_3DblClick(){
	
} 
void CTMPatientHandoverDialog2::Oncontrol_3SelectChange(int nOldItem, int nNewItem){
	CMainFrame *pMF = (CMainFrame*) AfxGetMainWnd();
	
} 
int CTMPatientHandoverDialog2::Oncontrol_3DeleteItem(){
	CMainFrame *pMF = (CMainFrame*) AfxGetMainWnd();
	 return 0;
} 
long CTMPatientHandoverDialog2::Oncontrol_3LoadData(){
/*
	CMainFrame *pMF = (CMainFrame*) AfxGetMainWnd();
	CRecord rs(&pMF->m_db);
	CString szSQL;
	m_wndcontrol_3.BeginLoad(); 
	int nCount = 0;
	nCount = rs.ExecSQL(szSQL);
	while(!rs.IsEOF()){ 
		m_wndcontrol_3.AddItems(
		rs.MoveNext();
	}
	m_wndcontrol_3.EndLoad(); 
	return nCount;
*/
	return 0;
}
/*void CTMPatientHandoverDialog2::Oncontrol_5Change(){
	
} */
/*void CTMPatientHandoverDialog2::Oncontrol_5Setfocus(){
	
} */
/*void CTMPatientHandoverDialog2::Oncontrol_5Killfocus(){
	
} */
int CTMPatientHandoverDialog2::Oncontrol_5CheckValue(){
	return 0;
} 
/*void CTMPatientHandoverDialog2::Oncontrol_7Change(){
	
} */
/*void CTMPatientHandoverDialog2::Oncontrol_7Setfocus(){
	
} */
/*void CTMPatientHandoverDialog2::Oncontrol_7Killfocus(){
	
} */
int CTMPatientHandoverDialog2::Oncontrol_7CheckValue(){
	return 0;
} 
/*void CTMPatientHandoverDialog2::Oncontrol_9Change(){
	
} */
/*void CTMPatientHandoverDialog2::Oncontrol_9Setfocus(){
	
} */
/*void CTMPatientHandoverDialog2::Oncontrol_9Killfocus(){
	
} */
int CTMPatientHandoverDialog2::Oncontrol_9CheckValue(){
	return 0;
} 
/*void CTMPatientHandoverDialog2::Oncontrol_11Change(){
	
} */
/*void CTMPatientHandoverDialog2::Oncontrol_11Setfocus(){
	
} */
/*void CTMPatientHandoverDialog2::Oncontrol_11Killfocus(){
	
} */
int CTMPatientHandoverDialog2::Oncontrol_11CheckValue(){
	return 0;
} 
void CTMPatientHandoverDialog2::Oncontrol_12Select(){
	CMainFrame *pMF = (CMainFrame*) AfxGetMainWnd();
	
} 
void CTMPatientHandoverDialog2::Oncontrol_13Select(){
	CMainFrame *pMF = (CMainFrame*) AfxGetMainWnd();
	
} 
void CTMPatientHandoverDialog2::Oncontrol_14Select(){
	CMainFrame *pMF = (CMainFrame*) AfxGetMainWnd();
	
} 
void CTMPatientHandoverDialog2::Oncontrol_15Select(){
	CMainFrame *pMF = (CMainFrame*) AfxGetMainWnd();
	
} 
/*void CTMPatientHandoverDialog2::Oncontrol_17Change(){
	
} */
/*void CTMPatientHandoverDialog2::Oncontrol_17Setfocus(){
	
} */
/*void CTMPatientHandoverDialog2::Oncontrol_17Killfocus(){
	
} */
int CTMPatientHandoverDialog2::Oncontrol_17CheckValue(){
	return 0;
} 
int CTMPatientHandoverDialog2::OnAddTMPatientHandoverDialog2(){
 	if(GetMode() == VM_ADD || GetMode() == VM_EDIT)
 		return -1;
 	CMainFrame *pMF = (CMainFrame *) AfxGetMainWnd();
 	SetMode(VM_ADD);
	return 0;
}
int CTMPatientHandoverDialog2::OnEditTMPatientHandoverDialog2(){
 	if(GetMode() != VM_VIEW)
 		return -1;
 	CMainFrame *pMF = (CMainFrame *) AfxGetMainWnd();
 	SetMode(VM_EDIT);
	return 0;  
}
int CTMPatientHandoverDialog2::OnDeleteTMPatientHandoverDialog2(){
 	if(GetMode() != VM_VIEW)
 		return -1;
 	CMainFrame *pMF = (CMainFrame *)AfxGetMainWnd();
 	CString szSQL;
 	if(ShowMessage(1, MB_YESNO|MB_ICONQUESTION|MB_DEFBUTTON2) == IDNO)
 		return -1;
 	szSQL.Format(_T("DELETE FROM  WHERE  AND") );
 	int ret = pMF->ExecSQL(szSQL);
 	if(ret >= 0){
 		SetMode(VM_NONE);
 		OnCancelTMPatientHandoverDialog2();
 	}
	return 0;
}
int CTMPatientHandoverDialog2::OnSaveTMPatientHandoverDialog2(){
 	if(GetMode() != VM_ADD && GetMode() != VM_EDIT)
 		return -1;
 	if(!IsValidateData())
 		return -1;
 	CMainFrame *pMF = (CMainFrame *)AfxGetMainWnd();
 	CString szSQL;
 	if(GetMode() == VM_ADD){
 		//szSQL = m_tblTbl.GetInsertSQL();
 	}
 	else if(GetMode() == VM_EDIT){
 		CString szWhere;
 		szWhere.Format(_T(" WHERE"));
 		//szSQL = m_tblTbl.GetUpdateSQL(_T("createdby,createddate"));
 		szSQL += szWhere;
 	}
 _fmsg(_T("%s"), szSQL);
 	int ret = pMF->ExecSQL(szSQL);
 	if(ret > 0)
 	{
 		//OnTMPatientHandoverDialog2ListLoadData();
 		SetMode(VM_VIEW);
 	}
 	else
 	{
 	}
 	return ret;
 	return 0;
}
int CTMPatientHandoverDialog2::OnCancelTMPatientHandoverDialog2(){
 	if(GetMode() == VM_EDIT)
 	{
 		SetMode(VM_VIEW);
 	} 
 	else 
 	{
 		SetMode(VM_NONE);
 	} 
 	CMainFrame *pMF = (CMainFrame *)AfxGetMainWnd();
 	return 0;
} 
int CTMPatientHandoverDialog2::OnTMPatientHandoverDialog2ListLoadData(){
	return 0;
}
