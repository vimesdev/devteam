#include "PhanKhamBenh.h"
#include "MainFrm.h"
/*static void _OntthanChangeFnc(CWnd *pWnd){
	((CPhanKhamBenh *)pWnd)->OntthanChange();
} */
/*static void _OntthanSetfocusFnc(CWnd *pWnd){
	((CPhanKhamBenh *)pWnd)->OntthanSetfocus();} */ 
/*static void _OntthanKillfocusFnc(CWnd *pWnd){
	((CPhanKhamBenh *)pWnd)->OntthanKillfocus();
} */
static int _OntthanCheckValueFnc(CWnd *pWnd){
	return ((CPhanKhamBenh *)pWnd)->OntthanCheckValue();
} 
/*static void _OnmachChangeFnc(CWnd *pWnd){
	((CPhanKhamBenh *)pWnd)->OnmachChange();
} */
/*static void _OnmachSetfocusFnc(CWnd *pWnd){
	((CPhanKhamBenh *)pWnd)->OnmachSetfocus();} */ 
/*static void _OnmachKillfocusFnc(CWnd *pWnd){
	((CPhanKhamBenh *)pWnd)->OnmachKillfocus();
} */
static int _OnmachCheckValueFnc(CWnd *pWnd){
	return ((CPhanKhamBenh *)pWnd)->OnmachCheckValue();
} 
/*static void _OnndoChangeFnc(CWnd *pWnd){
	((CPhanKhamBenh *)pWnd)->OnndoChange();
} */
/*static void _OnndoSetfocusFnc(CWnd *pWnd){
	((CPhanKhamBenh *)pWnd)->OnndoSetfocus();} */ 
/*static void _OnndoKillfocusFnc(CWnd *pWnd){
	((CPhanKhamBenh *)pWnd)->OnndoKillfocus();
} */
static int _OnndoCheckValueFnc(CWnd *pWnd){
	return ((CPhanKhamBenh *)pWnd)->OnndoCheckValue();
} 
/*static void _OnhapChangeFnc(CWnd *pWnd){
	((CPhanKhamBenh *)pWnd)->OnhapChange();
} */
/*static void _OnhapSetfocusFnc(CWnd *pWnd){
	((CPhanKhamBenh *)pWnd)->OnhapSetfocus();} */ 
/*static void _OnhapKillfocusFnc(CWnd *pWnd){
	((CPhanKhamBenh *)pWnd)->OnhapKillfocus();
} */
static int _OnhapCheckValueFnc(CWnd *pWnd){
	return ((CPhanKhamBenh *)pWnd)->OnhapCheckValue();
} 
/*static void _Onhap2ChangeFnc(CWnd *pWnd){
	((CPhanKhamBenh *)pWnd)->OnhapChange();
} */
/*static void _Onhap2SetfocusFnc(CWnd *pWnd){
	((CPhanKhamBenh *)pWnd)->OnhapSetfocus();} */ 
/*static void _Onhap2KillfocusFnc(CWnd *pWnd){
	((CPhanKhamBenh *)pWnd)->OnhapKillfocus();
} */
static int _Onhap2CheckValueFnc(CWnd *pWnd){
	return ((CPhanKhamBenh *)pWnd)->Onhap2CheckValue();
} 
/*static void _OnnthoChangeFnc(CWnd *pWnd){
	((CPhanKhamBenh *)pWnd)->OnnthoChange();
} */
/*static void _OnnthoSetfocusFnc(CWnd *pWnd){
	((CPhanKhamBenh *)pWnd)->OnnthoSetfocus();} */ 
/*static void _OnnthoKillfocusFnc(CWnd *pWnd){
	((CPhanKhamBenh *)pWnd)->OnnthoKillfocus();
} */
static int _OnnthoCheckValueFnc(CWnd *pWnd){
	return ((CPhanKhamBenh *)pWnd)->OnnthoCheckValue();
} 
/*static void _OnccaoChangeFnc(CWnd *pWnd){
	((CPhanKhamBenh *)pWnd)->OnccaoChange();
} */
/*static void _OnccaoSetfocusFnc(CWnd *pWnd){
	((CPhanKhamBenh *)pWnd)->OnccaoSetfocus();} */ 
/*static void _OnccaoKillfocusFnc(CWnd *pWnd){
	((CPhanKhamBenh *)pWnd)->OnccaoKillfocus();
} */
static int _OnccaoCheckValueFnc(CWnd *pWnd){
	return ((CPhanKhamBenh *)pWnd)->OnccaoCheckValue();
} 
/*static void _OncnangChangeFnc(CWnd *pWnd){
	((CPhanKhamBenh *)pWnd)->OncnangChange();
} */
/*static void _OncnangSetfocusFnc(CWnd *pWnd){
	((CPhanKhamBenh *)pWnd)->OncnangSetfocus();} */ 
/*static void _OncnangKillfocusFnc(CWnd *pWnd){
	((CPhanKhamBenh *)pWnd)->OncnangKillfocus();
} */
static int _OncnangCheckValueFnc(CWnd *pWnd){
	return ((CPhanKhamBenh *)pWnd)->OncnangCheckValue();
} 
/*static void _OndinhduongChangeFnc(CWnd *pWnd){
	((CPhanKhamBenh *)pWnd)->OndinhduongChange();
} */
/*static void _OndinhduongSetfocusFnc(CWnd *pWnd){
	((CPhanKhamBenh *)pWnd)->OndinhduongSetfocus();} */ 
/*static void _OndinhduongKillfocusFnc(CWnd *pWnd){
	((CPhanKhamBenh *)pWnd)->OndinhduongKillfocus();
} */
static int _OndinhduongCheckValueFnc(CWnd *pWnd){
	return ((CPhanKhamBenh *)pWnd)->OndinhduongCheckValue();
} 
/*static void _OndientichdaChangeFnc(CWnd *pWnd){
	((CPhanKhamBenh *)pWnd)->OndientichdaChange();
} */
/*static void _OndientichdaSetfocusFnc(CWnd *pWnd){
	((CPhanKhamBenh *)pWnd)->OndientichdaSetfocus();} */ 
/*static void _OndientichdaKillfocusFnc(CWnd *pWnd){
	((CPhanKhamBenh *)pWnd)->OndientichdaKillfocus();
} */
static int _OndientichdaCheckValueFnc(CWnd *pWnd){
	return ((CPhanKhamBenh *)pWnd)->OndientichdaCheckValue();
} 
/*static void _OnthoanChangeFnc(CWnd *pWnd){
	((CPhanKhamBenh *)pWnd)->OnthoanChange();
} */
/*static void _OnthoanSetfocusFnc(CWnd *pWnd){
	((CPhanKhamBenh *)pWnd)->OnthoanSetfocus();} */ 
/*static void _OnthoanKillfocusFnc(CWnd *pWnd){
	((CPhanKhamBenh *)pWnd)->OnthoanKillfocus();
} */
static int _OnthoanCheckValueFnc(CWnd *pWnd){
	return ((CPhanKhamBenh *)pWnd)->OnthoanCheckValue();
} 
/*static void _OnhhapChangeFnc(CWnd *pWnd){
	((CPhanKhamBenh *)pWnd)->OnhhapChange();
} */
/*static void _OnhhapSetfocusFnc(CWnd *pWnd){
	((CPhanKhamBenh *)pWnd)->OnhhapSetfocus();} */ 
/*static void _OnhhapKillfocusFnc(CWnd *pWnd){
	((CPhanKhamBenh *)pWnd)->OnhhapKillfocus();
} */
static int _OnhhapCheckValueFnc(CWnd *pWnd){
	return ((CPhanKhamBenh *)pWnd)->OnhhapCheckValue();
} 
/*static void _OnthoaChangeFnc(CWnd *pWnd){
	((CPhanKhamBenh *)pWnd)->OnthoaChange();
} */
/*static void _OnthoaSetfocusFnc(CWnd *pWnd){
	((CPhanKhamBenh *)pWnd)->OnthoaSetfocus();} */ 
/*static void _OnthoaKillfocusFnc(CWnd *pWnd){
	((CPhanKhamBenh *)pWnd)->OnthoaKillfocus();
} */
static int _OnthoaCheckValueFnc(CWnd *pWnd){
	return ((CPhanKhamBenh *)pWnd)->OnthoaCheckValue();
} 
/*static void _OntnieuChangeFnc(CWnd *pWnd){
	((CPhanKhamBenh *)pWnd)->OntnieuChange();
} */
/*static void _OntnieuSetfocusFnc(CWnd *pWnd){
	((CPhanKhamBenh *)pWnd)->OntnieuSetfocus();} */ 
/*static void _OntnieuKillfocusFnc(CWnd *pWnd){
	((CPhanKhamBenh *)pWnd)->OntnieuKillfocus();
} */
static int _OntnieuCheckValueFnc(CWnd *pWnd){
	return ((CPhanKhamBenh *)pWnd)->OntnieuCheckValue();
} 
/*static void _OnttkinhChangeFnc(CWnd *pWnd){
	((CPhanKhamBenh *)pWnd)->OnttkinhChange();
} */
/*static void _OnttkinhSetfocusFnc(CWnd *pWnd){
	((CPhanKhamBenh *)pWnd)->OnttkinhSetfocus();} */ 
/*static void _OnttkinhKillfocusFnc(CWnd *pWnd){
	((CPhanKhamBenh *)pWnd)->OnttkinhKillfocus();
} */
static int _OnttkinhCheckValueFnc(CWnd *pWnd){
	return ((CPhanKhamBenh *)pWnd)->OnttkinhCheckValue();
} 
/*static void _OncxkhopChangeFnc(CWnd *pWnd){
	((CPhanKhamBenh *)pWnd)->OncxkhopChange();
} */
/*static void _OncxkhopSetfocusFnc(CWnd *pWnd){
	((CPhanKhamBenh *)pWnd)->OncxkhopSetfocus();} */ 
/*static void _OncxkhopKillfocusFnc(CWnd *pWnd){
	((CPhanKhamBenh *)pWnd)->OncxkhopKillfocus();
} */
static int _OncxkhopCheckValueFnc(CWnd *pWnd){
	return ((CPhanKhamBenh *)pWnd)->OncxkhopCheckValue();
} 
/*static void _OnckkhacChangeFnc(CWnd *pWnd){
	((CPhanKhamBenh *)pWnd)->OnckkhacChange();
} */
/*static void _OnckkhacSetfocusFnc(CWnd *pWnd){
	((CPhanKhamBenh *)pWnd)->OnckkhacSetfocus();} */ 
/*static void _OnckkhacKillfocusFnc(CWnd *pWnd){
	((CPhanKhamBenh *)pWnd)->OnckkhacKillfocus();
} */
static int _OnckkhacCheckValueFnc(CWnd *pWnd){
	return ((CPhanKhamBenh *)pWnd)->OnckkhacCheckValue();
} 
/*static void _OnblkhacChangeFnc(CWnd *pWnd){
	((CPhanKhamBenh *)pWnd)->OnblkhacChange();
} */
/*static void _OnblkhacSetfocusFnc(CWnd *pWnd){
	((CPhanKhamBenh *)pWnd)->OnblkhacSetfocus();} */ 
/*static void _OnblkhacKillfocusFnc(CWnd *pWnd){
	((CPhanKhamBenh *)pWnd)->OnblkhacKillfocus();
} */
static int _OnblkhacCheckValueFnc(CWnd *pWnd){
	return ((CPhanKhamBenh *)pWnd)->OnblkhacCheckValue();
} 
/*static void _OnxnghiemChangeFnc(CWnd *pWnd){
	((CPhanKhamBenh *)pWnd)->OnxnghiemChange();
} */
/*static void _OnxnghiemSetfocusFnc(CWnd *pWnd){
	((CPhanKhamBenh *)pWnd)->OnxnghiemSetfocus();} */ 
/*static void _OnxnghiemKillfocusFnc(CWnd *pWnd){
	((CPhanKhamBenh *)pWnd)->OnxnghiemKillfocus();
} */
static int _OnxnghiemCheckValueFnc(CWnd *pWnd){
	return ((CPhanKhamBenh *)pWnd)->OnxnghiemCheckValue();
} 
static int _OnAddPhanKhamBenhFnc(CWnd *pWnd){
	 return ((CPhanKhamBenh*)pWnd)->OnAddPhanKhamBenh();
} 
static int _OnEditPhanKhamBenhFnc(CWnd *pWnd){
	 return ((CPhanKhamBenh*)pWnd)->OnEditPhanKhamBenh();
} 
static int _OnDeletePhanKhamBenhFnc(CWnd *pWnd){
	 return ((CPhanKhamBenh*)pWnd)->OnDeletePhanKhamBenh();
} 
static int _OnSavePhanKhamBenhFnc(CWnd *pWnd){
	 return ((CPhanKhamBenh*)pWnd)->OnSavePhanKhamBenh();
} 
static int _OnCancelPhanKhamBenhFnc(CWnd *pWnd){
	 return ((CPhanKhamBenh*)pWnd)->OnCancelPhanKhamBenh();
} 
static void _OnParaclinicResultButtonSelectFnc(CWnd *pWnd){
	CPhanKhamBenh *pVw = (CPhanKhamBenh *)pWnd;
	pVw->OnParaclinicResultButtonSelect();
} 
// CPhanKhamBenh::CPhanKhamBenh(){
// 
// }
// CPhanKhamBenh::CPhanKhamBenh(CWnd *pParent, int nMode, long nDocNo, CString szRecordNo){
// 	Init(pParent, nMode, nDocNo, szRecordNo);
// }
// CPhanKhamBenh::~CPhanKhamBenh(){
// }
// void CPhanKhamBenh::Init(CWnd *pParent, int nMode, long nDocNo, CString szRecordNo){
// 	CGuiView::SetMode(nMode);
// 	m_nDocumentNo = nDocNo;
// 	m_szRecordNo = szRecordNo;
// 	m_nDlgWidth = 960;
// 	m_nDlgHeight = 600;
// 	SetDefaultValues();
// }

CPhanKhamBenh::CPhanKhamBenh(){
	m_szType = _T("BENH_AN_KB");
}

CPhanKhamBenh::~CPhanKhamBenh(){
}

void CPhanKhamBenh::Init(int nMode, long nDocNo, CString szRecordNo, int nHtrIdx, int nTreatTime)
{
	CGuiView::SetMode(nMode);
	m_nDocumentNo = nDocNo;
	m_szRecordNo = szRecordNo;
	m_nHtrIdx = nHtrIdx;
	m_nTreatTime = nTreatTime;
	m_nDlgWidth = 960;
	m_nDlgHeight = 600;
	SetDefaultValues();
}
void CPhanKhamBenh::OnCreateComponents(){
	m_wndtthanLabel.Create(this, _T("1. Toàn thân:"), 5, 5, 155, 30);
	m_wndtthan.Create(this,5, 31, 465, 131, 1, 0, 1); 
	m_wndmachLabel.Create(this, _T("Mạch"), 485, 5, 585, 30);
	m_wndmach.Create(this,590, 5, 690, 30); 
	m_wndndoLabel.Create(this, _T("Nhiệt độ"), 720, 5, 820, 30);
	m_wndndo.Create(this,830, 5, 930, 30); 
	m_wndhapLabel.Create(this, _T("Huyết áp"), 485, 35, 585, 60);
	m_wndhap.Create(this,590, 35, 637, 60); 
	m_wndhap2.Create(this,642, 35, 690, 60); 
	m_wndnthoLabel.Create(this, _T("Nhịp thở"), 720, 35, 820, 60);
	m_wndntho.Create(this,830, 35, 930, 60); 
	m_wndccaoLabel.Create(this, _T("Chiều cao"), 485, 68, 585, 93);
	m_wndccao.Create(this,590, 68, 690, 93); 
	m_wndcnangLabel.Create(this, _T("Cân nặng"), 720, 68, 820, 93);
	m_wndcnang.Create(this,830, 68, 930, 93); 
	m_wnddinhduongLabel.Create(this, _T("TT dinh dưỡng"), 485, 106, 585, 131);
	m_wnddinhduong.Create(this,590, 106, 690, 131); 
	m_wnddientichdaLabel.Create(this, _T("Diện tích da"), 720, 106, 820, 131);
	m_wnddientichda.Create(this,830, 106, 930, 131); 
	m_wndcaccoquanLabel.Create(this, _T("2. Các cơ quan:"), 5, 132, 155, 157);
	m_wndthoanLabel.Create(this, _T("+ Tuần hoàn"), 5, 158, 155, 183);
	m_wndthoan.Create(this,5, 184, 465, 259, 1, 0, 1); 
	m_wndhhapLabel.Create(this, _T("+ Hô hấp"), 470, 158, 620, 183);
	m_wndhhap.Create(this,470, 184, 930, 259, 1, 0, 1); 
	m_wndthoaLabel.Create(this, _T("+ Tiêu hóa"), 5, 260, 155, 285);
	m_wndthoa.Create(this,5, 286, 465, 361, 1, 0, 1); 
	m_wndtnieuLabel.Create(this, _T("+ Tiết niệu sinh dục"), 470, 260, 620, 285);
	m_wndtnieu.Create(this,470, 286, 930, 361, 1, 0, 1); 
	m_wndttkinhLabel.Create(this, _T("+ Tâm - Thần kinh"), 5, 362, 155, 387);
	m_wndttkinh.Create(this,5, 388, 465, 463, 1, 0, 1); 
	m_wndcxkhopLabel.Create(this, _T("+ Cơ xương khớp"), 470, 362, 620, 387);
	m_wndcxkhop.Create(this,470, 388, 930, 463, 1, 0, 1); 
	m_wndckkhacLabel.Create(this, _T("+ Các khoa khác"), 4, 464, 154, 489);
	m_wndckkhac.Create(this,5, 490, 465, 565, 1, 0, 1); 
	m_wndblkhacLabel.Create(this, _T("+ Các bệnh lý khác"), 470, 464, 620, 489);
	m_wndblkhac.Create(this,470, 490, 930, 565, 1, 0, 1); 
	m_wndxndalamLabel.Create(this, _T("3. Các xét nghiệm đã làm:"), 5, 566, 205, 591);
	m_wndxnghiem.Create(this,5, 592, 930, 692, 1, 0, 1); 
	m_wndParaclinicalResultButton.Create(this, _T("Chọn kết quả"), 210, 566, 310, 591);

}
void CPhanKhamBenh::OnInitializeComponents(){
	CMainFrame *pMF = (CMainFrame*) AfxGetMainWnd();
// 	m_wndtthan.SetLimitText(35);
// 	m_wndtthan.SetCheckValue(true);
// 	m_wndmach.SetLimitText(35);
// 	m_wndmach.SetCheckValue(true);
// 	m_wndndo.SetLimitText(35);
// 	m_wndndo.SetCheckValue(true);
// 	m_wndhap.SetLimitText(35);
// 	m_wndhap.SetCheckValue(true);
// 	m_wndhap2.SetLimitText(35);
// 	m_wndhap2.SetCheckValue(true);
// 	m_wndntho.SetLimitText(35);
// 	m_wndntho.SetCheckValue(true);
// 	m_wndccao.SetLimitText(35);
// 	m_wndccao.SetCheckValue(true);
// 	m_wndcnang.SetLimitText(35);
// 	m_wndcnang.SetCheckValue(true);
// 	m_wnddinhduong.SetLimitText(35);
// 	m_wnddinhduong.SetCheckValue(true);
// 	m_wnddientichda.SetLimitText(35);
// 	m_wnddientichda.SetCheckValue(true);
// 	m_wndthoan.SetLimitText(35);
// 	m_wndthoan.SetCheckValue(true);
// 	m_wndhhap.SetLimitText(35);
// 	m_wndhhap.SetCheckValue(true);
// 	m_wndthoa.SetLimitText(35);
// 	m_wndthoa.SetCheckValue(true);
// 	m_wndtnieu.SetLimitText(35);
// 	m_wndtnieu.SetCheckValue(true);
// 	m_wndttkinh.SetLimitText(35);
// 	m_wndttkinh.SetCheckValue(true);
// 	m_wndcxkhop.SetLimitText(35);
// 	m_wndcxkhop.SetCheckValue(true);
// 	m_wndckkhac.SetLimitText(35);
// 	m_wndckkhac.SetCheckValue(true);
// 	m_wndblkhac.SetLimitText(35);
// 	m_wndblkhac.SetCheckValue(true);
// 	m_wndxnghiem.SetLimitText(35);
// 	m_wndxnghiem.SetCheckValue(true);

}
void CPhanKhamBenh::OnSetWindowEvents(){
	CMainFrame *pMF = (CMainFrame*) AfxGetMainWnd();
	//m_wndtthan.SetEvent(WE_CHANGE, _OntthanChangeFnc);
	//m_wndtthan.SetEvent(WE_SETFOCUS, _OntthanSetfocusFnc);
	//m_wndtthan.SetEvent(WE_KILLFOCUS, _OntthanKillfocusFnc);
	m_wndtthan.SetEvent(WE_CHECKVALUE, _OntthanCheckValueFnc);
	//m_wndmach.SetEvent(WE_CHANGE, _OnmachChangeFnc);
	//m_wndmach.SetEvent(WE_SETFOCUS, _OnmachSetfocusFnc);
	//m_wndmach.SetEvent(WE_KILLFOCUS, _OnmachKillfocusFnc);
	m_wndmach.SetEvent(WE_CHECKVALUE, _OnmachCheckValueFnc);
	//m_wndndo.SetEvent(WE_CHANGE, _OnndoChangeFnc);
	//m_wndndo.SetEvent(WE_SETFOCUS, _OnndoSetfocusFnc);
	//m_wndndo.SetEvent(WE_KILLFOCUS, _OnndoKillfocusFnc);
	m_wndndo.SetEvent(WE_CHECKVALUE, _OnndoCheckValueFnc);
	//m_wndhap.SetEvent(WE_CHANGE, _OnhapChangeFnc);
	//m_wndhap.SetEvent(WE_SETFOCUS, _OnhapSetfocusFnc);
	//m_wndhap.SetEvent(WE_KILLFOCUS, _OnhapKillfocusFnc);
	m_wndhap.SetEvent(WE_CHECKVALUE, _OnhapCheckValueFnc);
	//m_wndhap2.SetEvent(WE_CHANGE, _Onhap2ChangeFnc);
	//m_wndhap2.SetEvent(WE_SETFOCUS, _Onhap2SetfocusFnc);
	//m_wndhap2.SetEvent(WE_KILLFOCUS, _Onhap2KillfocusFnc);
	m_wndhap2.SetEvent(WE_CHECKVALUE, _Onhap2CheckValueFnc);
	//m_wndntho.SetEvent(WE_CHANGE, _OnnthoChangeFnc);
	//m_wndntho.SetEvent(WE_SETFOCUS, _OnnthoSetfocusFnc);
	//m_wndntho.SetEvent(WE_KILLFOCUS, _OnnthoKillfocusFnc);
	m_wndntho.SetEvent(WE_CHECKVALUE, _OnnthoCheckValueFnc);
	//m_wndccao.SetEvent(WE_CHANGE, _OnccaoChangeFnc);
	//m_wndccao.SetEvent(WE_SETFOCUS, _OnccaoSetfocusFnc);
	//m_wndccao.SetEvent(WE_KILLFOCUS, _OnccaoKillfocusFnc);
	m_wndccao.SetEvent(WE_CHECKVALUE, _OnccaoCheckValueFnc);
	//m_wndcnang.SetEvent(WE_CHANGE, _OncnangChangeFnc);
	//m_wndcnang.SetEvent(WE_SETFOCUS, _OncnangSetfocusFnc);
	//m_wndcnang.SetEvent(WE_KILLFOCUS, _OncnangKillfocusFnc);
	m_wndcnang.SetEvent(WE_CHECKVALUE, _OncnangCheckValueFnc);
	//m_wnddinhduong.SetEvent(WE_CHANGE, _OndinhduongChangeFnc);
	//m_wnddinhduong.SetEvent(WE_SETFOCUS, _OndinhduongSetfocusFnc);
	//m_wnddinhduong.SetEvent(WE_KILLFOCUS, _OndinhduongKillfocusFnc);
	m_wnddinhduong.SetEvent(WE_CHECKVALUE, _OndinhduongCheckValueFnc);
	//m_wnddientichda.SetEvent(WE_CHANGE, _OndientichdaChangeFnc);
	//m_wnddientichda.SetEvent(WE_SETFOCUS, _OndientichdaSetfocusFnc);
	//m_wnddientichda.SetEvent(WE_KILLFOCUS, _OndientichdaKillfocusFnc);
	m_wnddientichda.SetEvent(WE_CHECKVALUE, _OndientichdaCheckValueFnc);
	//m_wndthoan.SetEvent(WE_CHANGE, _OnthoanChangeFnc);
	//m_wndthoan.SetEvent(WE_SETFOCUS, _OnthoanSetfocusFnc);
	//m_wndthoan.SetEvent(WE_KILLFOCUS, _OnthoanKillfocusFnc);
	m_wndthoan.SetEvent(WE_CHECKVALUE, _OnthoanCheckValueFnc);
	//m_wndhhap.SetEvent(WE_CHANGE, _OnhhapChangeFnc);
	//m_wndhhap.SetEvent(WE_SETFOCUS, _OnhhapSetfocusFnc);
	//m_wndhhap.SetEvent(WE_KILLFOCUS, _OnhhapKillfocusFnc);
	m_wndhhap.SetEvent(WE_CHECKVALUE, _OnhhapCheckValueFnc);
	//m_wndthoa.SetEvent(WE_CHANGE, _OnthoaChangeFnc);
	//m_wndthoa.SetEvent(WE_SETFOCUS, _OnthoaSetfocusFnc);
	//m_wndthoa.SetEvent(WE_KILLFOCUS, _OnthoaKillfocusFnc);
	m_wndthoa.SetEvent(WE_CHECKVALUE, _OnthoaCheckValueFnc);
	//m_wndtnieu.SetEvent(WE_CHANGE, _OntnieuChangeFnc);
	//m_wndtnieu.SetEvent(WE_SETFOCUS, _OntnieuSetfocusFnc);
	//m_wndtnieu.SetEvent(WE_KILLFOCUS, _OntnieuKillfocusFnc);
	m_wndtnieu.SetEvent(WE_CHECKVALUE, _OntnieuCheckValueFnc);
	//m_wndttkinh.SetEvent(WE_CHANGE, _OnttkinhChangeFnc);
	//m_wndttkinh.SetEvent(WE_SETFOCUS, _OnttkinhSetfocusFnc);
	//m_wndttkinh.SetEvent(WE_KILLFOCUS, _OnttkinhKillfocusFnc);
	m_wndttkinh.SetEvent(WE_CHECKVALUE, _OnttkinhCheckValueFnc);
	//m_wndcxkhop.SetEvent(WE_CHANGE, _OncxkhopChangeFnc);
	//m_wndcxkhop.SetEvent(WE_SETFOCUS, _OncxkhopSetfocusFnc);
	//m_wndcxkhop.SetEvent(WE_KILLFOCUS, _OncxkhopKillfocusFnc);
	m_wndcxkhop.SetEvent(WE_CHECKVALUE, _OncxkhopCheckValueFnc);
	//m_wndckkhac.SetEvent(WE_CHANGE, _OnckkhacChangeFnc);
	//m_wndckkhac.SetEvent(WE_SETFOCUS, _OnckkhacSetfocusFnc);
	//m_wndckkhac.SetEvent(WE_KILLFOCUS, _OnckkhacKillfocusFnc);
	m_wndckkhac.SetEvent(WE_CHECKVALUE, _OnckkhacCheckValueFnc);
	//m_wndblkhac.SetEvent(WE_CHANGE, _OnblkhacChangeFnc);
	//m_wndblkhac.SetEvent(WE_SETFOCUS, _OnblkhacSetfocusFnc);
	//m_wndblkhac.SetEvent(WE_KILLFOCUS, _OnblkhacKillfocusFnc);
	m_wndblkhac.SetEvent(WE_CHECKVALUE, _OnblkhacCheckValueFnc);
	//m_wndxnghiem.SetEvent(WE_CHANGE, _OnxnghiemChangeFnc);
	//m_wndxnghiem.SetEvent(WE_SETFOCUS, _OnxnghiemSetfocusFnc);
	//m_wndxnghiem.SetEvent(WE_KILLFOCUS, _OnxnghiemKillfocusFnc);
	m_wndxnghiem.SetEvent(WE_CHECKVALUE, _OnxnghiemCheckValueFnc);
	m_wndParaclinicalResultButton.SetEvent(WE_CLICK, _OnParaclinicResultButtonSelectFnc);
	int nMode = GetMode();
	if(nMode == VM_VIEW || nMode == VM_EDIT)
		GetDataToScreen();
	SetMode(nMode);

	SetScrollSizes(MM_TEXT, CSize(940, 700));

}
void CPhanKhamBenh::OnDoDataExchange(CDataExchange* pDX){
	DDX_Text(pDX, m_wndtthan.GetDlgCtrlID(), m_sztthan);
	DDX_Text(pDX, m_wndmach.GetDlgCtrlID(), m_nmach);
	DDX_Text(pDX, m_wndndo.GetDlgCtrlID(), m_nndo);
	DDX_Text(pDX, m_wndhap.GetDlgCtrlID(), m_nhap);
	DDX_Text(pDX, m_wndhap2.GetDlgCtrlID(), m_nhap2);
	DDX_Text(pDX, m_wndntho.GetDlgCtrlID(), m_nntho);
	DDX_Text(pDX, m_wndccao.GetDlgCtrlID(), m_nccao);
	DDX_Text(pDX, m_wndcnang.GetDlgCtrlID(), m_ncnang);
	DDX_Text(pDX, m_wnddinhduong.GetDlgCtrlID(), m_szdinhduong);
	DDX_Text(pDX, m_wnddientichda.GetDlgCtrlID(), m_szdientichda);
	DDX_Text(pDX, m_wndthoan.GetDlgCtrlID(), m_szthoan);
	DDX_Text(pDX, m_wndhhap.GetDlgCtrlID(), m_szhhap);
	DDX_Text(pDX, m_wndthoa.GetDlgCtrlID(), m_szthoa);
	DDX_Text(pDX, m_wndtnieu.GetDlgCtrlID(), m_sztnieu);
	DDX_Text(pDX, m_wndttkinh.GetDlgCtrlID(), m_szttkinh);
	DDX_Text(pDX, m_wndcxkhop.GetDlgCtrlID(), m_szcxkhop);
	DDX_Text(pDX, m_wndckkhac.GetDlgCtrlID(), m_szckkhac);
	DDX_Text(pDX, m_wndblkhac.GetDlgCtrlID(), m_szblkhac);
	DDX_Text(pDX, m_wndxnghiem.GetDlgCtrlID(), m_szxnghiem);

}
void CPhanKhamBenh::UpdateJson(BOOL bSave){
	if(bSave)
	{
		UpdateData(TRUE);	
		m_jData[_T("toan_than")] =  m_sztthan;
		m_jData[_T("mach")] =  m_nmach;
		m_jData[_T("nhiet_do")] =  m_nndo;
		m_jData[_T("huyet_ap")] =  m_nhap;
		m_jData[_T("huyet_ap2")] =  m_nhap2;
		m_jData[_T("nhip_tho")] =  m_nntho;
		m_jData[_T("chieu_cao")] =  m_nccao;
		m_jData[_T("can_nang")] =  m_ncnang;
		m_jData[_T("dinh_duong")] =  m_szdinhduong;
		m_jData[_T("dien_tich_da")] =  m_szdientichda;
		m_jData[_T("tuan_hoan")] =  m_szthoan;
		m_jData[_T("ho_hap")] =  m_szhhap;
		m_jData[_T("tieu_hoa")] =  m_szthoa;
		m_jData[_T("tiet_nieu")] =  m_sztnieu;
		m_jData[_T("than_kinh")] =  m_szttkinh;
		m_jData[_T("co_xuong_khop")] =  m_szcxkhop;
		m_jData[_T("chuyen_khoa_khac")] =  m_szckkhac;
		m_jData[_T("benh_ly_khac")] =  m_szblkhac;
		m_jData[_T("xet_nghiem")] =  m_szxnghiem;
	}
	else
	{
			
		m_jData[_T("toan_than")].GetValue(m_sztthan);
		m_jData[_T("mach")].GetValue(m_nmach);
		m_jData[_T("nhiet_do")].GetValue(m_nndo);
		m_jData[_T("huyet_ap")].GetValue(m_nhap);
		m_jData[_T("huyet_ap2")].GetValue(m_nhap2);
		m_jData[_T("nhip_tho")].GetValue(m_nntho);
		m_jData[_T("chieu_cao")].GetValue(m_nccao);
		m_jData[_T("can_nang")].GetValue(m_ncnang);
		m_jData[_T("dinh_duong")].GetValue(m_szdinhduong);
		m_jData[_T("dien_tich_da")].GetValue(m_szdientichda);
		m_jData[_T("tuan_hoan")].GetValue(m_szthoan);
		m_jData[_T("ho_hap")].GetValue(m_szhhap);
		m_jData[_T("tieu_hoa")].GetValue(m_szthoa);
		m_jData[_T("tiet_nieu")].GetValue(m_sztnieu);
		m_jData[_T("than_kinh")].GetValue(m_szttkinh);
		m_jData[_T("co_xuong_khop")].GetValue(m_szcxkhop);
		m_jData[_T("chuyen_khoa_khac")].GetValue(m_szckkhac);
		m_jData[_T("benh_ly_khac")].GetValue(m_szblkhac);
		m_jData[_T("xet_nghiem")].GetValue(m_szxnghiem);
		UpdateData(FALSE);
	}

}
void CPhanKhamBenh::GetDataToScreen(){
	CMainFrame *pMF = (CMainFrame*) AfxGetMainWnd();
	CRecord rs(&pMF->m_db);
	CString szSQL, szType, tmpStr, szData;
	int n = 0;
	CString szFilter;
	szFilter.Empty();
	bool res = pMF->GetEMRData(m_nDocumentNo, m_nTreatTime, m_szType, m_szRecordNo, szFilter, szData);
	if(res)
	{
		m_jData.Parse(szData);
		UpdateJson(FALSE);
	}
	else
	{
		int nMaxTreattime=0;
		szSQL.Format(_T("SELECT max(hde_treattime) as ntreat FROM hms_doc_emr ") \
			_T(" WHERE hde_docno=%ld and hde_name in ('%s', 'BANGT') ") \
			_T(" AND hde_type='BENH_AN_KB' AND hde_treattime <= %d "), m_nDocumentNo, m_szRecordNo, m_nTreatTime);
		
		rs.ExecSQL(szSQL);
		rs.GetValue(_T("ntreat"), nMaxTreattime);

		szSQL.Format(_T("SELECT COUNT(*) AS solan FROM hms_doc_emr WHERE hde_docno=%ld and hde_name in ('%s', 'BANGT') ") \
			_T(" and hde_type='BENH_AN_KB' AND hde_treattime = %d "), m_nDocumentNo, m_szRecordNo, nMaxTreattime);
		rs.ExecSQL(szSQL);
		rs.GetValue(_T("solan"), n);

		if(n > 0)
		{
			for (int i = 0; i < n; i++)
			{
				szSQL.Format(_T("SELECT to_char(hde_value) as hde_value FROM hms_doc_emr WHERE hde_docno=%ld and hde_name in ('%s', 'BANGT') ") \
					_T(" and hde_type='BENH_AN_KB' and hde_refidx = %d AND hde_treattime = %d "), m_nDocumentNo, m_szRecordNo, i, nMaxTreattime);
				rs.ExecSQL(szSQL);
				rs.GetValue(_T("hde_value"), tmpStr);
				tmpStr.Replace(_T("''"), _T("'"));
				szData.AppendFormat(_T("%s"), tmpStr);
			}
			m_jData.Parse(szData);
			UpdateJson(FALSE);
		}
		else
		{
	// 		szSQL.Format(_T(" SELECT TRIM(extract(HOUR FROM hci_date) || ':' || extract(MINUTE FROM hci_date)) AS phour,") \
	// 			_T("   hci_pulse     AS pulse,") \
	// 			_T("   hci_temperature    AS temperature,") \
	// 			_T("   hci_bloodpressure  AS bp,") \
	// 			_T("   hci_bloodpressurex AS bpx,") \
	// 			_T("   TRIM(hci_bloodpressure") \
	// 			_T("   ||'/'") \
	// 			_T("   ||hci_bloodpressurex) AS huyetap,") \
	// 			_T("   hci_breathinterval    AS breath") \
	// 			_T(" FROM hms_careinfo") \
	// 			_T(" WHERE hci_docno          = %d") \
	// 			_T(" AND rownum = 1 ORDER BY hci_date"), m_nDocumentNo);
	// 		_fmsg(_T("%s"), szSQL);
	// 		rs.ExecSQL(szSQL);
	// 		rs.GetValue(_T("pulse"), m_nmach);
	// 		rs.GetValue(_T("temperature"), m_nndo);
	// 		rs.GetValue(_T("bp"), m_nhap);
	// 		rs.GetValue(_T("bpx"), m_nhap2);
	// 		rs.GetValue(_T("breath"), m_nntho);
	// 		rs.MoveNext();

			JSONVALUE jData;
			CString szTemp;
			szSQL.Format(_T("SELECT * FROM hms_doc_emr_view WHERE hde_docno=%ld and hde_type='PATIENT_CARE' and hde_treattime = %d and rownum = 1"), m_nDocumentNo, m_nTreatTime);
			rs.ExecSQL(szSQL);
			rs.GetValue(_T("hde_value"), tmpStr);
			jData.Clear();
			jData.Parse(tmpStr);
			jData[_T("mach")].GetValue(szTemp);
			m_nmach = str2long(szTemp);
			jData[_T("than_nhiet")].GetValue(szTemp);
			m_nndo = str2long(szTemp);
			jData[_T("ha")].GetValue(szTemp);
			m_nhap = str2long(szTemp);
			jData[_T("ha2")].GetValue(szTemp);
			m_nhap2 = str2long(szTemp);
			jData[_T("nhip_tho")].GetValue(szTemp);
			m_nntho = str2long(szTemp);
			jData[_T("chieu_cao")].GetValue(szTemp);
			m_nccao = str2long(szTemp);
			jData[_T("can_nang")].GetValue(szTemp);
			m_ncnang = str2long(szTemp);

			m_wndtthan.SetFocus();
		}
	}
}
void CPhanKhamBenh::GetScreenToData(){
	CMainFrame *pMF = (CMainFrame*) AfxGetMainWnd();
	UpdateJson(TRUE);
}
void CPhanKhamBenh::SetDefaultValues(){

	m_sztthan.Empty();
	m_nmach=0;
	m_nndo=0;
	m_nhap=0;
	m_nhap2=0;
	m_nntho=0;
	m_nccao=0;
	m_ncnang=0;
	m_szdinhduong.Empty();
	m_szdientichda.Empty();
	m_szthoan.Empty();
	m_szhhap.Empty();
	m_szthoa.Empty();
	m_sztnieu.Empty();
	m_szttkinh.Empty();
	m_szcxkhop.Empty();
	m_szckkhac.Empty();
	m_szblkhac.Empty();
	m_szxnghiem.Empty();

}
int CPhanKhamBenh::SetMode(int nMode){
 		int nOldMode = GetMode();
 		CGuiView::SetMode(nMode);
 		CMainFrame *pMF = (CMainFrame *) AfxGetMainWnd();
 		CString szSQL;
 		CRecord rs(&pMF->m_db);
  		switch(nMode){
 		case VM_ADD: 
 			EnableControls(TRUE);
 			EnableButtons(TRUE, 0, 3, 4, -1);
 			SetDefaultValues();
 			break;
 		case VM_EDIT: 
 			EnableControls(TRUE);
 			EnableButtons(TRUE, 0, 3, 4, -1);
 			break;
 		case VM_VIEW: 
 			EnableControls(FALSE);
 			EnableButtons(FALSE, 0, 3, 4, -1);
 			break;
 		case VM_NONE: 
 			EnableControls(FALSE);
 			EnableButtons(TRUE, 0, 6, -1);
 			SetDefaultValues();
 			break;
 		};
 		UpdateData(FALSE);
 		return nOldMode;
}
/*void CPhanKhamBenh::OntthanChange(){
	
} */
/*void CPhanKhamBenh::OntthanSetfocus(){
	
} */
/*void CPhanKhamBenh::OntthanKillfocus(){
	
} */
int CPhanKhamBenh::OntthanCheckValue(){
	return 0;
} 
/*void CPhanKhamBenh::OnmachChange(){
	
} */
/*void CPhanKhamBenh::OnmachSetfocus(){
	
} */
/*void CPhanKhamBenh::OnmachKillfocus(){
	
} */
int CPhanKhamBenh::OnmachCheckValue(){
	return 0;
} 
/*void CPhanKhamBenh::OnndoChange(){
	
} */
/*void CPhanKhamBenh::OnndoSetfocus(){
	
} */
/*void CPhanKhamBenh::OnndoKillfocus(){
	
} */
int CPhanKhamBenh::OnndoCheckValue(){
	return 0;
} 
/*void CPhanKhamBenh::OnhapChange(){
	
} */
/*void CPhanKhamBenh::OnhapSetfocus(){
	
} */
/*void CPhanKhamBenh::OnhapKillfocus(){
	
} */
int CPhanKhamBenh::OnhapCheckValue(){
	return 0;
}
/*void CPhanKhamBenh::Onhap2Change(){
	
} */
/*void CPhanKhamBenh::Onhap2Setfocus(){
	
} */
/*void CPhanKhamBenh::Onhap2Killfocus(){
	
} */
int CPhanKhamBenh::Onhap2CheckValue(){
	return 0;
} 
/*void CPhanKhamBenh::OnnthoChange(){
	
} */
/*void CPhanKhamBenh::OnnthoSetfocus(){
	
} */
/*void CPhanKhamBenh::OnnthoKillfocus(){
	
} */
int CPhanKhamBenh::OnnthoCheckValue(){
	return 0;
} 
/*void CPhanKhamBenh::OnccaoChange(){
	
} */
/*void CPhanKhamBenh::OnccaoSetfocus(){
	
} */
/*void CPhanKhamBenh::OnccaoKillfocus(){
	
} */
int CPhanKhamBenh::OnccaoCheckValue(){
	return 0;
} 
/*void CPhanKhamBenh::OncnangChange(){
	
} */
/*void CPhanKhamBenh::OncnangSetfocus(){
	
} */
/*void CPhanKhamBenh::OncnangKillfocus(){
	
} */
int CPhanKhamBenh::OncnangCheckValue(){
	return 0;
} 
/*void CPhanKhamBenh::OndinhduongChange(){
	
} */
/*void CPhanKhamBenh::OndinhduongSetfocus(){
	
} */
/*void CPhanKhamBenh::OndinhduongKillfocus(){
	
} */
int CPhanKhamBenh::OndinhduongCheckValue(){
	return 0;
} 
/*void CPhanKhamBenh::OndientichdaChange(){
	
} */
/*void CPhanKhamBenh::OndientichdaSetfocus(){
	
} */
/*void CPhanKhamBenh::OndientichdaKillfocus(){
	
} */
int CPhanKhamBenh::OndientichdaCheckValue(){
	return 0;
} 
/*void CPhanKhamBenh::OnthoanChange(){
	
} */
/*void CPhanKhamBenh::OnthoanSetfocus(){
	
} */
/*void CPhanKhamBenh::OnthoanKillfocus(){
	
} */
int CPhanKhamBenh::OnthoanCheckValue(){
	return 0;
} 
/*void CPhanKhamBenh::OnhhapChange(){
	
} */
/*void CPhanKhamBenh::OnhhapSetfocus(){
	
} */
/*void CPhanKhamBenh::OnhhapKillfocus(){
	
} */
int CPhanKhamBenh::OnhhapCheckValue(){
	return 0;
} 
/*void CPhanKhamBenh::OnthoaChange(){
	
} */
/*void CPhanKhamBenh::OnthoaSetfocus(){
	
} */
/*void CPhanKhamBenh::OnthoaKillfocus(){
	
} */
int CPhanKhamBenh::OnthoaCheckValue(){
	return 0;
} 
/*void CPhanKhamBenh::OntnieuChange(){
	
} */
/*void CPhanKhamBenh::OntnieuSetfocus(){
	
} */
/*void CPhanKhamBenh::OntnieuKillfocus(){
	
} */
int CPhanKhamBenh::OntnieuCheckValue(){
	return 0;
} 
/*void CPhanKhamBenh::OnttkinhChange(){
	
} */
/*void CPhanKhamBenh::OnttkinhSetfocus(){
	
} */
/*void CPhanKhamBenh::OnttkinhKillfocus(){
	
} */
int CPhanKhamBenh::OnttkinhCheckValue(){
	return 0;
} 
/*void CPhanKhamBenh::OncxkhopChange(){
	
} */
/*void CPhanKhamBenh::OncxkhopSetfocus(){
	
} */
/*void CPhanKhamBenh::OncxkhopKillfocus(){
	
} */
int CPhanKhamBenh::OncxkhopCheckValue(){
	return 0;
} 
/*void CPhanKhamBenh::OnckkhacChange(){
	
} */
/*void CPhanKhamBenh::OnckkhacSetfocus(){
	
} */
/*void CPhanKhamBenh::OnckkhacKillfocus(){
	
} */
int CPhanKhamBenh::OnckkhacCheckValue(){
	return 0;
} 
/*void CPhanKhamBenh::OnblkhacChange(){
	
} */
/*void CPhanKhamBenh::OnblkhacSetfocus(){
	
} */
/*void CPhanKhamBenh::OnblkhacKillfocus(){
	
} */
int CPhanKhamBenh::OnblkhacCheckValue(){
	return 0;
} 
/*void CPhanKhamBenh::OnxnghiemChange(){
	
} */
/*void CPhanKhamBenh::OnxnghiemSetfocus(){
	
} */
/*void CPhanKhamBenh::OnxnghiemKillfocus(){
	
} */
int CPhanKhamBenh::OnxnghiemCheckValue(){
	return 0;
} 
#include "HMSParaclinicResultDialog.h"
void CPhanKhamBenh::OnParaclinicResultButtonSelect(){
	CMainFrame *pMF = (CMainFrame*) AfxGetMainWnd();
	CHMSParaclinicResultDialog dlg(this, m_nDocumentNo, true);
	if(dlg.DoModal() == IDOK)
	{
		m_szxnghiem = dlg.m_szData;
		UpdateData(FALSE);
	}
}
int CPhanKhamBenh::OnAddPhanKhamBenh(){
 	if(GetMode() == VM_ADD || GetMode() == VM_EDIT)
 		return -1;
 	CMainFrame *pMF = (CMainFrame *) AfxGetMainWnd();
 	SetMode(VM_ADD);
	return 0;
}
int CPhanKhamBenh::OnEditPhanKhamBenh(){
 	if(GetMode() != VM_VIEW)
 		return -1;
 	CMainFrame *pMF = (CMainFrame *) AfxGetMainWnd();
 	SetMode(VM_EDIT);
	return 0;  
}
int CPhanKhamBenh::OnDeletePhanKhamBenh(){
 	if(GetMode() != VM_VIEW)
 		return -1;
 	CMainFrame *pMF = (CMainFrame *)AfxGetMainWnd();
 	CString szSQL;
 	if(ShowMessage(1, MB_YESNO|MB_ICONQUESTION|MB_DEFBUTTON2) == IDNO)
 		return -1;
 	szSQL.Format(_T("DELETE FROM  WHERE  AND") );
 	int ret = pMF->ExecSQL(szSQL);
 	if(ret >= 0){
 		SetMode(VM_NONE);
 		OnCancelPhanKhamBenh();
 	}
	return 0;
}
int CPhanKhamBenh::OnSavePhanKhamBenh(){
 	if(GetMode() != VM_ADD && GetMode() != VM_EDIT)
		return -1;
	if(!IsValidateData())
		return -1;
	CMainFrame *pMF = (CMainFrame *)AfxGetMainWnd();
	CString szSQL;
	CString szData;
	int ret = 0;
	m_jData.ToString(szData);
	int n =0;

	//Thay function hms_doc_emr_create = function SaveEMRData
	bool res = pMF->SaveEMRData(m_szType, m_szRecordNo, m_nDocumentNo, pMF->m_szDept, pMF->m_nRefIndex, 0,  0, szData);
	if(!res)
		return -1;
	res = 1;

	/*
	CString tmpStr;
	tmpStr = szData;

	pMF->BeginTransaction();
	szSQL.Format(_T("DELETE FROM hms_doc_emr WHERE hde_docno=%ld and hde_name='%s' and hde_type='BENH_AN_KB' AND hde_htridx = %d "), m_nDocumentNo, m_szRecordNo, m_nHtrIdx);
	pMF->ExecSQL(szSQL);

	CStringArray strList;
	pMF->String2Array(szData, &strList, 2000);
	for (int i =0; i < strList.GetCount();i++)
	{
		tmpStr = strList[i];
		tmpStr.Replace(_T("'"), _T("''"));
		szSQL.Format(_T("HMS_DOC_EMR_CREATE('BENH_AN_KB', %ld, '%s', %d, %d, '%s', '%s', '%s', %d, %d) "),
			m_nDocumentNo, pMF->m_szDept, n++, 0, pMF->GetCurrentUser(), m_szRecordNo, tmpStr, 0, m_nHtrIdx);
		ret = str2int(pMF->ExecDML(szSQL));
		if(ret < 0)
		{
			pMF->Rollback();
			return -1;
		}
	}

	pMF->Commit();
	*/
/*
	for (;;)
	{
		szSQL.Format(_T("HMS_DOC_EMR_CREATE('BENH_AN', %ld, '%s', %d, %d, '%s', '%s', '%s') "),
			m_nDocumentNo, pMF->m_szDept, n++, 0, pMF->GetCurrentUser(), m_szRecordNo, tmpStr);
		ret = str2int(pMF->ExecDML(szSQL));
		_msg(_T("%d"), n++);
		if(tmpStr.GetLength()  < 2000)
			break;
		tmpStr = tmpStr.Mid(2000);
	}
*/

/*
	szSQL.Format(_T("HMS_DOC_EMR_CREATE('BENH_AN', %ld, '%s', %d, %d, '%s', '%s', '%s') "),
		m_nDocumentNo, pMF->m_szDept, 1, 0, pMF->GetCurrentUser(), m_szRecordNo, szData);

	int ret = str2int(pMF->ExecDML(szSQL));

	return ret;
*/

	return ret;

	return 0;
}
int CPhanKhamBenh::OnCancelPhanKhamBenh(){
 	if(GetMode() == VM_EDIT)
 	{
 		SetMode(VM_VIEW);
 	} 
 	else 
 	{
 		SetMode(VM_NONE);
 	} 
 	CMainFrame *pMF = (CMainFrame *)AfxGetMainWnd();
 	return 0;
} 
int CPhanKhamBenh::OnPhanKhamBenhListLoadData(){
	return 0;
}


void CPhanKhamBenh::Refresh(int nTreatTime)
{
	m_nTreatTime = nTreatTime;
	GetDataToScreen();
	SetMode(VM_VIEW);
}