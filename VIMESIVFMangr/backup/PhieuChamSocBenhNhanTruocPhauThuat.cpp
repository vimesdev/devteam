#include "PhieuChamSocBenhNhanTruocPhauThuat.h"
#include "MainFrm.h"
static void _OnOperationNameSelectChangeFnc(CWnd *pWnd, int nOldItemSel, int nNewItemSel){
	((CPhieuChamSocBenhNhanTruocPhauThuat* )pWnd)->OnOperationNameSelectChange(nOldItemSel, nNewItemSel);
} 
static void _OnOperationNameSelendokFnc(CWnd *pWnd){
	((CPhieuChamSocBenhNhanTruocPhauThuat *)pWnd)->OnOperationNameSelendok();
}
/*static void _OnOperationNameSetfocusFnc(CWnd *pWnd){
	((CPhieuChamSocBenhNhanTruocPhauThuat *)pWnd)->OnOperationNameKillfocus();
}*/
/*static void _OnOperationNameKillfocusFnc(CWnd *pWnd){
	((CPhieuChamSocBenhNhanTruocPhauThuat *)pWnd)->OnOperationNameKillfocus();
}*/
static long _OnOperationNameLoadDataFnc(CWnd *pWnd){
	return ((CPhieuChamSocBenhNhanTruocPhauThuat *)pWnd)->OnOperationNameLoadData();
}
/*static void _OnOperationNameAddNewFnc(CWnd *pWnd){
	((CPhieuChamSocBenhNhanTruocPhauThuat *)pWnd)->OnOperationNameAddNew();
}*/
static void _Onc1SelectFnc(CWnd *pWnd){
	 ((CPhieuChamSocBenhNhanTruocPhauThuat*)pWnd)->Onc1Select();
}
static void _Onc2SelectFnc(CWnd *pWnd){
	 ((CPhieuChamSocBenhNhanTruocPhauThuat*)pWnd)->Onc2Select();
}
static void _Onc3SelectFnc(CWnd *pWnd){
	 ((CPhieuChamSocBenhNhanTruocPhauThuat*)pWnd)->Onc3Select();
}
static void _Onc4SelectFnc(CWnd *pWnd){
	 ((CPhieuChamSocBenhNhanTruocPhauThuat*)pWnd)->Onc4Select();
}
static void _Onc5SelectFnc(CWnd *pWnd){
	 ((CPhieuChamSocBenhNhanTruocPhauThuat*)pWnd)->Onc5Select();
}
static void _Onc6SelectFnc(CWnd *pWnd){
	 ((CPhieuChamSocBenhNhanTruocPhauThuat*)pWnd)->Onc6Select();
}
static void _Onc7SelectFnc(CWnd *pWnd){
	 ((CPhieuChamSocBenhNhanTruocPhauThuat*)pWnd)->Onc7Select();
}
static void _Onc8SelectFnc(CWnd *pWnd){
	 ((CPhieuChamSocBenhNhanTruocPhauThuat*)pWnd)->Onc8Select();
}
static void _Onc9SelectFnc(CWnd *pWnd){
	 ((CPhieuChamSocBenhNhanTruocPhauThuat*)pWnd)->Onc9Select();
}
static void _Onc10SelectFnc(CWnd *pWnd){
	 ((CPhieuChamSocBenhNhanTruocPhauThuat*)pWnd)->Onc10Select();
}
static void _Onc11SelectFnc(CWnd *pWnd){
	 ((CPhieuChamSocBenhNhanTruocPhauThuat*)pWnd)->Onc11Select();
}
static void _Onc12SelectFnc(CWnd *pWnd){
	 ((CPhieuChamSocBenhNhanTruocPhauThuat*)pWnd)->Onc12Select();
}
static void _Onc13SelectFnc(CWnd *pWnd){
	 ((CPhieuChamSocBenhNhanTruocPhauThuat*)pWnd)->Onc13Select();
}
static void _Onc14SelectFnc(CWnd *pWnd){
	 ((CPhieuChamSocBenhNhanTruocPhauThuat*)pWnd)->Onc14Select();
}
static void _Onc15SelectFnc(CWnd *pWnd){
	 ((CPhieuChamSocBenhNhanTruocPhauThuat*)pWnd)->Onc15Select();
}
static void _Onc16SelectFnc(CWnd *pWnd){
	 ((CPhieuChamSocBenhNhanTruocPhauThuat*)pWnd)->Onc16Select();
}
static void _Onc17SelectFnc(CWnd *pWnd){
	 ((CPhieuChamSocBenhNhanTruocPhauThuat*)pWnd)->Onc17Select();
}
static void _Onc18SelectFnc(CWnd *pWnd){
	 ((CPhieuChamSocBenhNhanTruocPhauThuat*)pWnd)->Onc18Select();
}
static void _Onc19SelectFnc(CWnd *pWnd){
	 ((CPhieuChamSocBenhNhanTruocPhauThuat*)pWnd)->Onc19Select();
}
static void _Onc20SelectFnc(CWnd *pWnd){
	 ((CPhieuChamSocBenhNhanTruocPhauThuat*)pWnd)->Onc20Select();
}
static void _Onc21SelectFnc(CWnd *pWnd){
	 ((CPhieuChamSocBenhNhanTruocPhauThuat*)pWnd)->Onc21Select();
}
static void _Onc22SelectFnc(CWnd *pWnd){
	 ((CPhieuChamSocBenhNhanTruocPhauThuat*)pWnd)->Onc22Select();
}
static void _Onc23SelectFnc(CWnd *pWnd){
	 ((CPhieuChamSocBenhNhanTruocPhauThuat*)pWnd)->Onc23Select();
}
static void _Onc24SelectFnc(CWnd *pWnd){
	 ((CPhieuChamSocBenhNhanTruocPhauThuat*)pWnd)->Onc24Select();
}
static void _Onc25SelectFnc(CWnd *pWnd){
	 ((CPhieuChamSocBenhNhanTruocPhauThuat*)pWnd)->Onc25Select();
}
static void _Onc26SelectFnc(CWnd *pWnd){
	 ((CPhieuChamSocBenhNhanTruocPhauThuat*)pWnd)->Onc26Select();
}
static void _Onc27SelectFnc(CWnd *pWnd){
	 ((CPhieuChamSocBenhNhanTruocPhauThuat*)pWnd)->Onc27Select();
}
static void _Onc28SelectFnc(CWnd *pWnd){
	 ((CPhieuChamSocBenhNhanTruocPhauThuat*)pWnd)->Onc28Select();
}
static void _Onc29SelectFnc(CWnd *pWnd){
	 ((CPhieuChamSocBenhNhanTruocPhauThuat*)pWnd)->Onc29Select();
}
static void _Onc30SelectFnc(CWnd *pWnd){
	 ((CPhieuChamSocBenhNhanTruocPhauThuat*)pWnd)->Onc30Select();
}
static void _Onc31SelectFnc(CWnd *pWnd){
	 ((CPhieuChamSocBenhNhanTruocPhauThuat*)pWnd)->Onc31Select();
}
static void _Onc32SelectFnc(CWnd *pWnd){
	 ((CPhieuChamSocBenhNhanTruocPhauThuat*)pWnd)->Onc32Select();
}
static void _Onc33SelectFnc(CWnd *pWnd){
	 ((CPhieuChamSocBenhNhanTruocPhauThuat*)pWnd)->Onc33Select();
}
static void _OnSaveSelectFnc(CWnd *pWnd){
	CPhieuChamSocBenhNhanTruocPhauThuat *pVw = (CPhieuChamSocBenhNhanTruocPhauThuat *)pWnd;
	pVw->OnSaveSelect();
} 
static void _OnCancelSelectFnc(CWnd *pWnd){
	CPhieuChamSocBenhNhanTruocPhauThuat *pVw = (CPhieuChamSocBenhNhanTruocPhauThuat *)pWnd;
	pVw->OnCancelSelect();
} 
static void _OnPrintSelectFnc(CWnd *pWnd){
	CPhieuChamSocBenhNhanTruocPhauThuat *pVw = (CPhieuChamSocBenhNhanTruocPhauThuat *)pWnd;
	pVw->OnPrintSelect();
} 
static int _OnAddPhieuChamSocBenhNhanTruocPhauThuatFnc(CWnd *pWnd){
	 return ((CPhieuChamSocBenhNhanTruocPhauThuat*)pWnd)->OnAddPhieuChamSocBenhNhanTruocPhauThuat();
} 
static int _OnEditPhieuChamSocBenhNhanTruocPhauThuatFnc(CWnd *pWnd){
	 return ((CPhieuChamSocBenhNhanTruocPhauThuat*)pWnd)->OnEditPhieuChamSocBenhNhanTruocPhauThuat();
} 
static int _OnDeletePhieuChamSocBenhNhanTruocPhauThuatFnc(CWnd *pWnd){
	 return ((CPhieuChamSocBenhNhanTruocPhauThuat*)pWnd)->OnDeletePhieuChamSocBenhNhanTruocPhauThuat();
} 
static int _OnSavePhieuChamSocBenhNhanTruocPhauThuatFnc(CWnd *pWnd){
	 return ((CPhieuChamSocBenhNhanTruocPhauThuat*)pWnd)->OnSavePhieuChamSocBenhNhanTruocPhauThuat();
} 
static int _OnCancelPhieuChamSocBenhNhanTruocPhauThuatFnc(CWnd *pWnd){
	 return ((CPhieuChamSocBenhNhanTruocPhauThuat*)pWnd)->OnCancelPhieuChamSocBenhNhanTruocPhauThuat();
} 
CPhieuChamSocBenhNhanTruocPhauThuat::CPhieuChamSocBenhNhanTruocPhauThuat(CWnd *pParent, int nMode, long nDocNo, int nRefIdx):
	CGuiDialog(pParent){
		CGuiDialog::SetMode(nMode);
		m_nDocumentNo = nDocNo;
		m_nRefIdx = nRefIdx;
	m_nDlgWidth = 1029;
	m_nDlgHeight = 773;
	SetDefaultValues();
}
CPhieuChamSocBenhNhanTruocPhauThuat::~CPhieuChamSocBenhNhanTruocPhauThuat(){
}
void CPhieuChamSocBenhNhanTruocPhauThuat::OnCreateComponents(){
	m_wndOperationNameLabel.Create(this, _T("Operation Name"), 5, 5, 155, 30);
	m_wndOperationName.Create(this,160, 5, 995, 30); 
	m_wndcontrol_1.Create(this, _T("I. Chuan bi ho so, xet nghiem"), 5, 35, 500, 660);
	m_wndcontrol_2.Create(this, _T("II. Chuan bi benh nhan"), 505, 35, 995, 660);
	m_wndcontrol_3.Create(this, _T("1. Thu tuc hanh chinh:"), 10, 60, 430, 85);
	m_wndcontrol_4.Create(this, _T("- Nop tien vien phi"), 10, 91, 430, 116);
	m_wndcontrol_5.Create(this, _T("- Giay gioi thieu, chuyen BHYT, photo the BHYT, duyet BHYT"), 10, 123, 430, 148);
	m_wndcontrol_6.Create(this, _T("- Viet giay cam doan phau thuat"), 10, 155, 430, 180);
	m_wndcontrol_7.Create(this, _T("2. Kiem tra xet nghiem mau:"), 9, 187, 430, 212);
	m_wndcontrol_8.Create(this, _T("- Cong thuc mau"), 10, 219, 430, 244);
	m_wndcontrol_9.Create(this, _T("- MD/MC, ti le Prothrombin, Fibrinogen, APTT"), 10, 251, 430, 276);
	m_wndcontrol_10.Create(this, _T("- Sinh hoa"), 10, 283, 430, 308);
	m_wndcontrol_11.Create(this, _T("- HIV, HBsAg, HCV"), 10, 315, 430, 340);
	m_wndcontrol_12.Create(this, _T("- Nhom mau"), 10, 347, 430, 372);
	m_wndcontrol_13.Create(this, _T("3. Xet nghiem nuoc tieu"), 10, 379, 430, 404);
	m_wndcontrol_14.Create(this, _T("4. Xet nghiem cac loai:"), 10, 411, 430, 436);
	m_wndcontrol_15.Create(this, _T("- Tim phoi"), 10, 443, 430, 468);
	m_wndcontrol_16.Create(this, _T("- CT Scanner"), 10, 475, 430, 500);
	m_wndcontrol_17.Create(this, _T("- MRI"), 10, 507, 430, 532);
	m_wndcontrol_18.Create(this, _T("5. Dien tim"), 10, 539, 430, 564);
	m_wndcontrol_19.Create(this, _T("6. Sieu am tim"), 10, 571, 430, 596);
	m_wndcontrol_20.Create(this, _T("7. Sieu am o bung"), 10, 601, 430, 626);
	m_wndcontrol_21.Create(this, _T("8. Kham chuyen khoa lien quan"), 10, 630, 430, 655);
	m_wndcontrol_22.Create(this, _T("1. Dong vien, giai thich benh nhan"), 510, 60, 930, 85);
	m_wndcontrol_23.Create(this, _T("2. Lay mach, nhiet do, HA"), 510, 90, 930, 115);
	m_wndcontrol_24.Create(this, _T("3. Ve sinh vung phau thuat:"), 510, 120, 930, 145);
	m_wndcontrol_25.Create(this, _T("- Cat toc vung phau thuat"), 510, 150, 930, 175);
	m_wndcontrol_26.Create(this, _T("- Cao long vung phau thuat (neu can)"), 510, 180, 930, 205);
	m_wndcontrol_27.Create(this, _T("- Sat khuan, bang vo khuan vung phau thuat"), 510, 210, 930, 235);
	m_wndcontrol_28.Create(this, _T("4. Ve sinh toan than:"), 510, 240, 930, 265);
	m_wndcontrol_29.Create(this, _T("- Thao trang suc, rang gia (neu co)"), 510, 270, 930, 295);
	m_wndcontrol_30.Create(this, _T("- Cat mong tay, mong chan"), 510, 300, 930, 325);
	m_wndcontrol_31.Create(this, _T("- Thut thao (theo y lenh)"), 510, 330, 930, 355);
	m_wndcontrol_32.Create(this, _T("- Tam, goi bang xa phong sat khuan"), 510, 360, 930, 385);
	m_wndcontrol_33.Create(this, _T("- Thay quan ao sach"), 510, 390, 930, 415);
	m_wndcontrol_34.Create(this, _T("5. Dam bao nuoi duong:"), 510, 420, 930, 445);
	m_wndcontrol_35.Create(this, _T("- Nhin an, nhin uong sang hom phau thuat"), 510, 450, 930, 475);
	m_wndcontrol_36.Create(this, _T("- Truyen dich cho nguoi benh (neu di phau thuat sau 10h)"), 510, 480, 930, 505);
	m_wndcontrol_37.Create(this, _T("6. Deo bang tay nhan dien benh nhan"), 510, 510, 930, 535);
	m_wndcontrol_38.Create(this, _T("7. Van chuyen bang xe theo quy dinh"), 510, 540, 930, 565);
	m_wndcontrol_39.Create(this, _T("8. Lay mau cheo (khi co chi dinh)"), 510, 570, 930, 595);
	m_wndcontrol_40.Create(this, _T("9. Danh dau khang sinh du phong"), 510, 600, 930, 625);
	m_wndcontrol_41.Create(this, _T("10. Cong viec khac"), 510, 630, 930, 655);
	m_wndc1.Create(this, _T(""), 450, 91, 490, 116);
	m_wndc2.Create(this, _T(""), 450, 123, 490, 148);
	m_wndc3.Create(this, _T(""), 450, 155, 490, 180);
	m_wndc4.Create(this, _T(""), 450, 219, 490, 244);
	m_wndc5.Create(this, _T(""), 450, 251, 490, 276);
	m_wndc6.Create(this, _T(""), 450, 283, 490, 308);
	m_wndc7.Create(this, _T(""), 450, 315, 490, 340);
	m_wndc8.Create(this, _T(""), 450, 347, 490, 372);
	m_wndc9.Create(this, _T(""), 450, 379, 490, 404);
	m_wndc10.Create(this, _T(""), 450, 443, 490, 468);
	m_wndc11.Create(this, _T(""), 450, 475, 490, 500);
	m_wndc12.Create(this, _T(""), 450, 507, 490, 532);
	m_wndc13.Create(this, _T(""), 450, 539, 490, 564);
	m_wndc14.Create(this, _T(""), 450, 571, 490, 596);
	m_wndc15.Create(this, _T(""), 450, 601, 490, 626);
	m_wndc16.Create(this, _T(""), 450, 630, 490, 655);
	m_wndc17.Create(this, _T(""), 945, 60, 985, 85);
	m_wndc18.Create(this, _T(""), 945, 90, 985, 115);
	m_wndc19.Create(this, _T(""), 945, 150, 985, 175);
	m_wndc20.Create(this, _T(""), 945, 180, 985, 205);
	m_wndc21.Create(this, _T(""), 945, 210, 985, 235);
	m_wndc22.Create(this, _T(""), 945, 270, 985, 295);
	m_wndc23.Create(this, _T(""), 945, 300, 985, 325);
	m_wndc24.Create(this, _T(""), 945, 330, 985, 355);
	m_wndc25.Create(this, _T(""), 945, 360, 985, 385);
	m_wndc26.Create(this, _T(""), 945, 390, 985, 415);
	m_wndc27.Create(this, _T(""), 945, 450, 985, 475);
	m_wndc28.Create(this, _T(""), 945, 480, 985, 505);
	m_wndc29.Create(this, _T(""), 945, 510, 985, 535);
	m_wndc30.Create(this, _T(""), 945, 540, 985, 565);
	m_wndc31.Create(this, _T(""), 945, 570, 985, 595);
	m_wndc32.Create(this, _T(""), 945, 600, 985, 625);
	m_wndc33.Create(this, _T(""), 945, 630, 985, 655);
	m_wndSave.Create(this, _T("Save"), 745, 665, 825, 690);
	m_wndPrint.Create(this, _T("Print"), 830, 665, 910, 690);
	m_wndCancel.Create(this, _T("Close"), 915, 666, 995, 691);

}
void CPhieuChamSocBenhNhanTruocPhauThuat::OnInitializeComponents(){
	CMainFrame *pMF = (CMainFrame*) AfxGetMainWnd();
	//m_wndOperationName.SetCheckValue(true);
	//m_wndOperationName.LimitText(35);


	m_wndOperationName.InsertColumn(0, _T("Order No"), CFMT_TEXT, 70);
	m_wndOperationName.InsertColumn(1, _T("Name"), CFMT_TEXT, 700);
	m_wndOperationName.InsertColumn(2, _T("Order Date"), CFMT_DATETIME, 150);
	m_wndOperationName.InsertColumn(3, _T("Status"), CFMT_TEXT, 50);
	m_wndOperationName.InsertColumn(4, _T("Dept"), CFMT_TEXT, 80);

}
void CPhieuChamSocBenhNhanTruocPhauThuat::OnSetWindowEvents(){
	CMainFrame *pMF = (CMainFrame*) AfxGetMainWnd();
	m_wndOperationName.SetEvent(WE_SELENDOK, _OnOperationNameSelendokFnc);
	//m_wndOperationName.SetEvent(WE_SETFOCUS, _OnOperationNameSetfocusFnc);
	//m_wndOperationName.SetEvent(WE_KILLFOCUS, _OnOperationNameKillfocusFnc);
	m_wndOperationName.SetEvent(WE_SELCHANGE, _OnOperationNameSelectChangeFnc);
	m_wndOperationName.SetEvent(WE_LOADDATA, _OnOperationNameLoadDataFnc);
	//m_wndOperationName.SetEvent(WE_ADDNEW, _OnOperationNameAddNewFnc);
	m_wndc1.SetEvent(WE_CLICK, _Onc1SelectFnc);
	m_wndc2.SetEvent(WE_CLICK, _Onc2SelectFnc);
	m_wndc3.SetEvent(WE_CLICK, _Onc3SelectFnc);
	m_wndc4.SetEvent(WE_CLICK, _Onc4SelectFnc);
	m_wndc5.SetEvent(WE_CLICK, _Onc5SelectFnc);
	m_wndc6.SetEvent(WE_CLICK, _Onc6SelectFnc);
	m_wndc7.SetEvent(WE_CLICK, _Onc7SelectFnc);
	m_wndc8.SetEvent(WE_CLICK, _Onc8SelectFnc);
	m_wndc9.SetEvent(WE_CLICK, _Onc9SelectFnc);
	m_wndc10.SetEvent(WE_CLICK, _Onc10SelectFnc);
	m_wndc11.SetEvent(WE_CLICK, _Onc11SelectFnc);
	m_wndc12.SetEvent(WE_CLICK, _Onc12SelectFnc);
	m_wndc13.SetEvent(WE_CLICK, _Onc13SelectFnc);
	m_wndc14.SetEvent(WE_CLICK, _Onc14SelectFnc);
	m_wndc15.SetEvent(WE_CLICK, _Onc15SelectFnc);
	m_wndc16.SetEvent(WE_CLICK, _Onc16SelectFnc);
	m_wndc17.SetEvent(WE_CLICK, _Onc17SelectFnc);
	m_wndc18.SetEvent(WE_CLICK, _Onc18SelectFnc);
	m_wndc19.SetEvent(WE_CLICK, _Onc19SelectFnc);
	m_wndc20.SetEvent(WE_CLICK, _Onc20SelectFnc);
	m_wndc21.SetEvent(WE_CLICK, _Onc21SelectFnc);
	m_wndc22.SetEvent(WE_CLICK, _Onc22SelectFnc);
	m_wndc23.SetEvent(WE_CLICK, _Onc23SelectFnc);
	m_wndc24.SetEvent(WE_CLICK, _Onc24SelectFnc);
	m_wndc25.SetEvent(WE_CLICK, _Onc25SelectFnc);
	m_wndc26.SetEvent(WE_CLICK, _Onc26SelectFnc);
	m_wndc27.SetEvent(WE_CLICK, _Onc27SelectFnc);
	m_wndc28.SetEvent(WE_CLICK, _Onc28SelectFnc);
	m_wndc29.SetEvent(WE_CLICK, _Onc29SelectFnc);
	m_wndc30.SetEvent(WE_CLICK, _Onc30SelectFnc);
	m_wndc31.SetEvent(WE_CLICK, _Onc31SelectFnc);
	m_wndc32.SetEvent(WE_CLICK, _Onc32SelectFnc);
	m_wndc33.SetEvent(WE_CLICK, _Onc33SelectFnc);
	m_wndSave.SetEvent(WE_CLICK, _OnSaveSelectFnc);
	m_wndCancel.SetEvent(WE_CLICK, _OnCancelSelectFnc);
	m_wndPrint.SetEvent(WE_CLICK, _OnPrintSelectFnc);
	int nMode = GetMode();

// 	if(nMode == VM_VIEW || nMode == VM_EDIT)
// 		GetDataToScreen();
	
	SetMode(nMode);


}
void CPhieuChamSocBenhNhanTruocPhauThuat::OnDoDataExchange(CDataExchange* pDX){
	DDX_TextEx(pDX, m_wndOperationName.GetDlgCtrlID(), m_szOperationNameKey);
	DDX_Check(pDX, m_wndc1.GetDlgCtrlID(), m_bc1);
	DDX_Check(pDX, m_wndc2.GetDlgCtrlID(), m_bc2);
	DDX_Check(pDX, m_wndc3.GetDlgCtrlID(), m_bc3);
	DDX_Check(pDX, m_wndc4.GetDlgCtrlID(), m_bc4);
	DDX_Check(pDX, m_wndc5.GetDlgCtrlID(), m_bc5);
	DDX_Check(pDX, m_wndc6.GetDlgCtrlID(), m_bc6);
	DDX_Check(pDX, m_wndc7.GetDlgCtrlID(), m_bc7);
	DDX_Check(pDX, m_wndc8.GetDlgCtrlID(), m_bc8);
	DDX_Check(pDX, m_wndc9.GetDlgCtrlID(), m_bc9);
	DDX_Check(pDX, m_wndc10.GetDlgCtrlID(), m_bc10);
	DDX_Check(pDX, m_wndc11.GetDlgCtrlID(), m_bc11);
	DDX_Check(pDX, m_wndc12.GetDlgCtrlID(), m_bc12);
	DDX_Check(pDX, m_wndc13.GetDlgCtrlID(), m_bc13);
	DDX_Check(pDX, m_wndc14.GetDlgCtrlID(), m_bc14);
	DDX_Check(pDX, m_wndc15.GetDlgCtrlID(), m_bc15);
	DDX_Check(pDX, m_wndc16.GetDlgCtrlID(), m_bc16);
	DDX_Check(pDX, m_wndc17.GetDlgCtrlID(), m_bc17);
	DDX_Check(pDX, m_wndc18.GetDlgCtrlID(), m_bc18);
	DDX_Check(pDX, m_wndc19.GetDlgCtrlID(), m_bc19);
	DDX_Check(pDX, m_wndc20.GetDlgCtrlID(), m_bc20);
	DDX_Check(pDX, m_wndc21.GetDlgCtrlID(), m_bc21);
	DDX_Check(pDX, m_wndc22.GetDlgCtrlID(), m_bc22);
	DDX_Check(pDX, m_wndc23.GetDlgCtrlID(), m_bc23);
	DDX_Check(pDX, m_wndc24.GetDlgCtrlID(), m_bc24);
	DDX_Check(pDX, m_wndc25.GetDlgCtrlID(), m_bc25);
	DDX_Check(pDX, m_wndc26.GetDlgCtrlID(), m_bc26);
	DDX_Check(pDX, m_wndc27.GetDlgCtrlID(), m_bc27);
	DDX_Check(pDX, m_wndc28.GetDlgCtrlID(), m_bc28);
	DDX_Check(pDX, m_wndc29.GetDlgCtrlID(), m_bc29);
	DDX_Check(pDX, m_wndc30.GetDlgCtrlID(), m_bc30);
	DDX_Check(pDX, m_wndc31.GetDlgCtrlID(), m_bc31);
	DDX_Check(pDX, m_wndc32.GetDlgCtrlID(), m_bc32);
	DDX_Check(pDX, m_wndc33.GetDlgCtrlID(), m_bc33);

}
void CPhieuChamSocBenhNhanTruocPhauThuat::UpdateJson(BOOL bSave){
	if(bSave)
	{
			
	m_jData[_T("c1")] =  m_bc1;
	m_jData[_T("c2")] =  m_bc2;
	m_jData[_T("c3")] =  m_bc3;
	m_jData[_T("c4")] =  m_bc4;
	m_jData[_T("c5")] =  m_bc5;
	m_jData[_T("c6")] =  m_bc6;
	m_jData[_T("c7")] =  m_bc7;
	m_jData[_T("c8")] =  m_bc8;
	m_jData[_T("c9")] =  m_bc9;
	m_jData[_T("c10")] =  m_bc10;
	m_jData[_T("c11")] =  m_bc11;
	m_jData[_T("c12")] =  m_bc12;
	m_jData[_T("c13")] =  m_bc13;
	m_jData[_T("c14")] =  m_bc14;
	m_jData[_T("c15")] =  m_bc15;
	m_jData[_T("c16")] =  m_bc16;
	m_jData[_T("c17")] =  m_bc17;
	m_jData[_T("c18")] =  m_bc18;
	m_jData[_T("c19")] =  m_bc19;
	m_jData[_T("c20")] =  m_bc20;
	m_jData[_T("c21")] =  m_bc21;
	m_jData[_T("c22")] =  m_bc22;
	m_jData[_T("c23")] =  m_bc23;
	m_jData[_T("c24")] =  m_bc24;
	m_jData[_T("c25")] =  m_bc25;
	m_jData[_T("c26")] =  m_bc26;
	m_jData[_T("c27")] =  m_bc27;
	m_jData[_T("c28")] =  m_bc28;
	m_jData[_T("c29")] =  m_bc29;
	m_jData[_T("c30")] =  m_bc30;
	m_jData[_T("c31")] =  m_bc31;
	m_jData[_T("c32")] =  m_bc32;
	m_jData[_T("c33")] =  m_bc33;
	}
	else
	{
			
	m_jData[_T("c1")].GetValue(m_bc1);
	m_jData[_T("c2")].GetValue(m_bc2);
	m_jData[_T("c3")].GetValue(m_bc3);
	m_jData[_T("c4")].GetValue(m_bc4);
	m_jData[_T("c5")].GetValue(m_bc5);
	m_jData[_T("c6")].GetValue(m_bc6);
	m_jData[_T("c7")].GetValue(m_bc7);
	m_jData[_T("c8")].GetValue(m_bc8);
	m_jData[_T("c9")].GetValue(m_bc9);
	m_jData[_T("c10")].GetValue(m_bc10);
	m_jData[_T("c11")].GetValue(m_bc11);
	m_jData[_T("c12")].GetValue(m_bc12);
	m_jData[_T("c13")].GetValue(m_bc13);
	m_jData[_T("c14")].GetValue(m_bc14);
	m_jData[_T("c15")].GetValue(m_bc15);
	m_jData[_T("c16")].GetValue(m_bc16);
	m_jData[_T("c17")].GetValue(m_bc17);
	m_jData[_T("c18")].GetValue(m_bc18);
	m_jData[_T("c19")].GetValue(m_bc19);
	m_jData[_T("c20")].GetValue(m_bc20);
	m_jData[_T("c21")].GetValue(m_bc21);
	m_jData[_T("c22")].GetValue(m_bc22);
	m_jData[_T("c23")].GetValue(m_bc23);
	m_jData[_T("c24")].GetValue(m_bc24);
	m_jData[_T("c25")].GetValue(m_bc25);
	m_jData[_T("c26")].GetValue(m_bc26);
	m_jData[_T("c27")].GetValue(m_bc27);
	m_jData[_T("c28")].GetValue(m_bc28);
	m_jData[_T("c29")].GetValue(m_bc29);
	m_jData[_T("c30")].GetValue(m_bc30);
	m_jData[_T("c31")].GetValue(m_bc31);
	m_jData[_T("c32")].GetValue(m_bc32);
	m_jData[_T("c33")].GetValue(m_bc33);
	}

}
void CPhieuChamSocBenhNhanTruocPhauThuat::GetDataToScreen(){
	CMainFrame *pMF = (CMainFrame*) AfxGetMainWnd();
	UpdateData(TRUE);
	CRecord rs(&pMF->m_db);
	CString szSQL;
	szSQL.Format(_T("SELECT * FROM hms_doc_emr_view WHERE hde_docno=%ld and hde_refidx=%ld and hde_name ='%s' and hde_type='BEFOREOPT_ORDER' "), m_nDocumentNo, m_nRefIdx, m_szOperationNameKey);
	rs.ExecSQL(szSQL);

	if(!rs.IsEOF())
	{
		CString szData;
		rs.GetValue(_T("hde_value"), szData);
		m_jData.Parse(szData);
		UpdateJson(FALSE);
	}
	else
	{
		SetDefaultValues();
	}
	UpdateData(FALSE);

}
void CPhieuChamSocBenhNhanTruocPhauThuat::GetScreenToData(){
	CMainFrame *pMF = (CMainFrame*) AfxGetMainWnd();
	UpdateJson(TRUE);

}
void CPhieuChamSocBenhNhanTruocPhauThuat::SetDefaultValues(){

	m_bc1=FALSE;
	m_bc2=FALSE;
	m_bc3=FALSE;
	m_bc4=FALSE;
	m_bc5=FALSE;
	m_bc6=FALSE;
	m_bc7=FALSE;
	m_bc8=FALSE;
	m_bc9=FALSE;
	m_bc10=FALSE;
	m_bc11=FALSE;
	m_bc12=FALSE;
	m_bc13=FALSE;
	m_bc14=FALSE;
	m_bc15=FALSE;
	m_bc16=FALSE;
	m_bc17=FALSE;
	m_bc18=FALSE;
	m_bc19=FALSE;
	m_bc20=FALSE;
	m_bc21=FALSE;
	m_bc22=FALSE;
	m_bc23=FALSE;
	m_bc24=FALSE;
	m_bc25=FALSE;
	m_bc26=FALSE;
	m_bc27=FALSE;
	m_bc28=FALSE;
	m_bc29=FALSE;
	m_bc30=FALSE;
	m_bc31=FALSE;
	m_bc32=FALSE;
	m_bc33=FALSE;

}
int CPhieuChamSocBenhNhanTruocPhauThuat::SetMode(int nMode){
 		int nOldMode = GetMode();
 		CGuiDialog::SetMode(nMode);
 		CMainFrame *pMF = (CMainFrame *) AfxGetMainWnd();
 		CString szSQL;
 		CRecord rs(&pMF->m_db);
  		switch(nMode){
 		case VM_ADD: 
 			EnableControls(TRUE);
 			EnableButtons(TRUE, 3, 4, -1);
 			SetDefaultValues();
 			break;
 		case VM_EDIT: 
 			EnableControls(TRUE);
 			EnableButtons(TRUE, 0, 1, 2, 4, -1);
 			break;
 		case VM_VIEW: 
 			EnableControls(FALSE);
 			EnableButtons(FALSE, 3, 4, -1);
 			break;
 		case VM_NONE: 
 			EnableControls(FALSE);
 			EnableButtons(TRUE, 0, 6, -1);
 			SetDefaultValues();
 			break;
 		};
 		UpdateData(FALSE);
 		return nOldMode;
}
void CPhieuChamSocBenhNhanTruocPhauThuat::OnOperationNameSelectChange(int nOldItemSel, int nNewItemSel){
	CMainFrame *pMF = (CMainFrame*) AfxGetMainWnd();
	
} 
void CPhieuChamSocBenhNhanTruocPhauThuat::OnOperationNameSelendok(){
	GetDataToScreen();
}
/*void CPhieuChamSocBenhNhanTruocPhauThuat::OnOperationNameSetfocus(){
	
}*/
/*void CPhieuChamSocBenhNhanTruocPhauThuat::OnOperationNameKillfocus(){
	
}*/
long CPhieuChamSocBenhNhanTruocPhauThuat::OnOperationNameLoadData(){
	CMainFrame *pMF = (CMainFrame*) AfxGetMainWnd();
	CRecord rs(&pMF->m_db);
	CString szSQL, szWhere;
	
	m_wndOperationName.DeleteAllItems(); 
	int nCount = 0;
	szSQL.Format(_T(" SELECT") \
		_T("   ho_idx AS id,") \
		_T("   ho_orderdate AS orderdate,") \
		_T("   hfl_name AS name,") \
		_T("   ho_status AS status, ho_deptid") \
		_T(" FROM hms_operation") \
		_T(" LEFT JOIN sys_dept on (sd_id = ho_deptid) ") \
		_T(" LEFT JOIN hms_fee_list") \
		_T(" ON(ho_itemid   = hfl_feeid)") \
		_T(" WHERE ho_docno = %ld ") \
		_T(" AND ho_refidx  >= 0 and sd_type <>'KB'  ") \
		_T(" ORDER BY ho_idx"), m_nDocumentNo);
	nCount = rs.ExecSQL(szSQL);
	while(!rs.IsEOF()){ 
		m_wndOperationName.AddItems(
			rs.GetValue(_T("id")), 
			rs.GetValue(_T("name")),
			rs.GetValue(_T("orderdate")), 
			rs.GetValue(_T("status")), 
			rs.GetValue(_T("ho_deptid")),
			NULL);
		rs.MoveNext();
	}
	return nCount;
}
/*void CPhieuChamSocBenhNhanTruocPhauThuat::OnOperationNameAddNew(){
	CMainFrame *pMF = (CMainFrame*) AfxGetMainWnd();
	
} */
	void CPhieuChamSocBenhNhanTruocPhauThuat::Onc1Select(){
	CMainFrame *pMF = (CMainFrame*) AfxGetMainWnd();
	
}
	void CPhieuChamSocBenhNhanTruocPhauThuat::Onc2Select(){
	CMainFrame *pMF = (CMainFrame*) AfxGetMainWnd();
	
}
	void CPhieuChamSocBenhNhanTruocPhauThuat::Onc3Select(){
	CMainFrame *pMF = (CMainFrame*) AfxGetMainWnd();
	
}
	void CPhieuChamSocBenhNhanTruocPhauThuat::Onc4Select(){
	CMainFrame *pMF = (CMainFrame*) AfxGetMainWnd();
	
}
	void CPhieuChamSocBenhNhanTruocPhauThuat::Onc5Select(){
	CMainFrame *pMF = (CMainFrame*) AfxGetMainWnd();
	
}
	void CPhieuChamSocBenhNhanTruocPhauThuat::Onc6Select(){
	CMainFrame *pMF = (CMainFrame*) AfxGetMainWnd();
	
}
	void CPhieuChamSocBenhNhanTruocPhauThuat::Onc7Select(){
	CMainFrame *pMF = (CMainFrame*) AfxGetMainWnd();
	
}
	void CPhieuChamSocBenhNhanTruocPhauThuat::Onc8Select(){
	CMainFrame *pMF = (CMainFrame*) AfxGetMainWnd();
	
}
	void CPhieuChamSocBenhNhanTruocPhauThuat::Onc9Select(){
	CMainFrame *pMF = (CMainFrame*) AfxGetMainWnd();
	
}
	void CPhieuChamSocBenhNhanTruocPhauThuat::Onc10Select(){
	CMainFrame *pMF = (CMainFrame*) AfxGetMainWnd();
	
}
	void CPhieuChamSocBenhNhanTruocPhauThuat::Onc11Select(){
	CMainFrame *pMF = (CMainFrame*) AfxGetMainWnd();
	
}
	void CPhieuChamSocBenhNhanTruocPhauThuat::Onc12Select(){
	CMainFrame *pMF = (CMainFrame*) AfxGetMainWnd();
	
}
	void CPhieuChamSocBenhNhanTruocPhauThuat::Onc13Select(){
	CMainFrame *pMF = (CMainFrame*) AfxGetMainWnd();
	
}
	void CPhieuChamSocBenhNhanTruocPhauThuat::Onc14Select(){
	CMainFrame *pMF = (CMainFrame*) AfxGetMainWnd();
	
}
	void CPhieuChamSocBenhNhanTruocPhauThuat::Onc15Select(){
	CMainFrame *pMF = (CMainFrame*) AfxGetMainWnd();
	
}
	void CPhieuChamSocBenhNhanTruocPhauThuat::Onc16Select(){
	CMainFrame *pMF = (CMainFrame*) AfxGetMainWnd();
	
}
	void CPhieuChamSocBenhNhanTruocPhauThuat::Onc17Select(){
	CMainFrame *pMF = (CMainFrame*) AfxGetMainWnd();
	
}
	void CPhieuChamSocBenhNhanTruocPhauThuat::Onc18Select(){
	CMainFrame *pMF = (CMainFrame*) AfxGetMainWnd();
	
}
	void CPhieuChamSocBenhNhanTruocPhauThuat::Onc19Select(){
	CMainFrame *pMF = (CMainFrame*) AfxGetMainWnd();
	
}
	void CPhieuChamSocBenhNhanTruocPhauThuat::Onc20Select(){
	CMainFrame *pMF = (CMainFrame*) AfxGetMainWnd();
	
}
	void CPhieuChamSocBenhNhanTruocPhauThuat::Onc21Select(){
	CMainFrame *pMF = (CMainFrame*) AfxGetMainWnd();
	
}
	void CPhieuChamSocBenhNhanTruocPhauThuat::Onc22Select(){
	CMainFrame *pMF = (CMainFrame*) AfxGetMainWnd();
	
}
	void CPhieuChamSocBenhNhanTruocPhauThuat::Onc23Select(){
	CMainFrame *pMF = (CMainFrame*) AfxGetMainWnd();
	
}
	void CPhieuChamSocBenhNhanTruocPhauThuat::Onc24Select(){
	CMainFrame *pMF = (CMainFrame*) AfxGetMainWnd();
	
}
	void CPhieuChamSocBenhNhanTruocPhauThuat::Onc25Select(){
	CMainFrame *pMF = (CMainFrame*) AfxGetMainWnd();
	
}
	void CPhieuChamSocBenhNhanTruocPhauThuat::Onc26Select(){
	CMainFrame *pMF = (CMainFrame*) AfxGetMainWnd();
	
}
	void CPhieuChamSocBenhNhanTruocPhauThuat::Onc27Select(){
	CMainFrame *pMF = (CMainFrame*) AfxGetMainWnd();
	
}
	void CPhieuChamSocBenhNhanTruocPhauThuat::Onc28Select(){
	CMainFrame *pMF = (CMainFrame*) AfxGetMainWnd();
	
}
	void CPhieuChamSocBenhNhanTruocPhauThuat::Onc29Select(){
	CMainFrame *pMF = (CMainFrame*) AfxGetMainWnd();
	
}
	void CPhieuChamSocBenhNhanTruocPhauThuat::Onc30Select(){
	CMainFrame *pMF = (CMainFrame*) AfxGetMainWnd();
	
}
	void CPhieuChamSocBenhNhanTruocPhauThuat::Onc31Select(){
	CMainFrame *pMF = (CMainFrame*) AfxGetMainWnd();
	
}
	void CPhieuChamSocBenhNhanTruocPhauThuat::Onc32Select(){
	CMainFrame *pMF = (CMainFrame*) AfxGetMainWnd();
	
}
	void CPhieuChamSocBenhNhanTruocPhauThuat::Onc33Select(){
	CMainFrame *pMF = (CMainFrame*) AfxGetMainWnd();
	
}
void CPhieuChamSocBenhNhanTruocPhauThuat::OnSaveSelect(){
	CMainFrame *pMF = (CMainFrame*) AfxGetMainWnd();
	if(OnSavePhieuChamSocBenhNhanTruocPhauThuat() > 0)
	{
		ShowMessageBox(_T("Data saved"));
	}

} 
void CPhieuChamSocBenhNhanTruocPhauThuat::OnCancelSelect(){
	CMainFrame *pMF = (CMainFrame*) AfxGetMainWnd();
	CGuiDialog::OnCancel();
} 
void CPhieuChamSocBenhNhanTruocPhauThuat::OnPrintSelect(){
	CMainFrame *pMF = (CMainFrame*) AfxGetMainWnd();
	CReport rpt;
	CRecord rs(&pMF->m_db);
	CReportSection *rptHeader = NULL;
	CString szSQL, tmpStr, szDate, szWhere, szDoctorDept, szSubSelect;
	int nIdx = 1;
	if (!rpt.Init(_T("Reports\\HMS\\PHIEUCHAMSOCBENHNHANTRUOCPT.RPT")))
		return;

	szSQL.Format(_T(" SELECT ") \
		_T(" get_patientname(htr_docno) AS patientname,") \
		_T(" CAST(TO_CHAR(hp_birthdate, 'YYYY') as integer) as birthyear,") \
		_T(" htr_admitdate AS admitdate,") \
		_T(" htr_maindisease AS maindisease") \
		_T(" FROM hms_treatment_record") \
		_T(" LEFT JOIN hms_patient ON(htr_patientno = hp_patientno)") \
		_T(" WHERE htr_docno = %ld AND htr_idx = %ld"), m_nDocumentNo, m_nRefIdx);

	rs.ExecSQL(szSQL);
	rptHeader = rpt.GetReportHeader();

		rptHeader->SetValue(_T("HealthService"), pMF->m_CompanyInfo.sc_pname);
		rptHeader->SetValue(_T("HospitalName"), pMF->m_CompanyInfo.sc_name);
		rptHeader->SetValue(_T("Department"), pMF->GetDepartmentName(pMF->GetDepartmentID()));
		tmpStr.Format(_T("%ld"), m_nDocumentNo);
		rptHeader->SetValue(_T("DocumentNo"), tmpStr);
		rptHeader->SetValue(_T("PATIENTNAME"), rs.GetValue(_T("patientname")));
		rptHeader->SetValue(_T("BirthYear"), rs.GetValue(_T("birthyear")));
		rptHeader->SetValue(_T("Diagnostic"), rs.GetValue(_T("maindisease")));
		rs.GetValue(_T("admitdate"), tmpStr);
		rptHeader->SetValue(_T("AdmitDate"), CDateTime::Convert(tmpStr, yyyymmdd|hhmmss, ddmmyyyy|hhmmss));

		if(m_bc1 == 1)
			tmpStr.Format(_T("X"));
		else
			tmpStr.Format(_T(" "));
		rptHeader->SetValue(_T("c1"), tmpStr);
		if(m_bc2 == 1)
			tmpStr.Format(_T("X"));
		else
			tmpStr.Format(_T(" "));
		rptHeader->SetValue(_T("c2"), tmpStr);
		if(m_bc3 == 1)
			tmpStr.Format(_T("X"));
		else
			tmpStr.Format(_T(" "));
		rptHeader->SetValue(_T("c3"), tmpStr);
		if(m_bc4 == 1)
			tmpStr.Format(_T("X"));
		else
			tmpStr.Format(_T(" "));
		rptHeader->SetValue(_T("c4"), tmpStr);
		if(m_bc5 == 1)
			tmpStr.Format(_T("X"));
		else
			tmpStr.Format(_T(" "));
		rptHeader->SetValue(_T("c5"), tmpStr);

		if(m_bc6 == 1)
			tmpStr.Format(_T("X"));
		else
			tmpStr.Format(_T(" "));
		rptHeader->SetValue(_T("c6"), tmpStr);
		if(m_bc7 == 1)
			tmpStr.Format(_T("X"));
		else
			tmpStr.Format(_T(" "));
		rptHeader->SetValue(_T("c7"), tmpStr);
		if(m_bc8 == 1)
			tmpStr.Format(_T("X"));
		else
			tmpStr.Format(_T(" "));
		rptHeader->SetValue(_T("c8"), tmpStr);
		if(m_bc9 == 1)
			tmpStr.Format(_T("X"));
		else
			tmpStr.Format(_T(" "));
		rptHeader->SetValue(_T("c9"), tmpStr);
		if(m_bc10 == 1)
			tmpStr.Format(_T("X"));
		else
			tmpStr.Format(_T(" "));
		rptHeader->SetValue(_T("c10"), tmpStr);

		if(m_bc11 == 1)
			tmpStr.Format(_T("X"));
		else
			tmpStr.Format(_T(" "));
		rptHeader->SetValue(_T("c11"), tmpStr);
		if(m_bc12 == 1)
			tmpStr.Format(_T("X"));
		else
			tmpStr.Format(_T(" "));
		rptHeader->SetValue(_T("c12"), tmpStr);
		if(m_bc13 == 1)
			tmpStr.Format(_T("X"));
		else
			tmpStr.Format(_T(" "));
		rptHeader->SetValue(_T("c13"), tmpStr);
		if(m_bc14 == 1)
			tmpStr.Format(_T("X"));
		else
			tmpStr.Format(_T(" "));
		rptHeader->SetValue(_T("c14"), tmpStr);
		if(m_bc15 == 1)
			tmpStr.Format(_T("X"));
		else
			tmpStr.Format(_T(" "));
		rptHeader->SetValue(_T("c15"), tmpStr);

		if(m_bc16 == 1)
			tmpStr.Format(_T("X"));
		else
			tmpStr.Format(_T(" "));
		rptHeader->SetValue(_T("c16"), tmpStr);
		if(m_bc17 == 1)
			tmpStr.Format(_T("X"));
		else
			tmpStr.Format(_T(" "));
		rptHeader->SetValue(_T("c17"), tmpStr);
		if(m_bc18 == 1)
			tmpStr.Format(_T("X"));
		else
			tmpStr.Format(_T(" "));
		rptHeader->SetValue(_T("c18"), tmpStr);
		if(m_bc19 == 1)
			tmpStr.Format(_T("X"));
		else
			tmpStr.Format(_T(" "));
		rptHeader->SetValue(_T("c19"), tmpStr);
		if(m_bc20 == 1)
			tmpStr.Format(_T("X"));
		else
			tmpStr.Format(_T(" "));
		rptHeader->SetValue(_T("c20"), tmpStr);

		if(m_bc21 == 1)
			tmpStr.Format(_T("X"));
		else
			tmpStr.Format(_T(" "));
		rptHeader->SetValue(_T("c21"), tmpStr);
		if(m_bc22 == 1)
			tmpStr.Format(_T("X"));
		else
			tmpStr.Format(_T(" "));
		rptHeader->SetValue(_T("c22"), tmpStr);
		if(m_bc23 == 1)
			tmpStr.Format(_T("X"));
		else
			tmpStr.Format(_T(" "));
		rptHeader->SetValue(_T("c23"), tmpStr);
		if(m_bc24 == 1)
			tmpStr.Format(_T("X"));
		else
			tmpStr.Format(_T(" "));
		rptHeader->SetValue(_T("c24"), tmpStr);
		if(m_bc25 == 1)
			tmpStr.Format(_T("X"));
		else
			tmpStr.Format(_T(" "));
		rptHeader->SetValue(_T("c25"), tmpStr);

		if(m_bc26 == 1)
			tmpStr.Format(_T("X"));
		else
			tmpStr.Format(_T(" "));
		rptHeader->SetValue(_T("c26"), tmpStr);
		if(m_bc27 == 1)
			tmpStr.Format(_T("X"));
		else
			tmpStr.Format(_T(" "));
		rptHeader->SetValue(_T("c27"), tmpStr);
		if(m_bc28 == 1)
			tmpStr.Format(_T("X"));
		else
			tmpStr.Format(_T(" "));
		rptHeader->SetValue(_T("c28"), tmpStr);
		if(m_bc29 == 1)
			tmpStr.Format(_T("X"));
		else
			tmpStr.Format(_T(" "));
		rptHeader->SetValue(_T("c29"), tmpStr);
		if(m_bc30 == 1)
			tmpStr.Format(_T("X"));
		else
			tmpStr.Format(_T(" "));
		rptHeader->SetValue(_T("c30"), tmpStr);

		if(m_bc31 == 1)
			tmpStr.Format(_T("X"));
		else
			tmpStr.Format(_T(" "));
		rptHeader->SetValue(_T("c31"), tmpStr);
		if(m_bc32 == 1)
			tmpStr.Format(_T("X"));
		else
			tmpStr.Format(_T(" "));
		rptHeader->SetValue(_T("c32"), tmpStr);
		if(m_bc33 == 1)
			tmpStr.Format(_T("X"));
		else
			tmpStr.Format(_T(" "));
		rptHeader->SetValue(_T("c33"), tmpStr);

	szDate = pMF->GetSysDate();
	tmpStr.Format(rpt.GetReportFooter()->GetValue(_T("PrintDate")), szDate.Mid(8, 2), szDate.Mid(5, 2), szDate.Left(4));
	rpt.GetReportFooter()->SetValue(_T("PrintDate"), tmpStr);
	rpt.PrintPreview();
} 
int CPhieuChamSocBenhNhanTruocPhauThuat::OnAddPhieuChamSocBenhNhanTruocPhauThuat(){
 	if(GetMode() == VM_ADD || GetMode() == VM_EDIT)
 		return -1;
 	CMainFrame *pMF = (CMainFrame *) AfxGetMainWnd();
 	SetMode(VM_ADD);
	return 0;
}
int CPhieuChamSocBenhNhanTruocPhauThuat::OnEditPhieuChamSocBenhNhanTruocPhauThuat(){
 	if(GetMode() != VM_VIEW)
 		return -1;
 	CMainFrame *pMF = (CMainFrame *) AfxGetMainWnd();
 	SetMode(VM_EDIT);
	return 0;  
}
int CPhieuChamSocBenhNhanTruocPhauThuat::OnDeletePhieuChamSocBenhNhanTruocPhauThuat(){
 	if(GetMode() != VM_VIEW)
 		return -1;
 	CMainFrame *pMF = (CMainFrame *)AfxGetMainWnd();
 	CString szSQL;
 	if(ShowMessage(1, MB_YESNO|MB_ICONQUESTION|MB_DEFBUTTON2) == IDNO)
 		return -1;
 	szSQL.Format(_T("DELETE FROM  WHERE  AND") );
 	int ret = pMF->ExecSQL(szSQL);
 	if(ret >= 0){
 		SetMode(VM_NONE);
 		OnCancelPhieuChamSocBenhNhanTruocPhauThuat();
 	}
	return 0;
}
int CPhieuChamSocBenhNhanTruocPhauThuat::OnSavePhieuChamSocBenhNhanTruocPhauThuat(){
 	if(GetMode() != VM_ADD && GetMode() != VM_EDIT)
 		return -1;
 	if(!IsValidateData())
 		return -1;
	if(m_szOperationNameKey.IsEmpty())
	{
		ShowMessageBox(_T("Kh\xF4ng \x63\xF3 ph\x1EABu thu\x1EADt n\xE0o \x111\x1B0\x1EE3\x63 \x63h\x1ECDn"));
		return -1;
	}

 	CMainFrame *pMF = (CMainFrame *)AfxGetMainWnd();
	CString szSQL;
	CString szData;
	m_jData.ToString(szData);
	
	szSQL.Format(_T("HMS_DOC_EMR_CREATE('BEFOREOPT_ORDER', %ld, '%s', %ld, %d, '%s', '%s', '%s') "),
	m_nDocumentNo, pMF->m_szDept, m_nRefIdx, 0, pMF->GetCurrentUser(), m_szOperationNameKey, szData);

	int ret = str2int(pMF->ExecDML(szSQL));
	return ret;
 	return 0;
}
int CPhieuChamSocBenhNhanTruocPhauThuat::OnCancelPhieuChamSocBenhNhanTruocPhauThuat(){
 	if(GetMode() == VM_EDIT)
 	{
 		SetMode(VM_VIEW);
 	} 
 	else 
 	{
 		SetMode(VM_NONE);
 	} 
 	CMainFrame *pMF = (CMainFrame *)AfxGetMainWnd();
 	return 0;
} 
int CPhieuChamSocBenhNhanTruocPhauThuat::OnPhieuChamSocBenhNhanTruocPhauThuatListLoadData(){
	return 0;
}
